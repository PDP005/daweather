// http://www.bostonglobe.com/js/hash/c25488bd437749805fddcb1952c0a32d61f5712b/dist/lib/jquery.touch.js,dist/globe-analytics.js,globe-incognito.js,dist/lib/jquery.throttledresize.js,dist/lib/jquery.debouncedresize.js,dist/lib/jquery.carousel.js,dist/lib/jquery.collapsible.js,dist/lib/jquery.stickyscroll.js,dist/lib/jquery.delayedenter.min.js,dist/lib/jquery-ajax-include.js,dist/globe-statusmsg.js,dist/globe-common.js,dist/globe-masthead.js,globe-sticky-masthead.js,dist/lib/picturefill.js,dist/globe-videoplayer.js,dist/globe-comments.js,dist/globe-article.js,globe-share-tools.js,globe-sticky-tools.js,dist/globe-feature-strip.js,dist/globe-adcatalog.js,dist/globe-adinclude.js,dist/globe-contentinclude.js

$.event.special.dragSnap = {
	setup: function(e, ui) {
		var $el = $(this),
			transitionSwap = function($el, tog) {
				var speed = .3,
					transition = ( tog ) ? "margin-left " + speed + "s ease" : 'none';

				$el.css({
					"-webkit-transition": transition,
					"-moz-transition": transition,
					"-ms-transition": transition,
					"-o-transition": transition,
					"transition": transition
				});
			},
			move = function($slider, moveTo) {
				var dStyle = document.body.style,
				 	transitionSupport = dStyle.webkitTransition !== undefined || 
						dStyle.mozTransition !== undefined ||
						dStyle.msTransition !== undefined ||
						dStyle.oTransition !== undefined ||
						dStyle.transition !== undefined;

				if( transitionSupport ) {
					$slider.css('marginLeft', moveTo + "%");
				} else {
					$slider.animate({ marginLeft: moveTo + "%" }, opt.speed);
				}
			},
			snapBack = function(e, ui) {
				var $el = ui.target,
					currentPos = ( $el.attr('style') != undefined ) ? $el.attr('style').match(/margin\-left:(.*[0-9])/i) && parseInt(RegExp.$1) : 0,
					leftmargin = (ui.left === false) ? carousel.roundDown(currentPos) - 100 : carousel.roundDown(currentPos);

				transitionSwap($el, true);
				move($el, leftmargin);	
			};

		$el
			.bind("snapback", snapBack)
			.bind("touchstart", function(e) {
				var data = e.originalEvent.touches ? e.originalEvent.touches[0] : e,
					start = {
						time: (new Date).getTime(),
						coords: [ data.pageX, data.pageY ],
						origin: $(e.target).closest('.slidewrap')
					},
					stop,
					$tEl = start.origin.find('.slider'),
					currentPos = ( $tEl.attr('style') != undefined ) ? $tEl.attr('style').match(/margin\-left:(.*[0-9])/i) && parseInt(RegExp.$1) : 0;
				
				transitionSwap($tEl, false);

				function moveHandler(e) {
					var data = e.originalEvent.touches ? e.originalEvent.touches[0] : e;
					stop = {
							time: (new Date).getTime(),
							coords: [ data.pageX, data.pageY ]
					};
					
					if(!start || Math.abs(start.coords[0] - stop.coords[0]) < Math.abs(start.coords[1] - stop.coords[1]) ) {
						return;
					}

					$tEl.css({"margin-left": currentPos + ( ( (stop.coords[0] - start.coords[0]) / start.origin.width() ) * 100 ) + '%' });						

					// prevent scrolling
					if (Math.abs(start.coords[0] - stop.coords[0]) > 10) {
						e.preventDefault();
					}
					
				};

				$el
					.bind("gesturestart", function(e) {
						$el
							.unbind("touchmove", moveHandler)
							.unbind("touchend", moveHandler);
					})
					.bind("touchmove", moveHandler)
					.one("touchend", function(e) {

						$el.unbind("touchmove", moveHandler);
						
						transitionSwap($tEl, true);
						
						if (start && stop ) {

							if (Math.abs(start.coords[0] - stop.coords[0]) > 10
								&& Math.abs(start.coords[0] - stop.coords[0]) > Math.abs(start.coords[1] - stop.coords[1])) {
								e.preventDefault();
							} else {
								$el.trigger('snapback', { target: $tEl, left: true });
								return;
							}

							if (Math.abs(start.coords[0] - stop.coords[0]) > 1 && Math.abs(start.coords[1] - stop.coords[1]) < 75) {
								var left = start.coords[0] > stop.coords[0];

							if( -( stop.coords[0] - start.coords[0]) > ( start.origin.width() / 4 ) || ( stop.coords[0] - start.coords[0]) > ( start.origin.width() / 4 ) ) {

								start.origin.trigger("dragSnap", {direction: left ? "left" : "right"});

								} else {								
									$el.trigger('snapback', { target: $tEl, left: left });
								}

							}
						}
						start = stop = undefined;
					});
			});
	}
};


/* jquery mobile virtual mouse events */
(function(w,D,d,l){var C="virtualMouseBindings",b="virtualTouchID",a="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),v="clientX clientY pageX pageY screenX screenY".split(" "),y={},E=0,r=0,q=0,o=false,H=[],f=false,O=false,t=w.support.eventCapture,s=w(d),B=1,K=0;w.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function p(i){while(i&&typeof i.originalEvent!=="undefined"){i=i.originalEvent}return i}function g(Q,R){var Y=Q.type;Q=w.Event(Q);Q.type=R;var Z=Q.originalEvent;var X=w.event.props;if(Z){for(var U=X.length,P;U;){P=X[--U];Q[P]=Z[P]}}if(Y.search(/^touch/)!==-1){var S=p(Z),Y=S.touches,V=S.changedTouches,T=(Y&&Y.length)?Y[0]:((V&&V.length)?V[0]:l);if(T){for(var U=0,W=v.length;U<W;U++){var P=v[U];Q[P]=T[P]}}}return Q}function M(R){var P={};while(R){var i=w.data(R,C);for(var Q in i){if(i[Q]){P[Q]=P.hasVirtualBinding=true}}R=R.parentNode}return P}function z(Q,P){while(Q){var i=w.data(Q,C);if(i&&(!P||i[P])){return Q}Q=Q.parentNode}return null}function F(){O=false}function j(){O=true}function N(){K=0;H.length=0;f=false;j()}function n(){F()}function u(){x();E=setTimeout(function(){E=0;N()},w.vmouse.resetTimerDuration)}function x(){if(E){clearTimeout(E);E=0}}function m(R,S,i){var Q=false;if((i&&i[R])||(!i&&z(S.target,R))){var P=g(S,R);w(S.target).trigger(P);Q=P.isDefaultPrevented()}return Q}function h(i){var P=w.data(i.target,b);if(!f&&(!K||K!==P)){m("v"+i.type,i)}}function L(Q){var S=p(Q).touches;if(S&&S.length===1){var R=Q.target,i=M(R);if(i.hasVirtualBinding){K=B++;w.data(R,b,K);x();n();o=false;var P=p(Q).touches[0];r=P.pageX;q=P.pageY;m("vmouseover",Q,i);m("vmousedown",Q,i)}}}function G(i){if(O){return}if(!o){m("vmousecancel",i,M(i.target))}o=true;u()}function c(S){if(O){return}var Q=p(S).touches[0];var P=o,R=w.vmouse.moveDistanceThreshold;o=o||(Math.abs(Q.pageX-r)>R||Math.abs(Q.pageY-q)>R);var i=M(S.target);if(o&&!P){m("vmousecancel",S,i)}m("vmousemove",S,i);u()}function e(Q){if(O){return}j();var i=M(Q.target);m("vmouseup",Q,i);if(!o){if(m("vclick",Q,i)){var P=p(Q).changedTouches[0];H.push({touchID:K,x:P.clientX,y:P.clientY});f=true}}m("vmouseout",Q,i);o=false;u()}function A(P){var Q=w.data(P,C),i;if(Q){for(i in Q){if(Q[i]){return true}}}return false}function J(){}function k(i){var P=i.substr(1);return{setup:function(R,Q){if(!A(this)){w.data(this,C,{})}var S=w.data(this,C);S[i]=true;y[i]=(y[i]||0)+1;if(y[i]===1){s.bind(P,h)}w(this).bind(P,J);if(t){y.touchstart=(y.touchstart||0)+1;if(y.touchstart===1){s.bind("touchstart",L).bind("touchend",e).bind("touchmove",c).bind("scroll",G)}}},teardown:function(R,Q){--y[i];if(!y[i]){s.unbind(P,h)}if(t){--y.touchstart;if(!y.touchstart){s.unbind("touchstart",L).unbind("touchmove",c).unbind("touchend",e).unbind("scroll",G)}}var S=w(this),T=w.data(this,C);if(T){T[i]=false}S.unbind(P,J);if(!A(this)){S.removeData(C)}}}}for(var I=0;I<a.length;I++){w.event.special[a[I]]=k(a[I])}if(t){d.addEventListener("click",function(U){var Q=H.length;var V=U.target;if(Q){var X=U.clientX,W=U.clientY,T=w.vmouse.clickDistanceThreshold;var Y=V;while(Y){for(var S=0;S<Q;S++){var P=H[S],R=0;if((Y===V&&Math.abs(P.x-X)<T&&Math.abs(P.y-W)<T)||w.data(Y,b)===P.touchID){U.preventDefault();U.stopPropagation();return}}Y=Y.parentNode}}},true)}})(jQuery,window,document);

function s_doPlugins(s){s.campaign||(s.campaign=s.getQueryParam("camp")),s.campaign||(s.campaign=s.getQueryParam("s_campaign")),s.campaign||(s.campaign=s.getQueryParam("sms_cid")),s.prop46||(s.eVar46=s.prop46=s.getQueryParam("eglobe_rc")),s.prop47||(s.eVar47=s.prop47=s.getQueryParam("globe_rc")),methode.freeviewCountIncremented&&(s.prop48=methode.freeviewCount),s.prop49||"article"!==globe.tmplType||(s.prop49=1),s.prop2||(s.prop2=s.getQueryParam("rss_id")),s.prop5||(s.prop5=s.getQueryParam("page")),s.prop7||(s.prop7=s.getQueryParam("p1")),s.prop12=s.getQueryParam("p12"),s.eVar2||(s.eVar2=s.getQueryParam("lskw")),s.eVar1||(s.eVar1=s.getQueryParam("p1")),s.events&&s.getQueryParam("event")?(s.events+=","+s.getQueryParam("event"),s.events+=",event2"):s.events?s.events+=",event2":s.getQueryParam("event")?s.events=s.getQueryParam("event")+",event2":s.events="event2",s.prop37=s.getPreviousValue(globe.analytics.omniture.pageName,"s_pv"),s.prop37&&(s.prop36=s.getPercentPageViewed()),s.prop43="D=g",s.list1=s.getAamSegments("aam_sc","aamsc"),s.eVar15="D=pageName"}function modulesOnPage(isInline){for(var node=isInline?document.querySelectorAll(".recirc")[0]:document.querySelectorAll("main .article:not([data-reactid])").length?document.querySelectorAll("main .article:not([data-reactid])")[0]:document,str="",mods=[{propName:"Related Content",className:"bg-related"},{propName:"Sponsored Well",className:"promo-well__sponsored-well"},{propName:"RFT triggered",className:"rft-triggered"},{propName:"Rockland RFT triggered",className:"rockland-triggered"}],i=0;i<mods.length;i++)node.getElementsByClassName(mods[i].className).length&&(str+=str.length?" | "+mods[i].propName:mods[i].propName);return str}function generateSponProps(){if(document.getElementById("sponcon")){var spon=document.getElementById("sponcon");s.prop32=spon.getAttribute("data-sponsor-name"),s.prop38=spon.getAttribute("data-sponsor-article")}}function checkRDBCookie(){var rdb=getRDBCookie("RDB");return null!=rdb&&""!=rdb?rdb.substring(76,86):""}function getRDBCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++)if(x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")),y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1),x=x.replace(/^\s+|\s+$/g,""),x==c_name)return unescape(y)}function getDaysOnMeter(measureFromDate){if(measureFromDate)fm=measureFromDate,dayPrefix="";else{var fm=globe.cookie.get("FM");if(!fm)return;dayPrefix="Day "}var startDateString=fm.split(":")[0].replace(/\"/g,""),year=parseInt(startDateString.substr(0,4),10),month=parseInt(startDateString.substr(4,2),10)-1;return day=parseInt(startDateString.substr(6,2),10),startDate=new Date(year,month,day),today=new Date,oneDay=864e5,delta=today.getTime()-startDate.getTime(),daysOnMeter=Math.ceil(delta/oneDay),dayPrefix+daysOnMeter}function calculateFirstDate(){var fm=globe.cookie.get("FM");if(fm){fm=fm.replace(/\"/g,"");var fmDate=fm.substring(0,8),fma=globe.cookie.get("FMa");return fma?fmDate>=fma||(fma=fmDate,document.cookie="FMa="+fmDate+";path=/;domain=.bostonglobe.com;expires=Tues, 2 Feb 2044 20:47:11 UTC;"):(fma=fmDate,document.cookie="FMa="+fmDate+";path=/;domain=.bostonglobe.com;expires=Tues, 2 Feb 2044 20:47:11 UTC;"),fma}}function trackPaywallSubscribe(targetLink){if(s.manageVars("clearVars"," pageName,prop1,prop6,channel,prop43,events",1),s.linkTrackVars="prop1,prop6,prop43,channel,events,pageName,eVar71,eVar72,eVar73,eVar74",s.linkTrackEvents="event29",s.eVar71=sPageNamea,s.eVar72=sChannela,s.eVar73=sProp1a,s.prop6=sProp6a,s.eVar74="Paywall Link",s.prop43="D=g",s.events="event29",targetLink=String(targetLink),targetLink.length<2){var meterTracking="Meter "+targetLink;s.eVar74=meterTracking,s.tl(this,"o","BG "+meterTracking+" Offer")}return window.innerWidth<680?mobileLink=!0:mobileLink=!1,destLink="",1==targetLink&&(mobileLink?destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20157D&p1=BG_Meter_Meter1":destLink="http://subscribe.bostonglobe.com/B4721/?p1=BG_Meter_Meter1"),2==targetLink&&(mobileLink?destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20158D&p1=BG_Meter_Meter2":destLink="http://subscribe.bostonglobe.com/B9713/?p1=BG_Meter_Meter2"),3==targetLink&&(mobileLink?destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20159D&p1=BG_Meter_Meter3":destLink="http://subscribe.bostonglobe.com/B0580/?p1=BG_Meter_Meter3"),4==targetLink&&(mobileLink?destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20160D&p1=BG_Meter_Meter4":destLink="http://subscribe.bostonglobe.com/B6600/?p1=BG_Meter_Meter4"),5==targetLink&&(mobileLink?destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20161D&p1=BG_Meter_Meter5":destLink="http://subscribe.bostonglobe.com/B5287/?p1=BG_Meter_Meter5"),"paywall"==targetLink&&(mobileLink?(s.tl(this,"o","BG Fullpage  Paywall Get Access"),destLink="http://digitalaccess.bostonglobe.com/da/63/?eglobe_rc=WW20162D&p1=BG_Meter_Paywall1"):(destLink="http://subscribe.bostonglobe.com/B4685/?p1=BG_Meter_Paywall1",s.tl(this,"o","BG Modal Paywall Get Access"))),"paywall-login"==targetLink&&(mobileLink?(s=s_gi("nytbostonglobecom"),s.trackLinkVars="none",s.trackLinkEvents="none",s.tl(this,"o","BG Meter Login"),destLink="https://www.bostonglobe.com/login"):(s=s_gi("nytbostonglobecom"),s.trackLinkVars="none",s.trackLinkEvents="none",s.tl(this,"o","BG Meter Login"),destLink="https://www.bostonglobe.com/login")),"paywall-home"==targetLink&&(mobileLink?(s.tl(this,"o","BG Fullpage Paywall Back to Home"),destLink="http://www.bostonglobe.com"):(destLink="http://www.bostonglobe.com",s.tl(this,"o","BG Modal Paywall Back to Home"))),location.assign(destLink),!1}function s_gi(un,pg,ss){var a,i,j,x,s,c='s.version=\'H.26.2\';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function(\'var e;try{console.log("\'+s.rep(s.rep(s.rep(m,"\\\\","\\\\\\\\"),"\\n","\\\\n"),"\\"","\\\\\\"")+\'");}catch(e){}\');tcf()};s.cls=function(x,c){var i,y=\'\';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}retur'+"n y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;return 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent(x);for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unescape(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visibilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){while(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+s._in+'_'+un,im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.version+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.alt=\"\";im.s_l=0;im.onload=im.onerror=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='pageURL'){q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?'),hi=h.indexOf('#');if(qi>=0){if(hi>=0&&hi<qi)qi=hi;}else qi=hi;h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.indexOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var s=this;if(s.bct&&s.bce)s.bct.dispatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct.href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&e.s_fe)return;var s=s_c_il['+s._in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForcedLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"click\",s.bc,true);s.bbc=s.useForcedLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcElement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLinkTracking&&e.target){a=e.target;while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a.parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h.indexOf(\"javascript:\")==0)h=0;t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent\"||(s.wd.name&&t==s.wd.name))){tcf=new Function(\"s\",\"var x;try{n=s.d.createEvent(\\\\\"MouseEvents\\\\\")}catch(x){n=new MouseEvent}return n\");n=tcf(s);if(n){tcf=new Function(\"n\",\"e\",\"var x;try{n.initMouseEvent(\\\\\"click\\\\\",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(x){n=0}return n\");n=tcf(n,e);if(n){n.s_fe=1;e.stopPropagation();if (e.stopImmediatePropagation) {e.stopImmediatePropagation();}e.preventDefault();s.bct=e.target;s.bce=n}}}}}');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&((s.n.userAgent.indexOf('WebKit')>=0&&s.d.createEvent)||(s.n.userAgent.indexOf('Firefox/2')>=0&&s.wd.MouseEvent))){s.bbc=1;s.useForcedLinkTracking=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,false)}else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s.gfid=function(){var s=this,d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexOf('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j=Math.floor(Math.random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));if(!s.c_w(k,fid,e))fid=0;return fid};s.track=s.t=function(vo){var s=this,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if(s.mpc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j='1.7';if(a.reduce){j='1.8';if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}s.fid=s.gfid();if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttribute&&o.getAttribute('data-s-object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useForcedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.indexOf('s_objectID'),oce,ocq,ocx;if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb))>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'||ocq)){if(ocq){if(oc.charAt(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc){o.s_soid=new Function('s','var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);s.abort=0;s.pageURLRest=s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){var s=this;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='timestamp,dynamicVariablePrefix,visitorID,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,linkName,linkType';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",w=window,l=w.s_c_il,n=navigator,u=n.userAgent,v=n.appVersion,e=v.indexOf("MSIE "),m=u.indexOf("Netscape6/");
if(un&&(un=un.toLowerCase(),l))for(j=0;2>j;j++)for(i=0;i<l.length;i++)if(s=l[i],x=s._c,(!x||"s_c"==x||j>0&&"s_l"==x)&&(s.oun==un||s.fs&&s.sa&&s.fs(s.oun,un))){if(s.sa&&s.sa(un),"s_c"==x)return s}else s=0;return w.s_an="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",w.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a"),w.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x"),w.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)"),w.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn(x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x"),w.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")"),w.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a"),w.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;"),c=s_d(c),e>0?(a=parseInt(i=v.substring(e+5)),a>3&&(a=parseFloat(i))):a=m>0?parseFloat(u.substring(m+10)):parseFloat(v),(5>a||v.indexOf("Opera")>=0||u.indexOf("Opera")>=0)&&(c=s_ft(c)),s||(s=new Object,w.s_c_in||(w.s_c_il=new Array,w.s_c_in=0),s._il=w.s_c_il,s._in=w.s_c_in,s._il[s._in]=s,w.s_c_in++),s._c="s_c",new Function("s","un","pg","ss",c)(s,un,pg,ss),s}function s_giqf(){var i,t,s,w=window,q=w.s_giq;if(q)for(i=0;i<q.length;i++)t=q[i],s=s_gi(t.oun),s.sa(t.un),s.setTagContainer(t.tagContainerName);w.s_giq=0}var s_account="nytbostonglobecom,nytbgglobal",s=s_gi(s_account);s.charSet="ISO-8859-1",s.currencyCode="USD",s.trackDownloadLinks=!0,s.trackExternalLinks=!0,s.trackInlineStats=!0,s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,doc,docx,pdf,xls,xlsx,epub,mobi,ibooks",s.linkInternalFilters="javascript:,cars.com,boston.com,bostonglobe.com,globe.com,cityfeet.com,legacy.com,monstermoving.com,movietickets.com,newsbank.com,salary.com,snocountry.com,travidia.com,uclick.com,zap2it.com,bostondirtdogs.com,adperfect.com,bankrate.com,ce.com,flightview.com,gabriels.com,harvestadsdepot.com,interviewmastery.com,localattitude.com,pair.com,prospero.com,resume.com,sportsballot.com,stockgroup.com,vanlines.com,longjaunt.com,boston.addresses.com,boston.jiwire.com,boston.stats.com,gadzoo.com,jobview.boston.monster.com,mrboffo.com,mypublicnotices.com,upickem.com,realtraffic.maptuit.com,caspio.com,upickem.net,seeclickfix.com,eventbrite.com",s.linkLeaveQueryString=!1,s.linkTrackVars="None",s.linkTrackEvents="None",location.pathname.match("/articles/")&&(dateNow=new Date,dateFromURI=String(location.pathname.match(/\d{4}\/\d{2}\/\d{2}/)),dateString=dateFromURI.replace("/",","),pubDate=new Date(dateFromURI.replace("/",",")),daysPubFullDate=dateNow-pubDate,daysPub=parseInt(daysPubFullDate/864e5),s.prop34=daysPub+" days old"),s.usePlugins=!0,s.doPlugins=s_doPlugins,s.prop50=modulesOnPage(),generateSponProps(),s.loadModule("Media"),s.Media.autoTrack=!1,s.Media.trackWhilePlaying=!0,s.Media.trackVars="events,prop31,eVar31,eVar33,eVar34,eVar35,list1",s.Media.trackEvents="event17,event18,event19,event20,event21,event22",s.Media.trackMilestones="25,75",s.Media.segmentByMilestones=!0,s.Media.trackUsingContextData=!0,s.Media.contextDataMapping={"a.media.name":"eVar33,prop31","a.media.segment":"eVar34","a.contentType":"eVar35","a.media.timePlayed":"event20","a.media.view":"event17","a.media.segmentView":"event19","a.media.complete":"event18","a.media.milestones":{25:"event21",75:"event22"}},window.optimizely=window.optimizely||[],window.optimizely.push("sc_activate"),s.dc="112",s.trackingServer="metrics.boston.com",s.trackingServerSecure="smetrics.boston.com",s.eVar12=checkRDBCookie();var oldestDate=calculateFirstDate();oldestDate&&(trackingDate=oldestDate.substring(4,6)+"/"+oldestDate.substring(6,8),trackingDate=trackingDate+"/"+oldestDate.substring(0,4),s.eVar6=trackingDate,s.eVar5=getDaysOnMeter(oldestDate)),s.eVar4=getDaysOnMeter(null),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.manageVars=new Function("c","l","f","var s=this,vl,la,vla;l=l?l:'';f=f?f:1 ;if(!s[c])return false;vl='pageName,purchaseID,channel,server,pageType,campaign,state,zip,events,products,transactionID';for(var n=1;n<76;n++){vl+=',prop'+n+',eVar'+n+',hier'+n;}if(l&&(f==1||f==2)){if(f==1){vl=l;}if(f==2){la=s.split(l,',');vla=s.split(vl,',');vl='';for(x in la){for(y in vla){if(la[x]==vla[y]){vla[y]='';}}}for(y in vla){vl+=vla[y]?','+vla[y]:'';}}s.pt(vl,',',c,0);return true;}else if(l==''&&f==1){s.pt(vl,',',c,0);return true;}else{return false;}"),s.clearVars=new Function("t","var s=this;s[t]='';"),s.lowercaseVars=new Function("t","var s=this;if(s[t]&&t!='events'){s[t]=s[t].toString();if(s[t].indexOf('D=')!=0){s[t]=s[t].toLowerCase();}}"),s.readCookie=new Function("ckname","var allcookies=document.cookie;var cknameEQ=ckname+'=';var pos=allcookies.indexOf(cknameEQ);if (pos != -1) {var start=pos + cknameEQ.length;var end=allcookies.indexOf(';',start);if (end == -1) end=allcookies.length;return allcookies.substring(start,end);}return '';"),s.getQueryParam=new Function("p","d","u","var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:''+s.wd.location);u=u=='f'?''+s.gtfs().location:u;while(p){i=p.indexOf(',');i=i<0?p.length:i;t=s.p_gpv(p.substring(0,i),u);if(t)v+=v?d+t:t;p=p.substring(i==p.length?i:i+1)}return v"),s.p_gpv=new Function("k","u","var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v=s.pt(q,'&','p_gvf',k)}return v"),s.p_gvf=new Function("t","k","if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'True':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s.epa(v)}return ''"),s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.getPercentPageViewed=function(){if("undefined"==typeof s.linkType||"e"==s.linkType){var v=s.c_r("s_ppv");return s.c_w("s_ppv",0),v}},s.getPPVCalc=function(){var dh=Math.max(Math.max(s.d.body.scrollHeight,s.d.documentElement.scrollHeight),Math.max(s.d.body.offsetHeight,s.d.documentElement.offsetHeight),Math.max(s.d.body.clientHeight,s.d.documentElement.clientHeight)),vph=s.wd.innerHeight||s.d.documentElement.clientHeight||s.d.body.clientHeight,st=s.wd.pageYOffset||s.wd.document.documentElement.scrollTop||s.wd.document.body.scrollTop,vh=st+vph,pv=Math.round(vh/dh*100),cp=s.c_r("s_ppv");pv>100?s.c_w("s_ppv",""):pv>cp&&s.c_w("s_ppv",pv)},s.getPPVSetup=function(){var s=this;s.wd.addEventListener?(s.wd.addEventListener("load",s.getPPVCalc,!1),s.wd.addEventListener("scroll",s.getPPVCalc,!1),s.wd.addEventListener("resize",s.getPPVCalc,!1)):s.wd.attachEvent&&(s.wd.attachEvent("onload",s.getPPVCalc),s.wd.attachEvent("onscroll",s.getPPVCalc),s.wd.attachEvent("onresize",s.getPPVCalc))},s.getPPVSetup(),s.getAamSegments=new Function("a","b","var s=this;var c=s.c_r(a);if(c){c=s.repl(c,b+'=','');}return c"),s.repl=new Function("x","o","n","var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o,i+l)}return x"),s.m_Media_c="var m=s.m_i('Media');if(m.completeByCloseOffset==undefined)m.completeByCloseOffset=1;if(m.completeCloseOffsetThreshold==undefined)m.completeCloseOffsetThreshold=1;m.cn=function(n){var m=this;return m.s.rep(m.s.rep(m.s.rep(n,\"\\n\",''),\"\\r\",''),'--**--','')};m.open=function(n,l,p,b){var m=this,i=new Object,tm=new Date,a='',x;n=m.cn(n);if(!l)l=-1;if(n&&p){if(!m.l)m.l=new Object;if(m.l[n])m.close(n);if(b&&b.id)a=b.id;if(a)for (x in m.l)if(m.l[x]&&m.l[x].a==a)m.close(m.l[x].n);i.n=n;i.l=l;i.o=0;i.x=0;i.p=m.cn(m.playerName?m.playerName:p);i.a=a;i.t=0;i.ts=0;i.s=Math.floor(tm.getTime()/1000);i.lx=0;i.lt=i.s;i.lo=0;i.e='';i.to=-1;i.tc=0;i.fel=new Object;i.vt=0;i.sn=0;i.sx=\"\";i.sl=0;i.sg=0;i.sc=0;i.us=0;i.co=0;i.cot=0;i.lm=0;i.lom=0;m.l[n]=i}};m._delete=function(n){var m=this,i;n=m.cn(n);i=m.l[n];m.l[n]=0;if(i&&i.m)clearTimeout(i.m.i)};m.close=function(n){this.e(n,0,-1)};m.play=function(n,o,sn,sx,sl){var m=this,i;i=m.e(n,1,o,sn,sx,sl);if(i&&!i.m){i.m=new Object;i.m.m=new Function('var m=s_c_il['+m._in+'],i;if(m.l){i=m.l[\"'+m.s.rep(i.n,'\"','\\\\\"')+'\"];if(i){if(i.lx==1)m.e(i.n,3,-1);i.m.i=setTimeout(i.m.m,1000)}}');i.m.m()}};m.complete=function(n,o){this.e(n,5,o)};m.stop=function(n,o){this.e(n,2,o)};m.track=function(n){this.e(n,4,-1)};m.bcd=function(vo,i){var m=this,ns='a.media.',v=vo.linkTrackVars,e=vo.linkTrackEvents,pe='m_i',pev3,c=vo.contextData,x;c['a.contentType']='video';c[ns+'name']=i.n;c[ns+'playerName']=i.p;if(i.l>0){c[ns+'length']=i.l;}c[ns+'timePlayed']=Math.floor(i.ts);if(!i.vt){c[ns+'view']=true;pe='m_s';i.vt=1}if(i.sx){c[ns+'segmentNum']=i.sn;c[ns+'segment']=i.sx;if(i.sl>0)c[ns+'segmentLength']=i.sl;if(i.sc&&i.ts>0)c[ns+'segmentView']=true}if(!i.cot&&i.co){c[ns+\"complete\"]=true;i.cot=1}if(i.lm>0)c[ns+'milestone']=i.lm;if(i.lom>0)c[ns+'offsetMilestone']=i.lom;if(v)for(x in c)v+=',contextData.'+x;pev3='video';vo.pe=pe;vo.pev3=pev3;var d=m.contextDataMapping,y,a,l,n;if(d){vo.events2='';if(v)v+=',events';for(x in d){if(x.substring(0,ns.length)==ns)y=x.substring(ns.length);else y=\"\";a=d[x];if(typeof(a)=='string'){l=m.s.sp(a,',');for(n=0;n<l.length;n++){a=l[n];if(x==\"a.contentType\"){if(v)v+=','+a;vo[a]=c[x]}else if(y){if(y=='view'||y=='segmentView'||y=='complete'||y=='timePlayed'){if(e)e+=','+a;if(c[x]){if(y=='timePlayed'){if(c[x])vo.events2+=(vo.events2?',':'')+a+'='+c[x];}else if(c[x])vo.events2+=(vo.events2?',':'')+a}}else if(y=='segment'&&c[x+'Num']){if(v)v+=','+a;vo[a]=c[x+'Num']+':'+c[x]}else{if(v)v+=','+a;vo[a]=c[x]}}}}else if(y=='milestones'||y=='offsetMilestones'){x=x.substring(0,x.length-1);if(c[x]&&d[x+'s'][c[x]]){if(e)e+=','+d[x+'s'][c[x]];vo.events2+=(vo.events2?',':'')+d[x+'s'][c[x]]}}}vo.contextData=0}vo.linkTrackVars=v;vo.linkTrackEvents=e};m.bpe=function(vo,i,x,o){var m=this,pe='m_o',pev3,d='--**--';pe='m_o';if(!i.vt){pe='m_s';i.vt=1}else if(x==4)pe='m_i';pev3=m.s.ape(i.n)+d+Math.floor(i.l>0?i.l:1)+d+m.s.ape(i.p)+d+Math.floor(i.t)+d+i.s+d+(i.to>=0?'L'+Math.floor(i.to):'')+i.e+(x!=0&&x!=2?'L'+Math.floor(o):'');vo.pe=pe;vo.pev3=pev3};m.e=function(n,x,o,sn,sx,sl,pd){var m=this,i,tm=new Date,ts=Math.floor(tm.getTime()/1000),c,l,v=m.trackVars,e=m.trackEvents,ti=m.trackSeconds,tp=m.trackMilestones,to=m.trackOffsetMilestones,sm=m.segmentByMilestones,so=m.segmentByOffsetMilestones,z=new Array,j,t=1,w=new Object,x,ek,tc,vo=new Object;n=m.cn(n);i=n&&m.l&&m.l[n]?m.l[n]:0;if(i){if(o<0){if(i.lx==1&&i.lt>0)o=(ts-i.lt)+i.lo;else o=i.lo}if(i.l>0)o=o<i.l?o:i.l;if(o<0)o=0;i.o=o;if(i.l>0){i.x=(i.o/i.l)*100;i.x=i.x>100?100:i.x}if(i.lo<0)i.lo=o;tc=i.tc;w.name=n;w.length=i.l;w.openTime=new Date;w.openTime.setTime(i.s*1000);w.offset=i.o;w.percent=i.x;w.playerName=i.p;if(i.to<0)w.mediaEvent=w.event='OPEN';else w.mediaEvent=w.event=(x==1?'PLAY':(x==2?'STOP':(x==3?'MONITOR':(x==4?'TRACK':(x==5?'COMPLETE':('CLOSE'))))));if(!pd){if(i.pd)pd=i.pd}else i.pd=pd;w.player=pd;if(x>2||(x!=i.lx&&(x!=2||i.lx==1))) {if(!sx){sn=i.sn;sx=i.sx;sl=i.sl}if(x){if(x==1)i.lo=o;if((x<=3||x==5)&&i.to>=0){t=0;v=e=\"None\";if(i.to!=o){l=i.to;if(l>o){l=i.lo;if(l>o)l=o}z=tp?m.s.sp(tp,','):0;if(i.l>0&&z&&o>=l)for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c&&(l/i.l)*100<c&&i.x>=c){t=1;j=z.length;w.mediaEvent=w.event='MILESTONE';i.lm=w.milestone=c}}z=to?m.s.sp(to,','):0;if(z&&o>=l)for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c&&l<c&&o>=c){t=1;j=z.length;w.mediaEvent=w.event='OFFSET_MILESTONE';i.lom=w.offsetMilestone=c}}}}if(i.sg||!sx){if(sm&&tp&&i.l>0){z=m.s.sp(tp,',');if(z){z[z.length]='100';l=0;for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c){if(i.x<c){sn=j+1;sx='M:'+l+'-'+c;j=z.length}l=c}}}}else if(so&&to){z=m.s.sp(to,',');if(z){z[z.length]=''+(i.l>0?i.l:'E');l=0;for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c||z[j]=='E'){if(o<c||z[j]=='E'){sn=j+1;sx='O:'+l+'-'+c;j=z.length}l=c}}}}if(sx)i.sg=1}if((sx||i.sx)&&sx!=i.sx){i.us=1;if(!i.sx){i.sn=sn;i.sx=sx}if(i.to>=0)t=1}if(x>=2&&i.lo<o){i.t+=o-i.lo;i.ts+=o-i.lo}if(x<=2||(x==3&&!i.lx)){i.e+=(x==1||x==3?'S':'E')+Math.floor(o);i.lx=(x==3?1:x)}if(!t&&i.to>=0&&x<=3){ti=ti?ti:0;if(ti&&i.ts>=ti){t=1;w.mediaEvent=w.event='SECONDS'}}i.lt=ts;i.lo=o}if(!x||i.x>=100){x=0;m.e(n,2,-1,0,0,-1,pd);v=e=\"None\";w.mediaEvent=w.event=\"CLOSE\"}if(x==5||(m.completeByCloseOffset&&(!x||i.x>=100)&&i.l>0&&o>=i.l-m.completeCloseOffsetThreshold)){w.complete=i.co=1;t=1}ek=w.mediaEvent;if(ek=='MILESTONE')ek+='_'+w.milestone;else if(ek=='OFFSET_MILESTONE')ek+='_'+w.offsetMilestone;if(!i.fel[ek]) {w.eventFirstTime=true;i.fel[ek]=1}else w.eventFirstTime=false;w.timePlayed=i.t;w.segmentNum=i.sn;w.segment=i.sx;w.segmentLength=i.sl;if(m.monitor&&x!=4)m.monitor(m.s,w);if(x==0)m._delete(n);if(t&&i.tc==tc){vo=new Object;vo.contextData=new Object;vo.linkTrackVars=v;vo.linkTrackEvents=e;if(!vo.linkTrackVars)vo.linkTrackVars='';if(!vo.linkTrackEvents)vo.linkTrackEvents='';if(m.trackUsingContextData)m.bcd(vo,i);else m.bpe(vo,i,x,o);m.s.t(vo);if(i.us){i.sn=sn;i.sx=sx;i.sc=1;i.us=0}else if(i.ts>0)i.sc=0;i.e=\"\";i.lm=i.lom=0;i.ts-=Math.floor(i.ts);i.to=o;i.tc++}}}return i};m.ae=function(n,l,p,x,o,sn,sx,sl,pd,b){var m=this,r=0;if(n&&(!m.autoTrackMediaLengthRequired||(length&&length>0)) &&p){if(!m.l||!m.l[n]){if(x==1||x==3){m.open(n,l,p,b);r=1}}else r=1;if(r)m.e(n,x,o,sn,sx,sl,pd)}};m.a=function(o,t){var m=this,i=o.id?o.id:o.name,n=o.name,p=0,v,c,c1,c2,xc=m.s.h,x,e,f1,f2='s_media_'+m._in+'_oc',f3='s_media_'+m._in+'_t',f4='s_media_'+m._in+'_s',f5='s_media_'+m._in+'_l',f6='s_media_'+m._in+'_m',f7='s_media_'+m._in+'_c',tcf,w;if(!i){if(!m.c)m.c=0;i='s_media_'+m._in+'_'+m.c;m.c++}if(!o.id)o.id=i;if(!o.name)o.name=n=i;if(!m.ol)m.ol=new Object;if(m.ol[i])return;m.ol[i]=o;if(!xc)xc=m.s.b;tcf=new Function('o','var e,p=0;try{if(o.versionInfo&&o.currentMedia&&o.controls)p=1}catch(e){p=0}return p');p=tcf(o);if(!p){tcf=new Function('o','var e,p=0,t;try{t=o.GetQuickTimeVersion();if(t)p=2}catch(e){p=0}return p');p=tcf(o);if(!p){tcf=new Function('o','var e,p=0,t;try{t=o.GetVersionInfo();if(t)p=3}catch(e){p=0}return p');p=tcf(o)}}v=\"var m=s_c_il[\"+m._in+\"],o=m.ol['\"+i+\"']\";if(p==1){p='Windows Media Player '+o.versionInfo;c1=v+',n,p,l,x=-1,cm,c,mn;if(o){cm=o.currentMedia;c=o.controls;if(cm&&c){mn=cm.name?cm.name:c.URL;l=cm.duration;p=c.currentPosition;n=o.playState;if(n){if(n==8)x=0;if(n==3)x=1;if(n==1||n==2||n==4||n==5||n==6)x=2;}';c2='if(x>=0)m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}}';c=c1+c2;if(m.s.isie&&xc){x=m.s.d.createElement('script');x.language='jscript';x.type='text/javascript';x.htmlFor=i;x.event='PlayStateChange(NewState)';x.defer=true;x.text=c;xc.appendChild(x);o[f6]=new Function(c1+'if(n==3){x=3;'+c2+'}setTimeout(o.'+f6+',5000)');o[f6]()}}if(p==2){p='QuickTime Player '+(o.GetIsQuickTimeRegistered()?'Pro ':'')+o.GetQuickTimeVersion();f1=f2;c=v+',n,x,t,l,p,p2,mn;if(o){mn=o.GetMovieName()?o.GetMovieName():o.GetURL();n=o.GetRate();t=o.GetTimeScale();l=o.GetDuration()/t;p=o.GetTime()/t;p2=o.'+f5+';if(n!=o.'+f4+'||p<p2||p-p2>5){x=2;if(n!=0)x=1;else if(p>=l)x=0;if(p<p2||p-p2>5)m.ae(mn,l,\"'+p+'\",2,p2,0,\"\",0,0,o);m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}if(n>0&&o.'+f7+'>=10){m.ae(mn,l,\"'+p+'\",3,p,0,\"\",0,0,o);o.'+f7+'=0}o.'+f7+'++;o.'+f4+'=n;o.'+f5+'=p;setTimeout(\"'+v+';o.'+f2+'(0,0)\",500)}';o[f1]=new Function('a','b',c);o[f4]=-1;o[f7]=0;o[f1](0,0)}if(p==3){p='RealPlayer '+o.GetVersionInfo();f1=n+'_OnPlayStateChange';c1=v+',n,x=-1,l,p,mn;if(o){mn=o.GetTitle()?o.GetTitle():o.GetSource();n=o.GetPlayState();l=o.GetLength()/1000;p=o.GetPosition()/1000;if(n!=o.'+f4+'){if(n==3)x=1;if(n==0||n==2||n==4||n==5)x=2;if(n==0&&(p>=l||p==0))x=0;if(x>=0)m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}if(n==3&&(o.'+f7+'>=10||!o.'+f3+')){m.ae(mn,l,\"'+p+'\",3,p,0,\"\",0,0,o);o.'+f7+'=0}o.'+f7+'++;o.'+f4+'=n;';c2='if(o.'+f2+')o.'+f2+'(o,n)}';if(m.s.wd[f1])o[f2]=m.s.wd[f1];m.s.wd[f1]=new Function('a','b',c1+c2);o[f1]=new Function('a','b',c1+'setTimeout(\"'+v+';o.'+f1+'(0,0)\",o.'+f3+'?500:5000);'+c2);o[f4]=-1;if(m.s.isie)o[f3]=1;o[f7]=0;o[f1](0,0)}};m.as=new Function('e','var m=s_c_il['+m._in+'],l,n;if(m.autoTrack&&m.s.d.getElementsByTagName){l=m.s.d.getElementsByTagName(m.s.isie?\"OBJECT\":\"EMBED\");if(l)for(n=0;n<l.length;n++)m.a(l[n]);}');if(s.wd.attachEvent)s.wd.attachEvent('onload',m.as);else if(s.wd.addEventListener)s.wd.addEventListener('load',m.as,false);if(m.onLoad)m.onLoad(s,m)",s.m_i("Media");var s_code="",s_objectID;s_giqf();var _sf_startpt=(new Date).getTime(),_sf_async_config={uid:8544,domain:"bostonglobe.com"};_sf_async_config.path=location.pathname,"undefined"!=typeof globe.analytics.omniture.channel&&(_sf_async_config.sections=globe.analytics.omniture.channel.toLowerCase()),""!=_sf_async_config.sections&&"undefined"!=typeof globe.analytics.omniture.prop1?_sf_async_config.sections+=","+globe.analytics.omniture.prop1.toLowerCase():"undefined"!=typeof globe.analytics.omniture.prop1&&(_sf_async_config.sections=globe.analytics.omniture.prop1.toLowerCase()),"undefined"!=typeof globe.analytics.omniture.prop6&&(_sf_async_config.authors=globe.analytics.omniture.prop6.toLowerCase()),function(){function loadChartbeat(){window._sf_endpt=(new Date).getTime();var e=document.createElement("script");e.setAttribute("language","javascript"),e.setAttribute("type","text/javascript"),e.setAttribute("src",("https:"==document.location.protocol?"https://s3.amazonaws.com/":"http://")+"static.chartbeat.com/js/chartbeat.js"),document.body.appendChild(e)}var oldonload=window.onload;window.onload="function"!=typeof window.onload?loadChartbeat:function(){oldonload(),loadChartbeat()}}(),function(){var d=new Image(1,1);d.onerror=d.onload=function(){d.onerror=d.onload=null},d.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-604060h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&ts=compact&rnd=",(new Date).getTime()].join("")}();var _comscore=_comscore||[];_comscore.push({c1:"2",c2:"3005403"}),function(){var comscore_s=document.createElement("script"),el=document.getElementsByTagName("script")[0];comscore_s.async=!0,comscore_s.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",el.parentNode.insertBefore(comscore_s,el)}(),function(){function objIsEmpty(obj){for(var prop in obj)if(obj.hasOwnProperty(prop)&&""!==prop)return!1;return!0}s.rl={},$.extend(s,globe.analytics.omniture),"function"!=typeof DIL&&(DIL=function(a,b){var d,e,c=[];a!==Object(a)&&(a={});var f,g,n,s,u,v,q,w,x,I,C;f=a.partner,g=a.containerNSID,n=a.iframeAttachmentDelay,s=!!a.disableDestinationPublishingIframe,u=a.iframeAkamaiHTTPS,v=a.mappings,q=a.uuidCookie,w=!0===a.enableErrorReporting,x=a.visitorService,I=a.declaredId,C=!0===a.removeFinishedScriptsAndCallbacks;var J,K,F,y,E;J=!0===a.disableScriptAttachment,K=!0===a.disableDefaultRequest,F=a.afterResultForDefaultRequest,y=!0===a.disableDPDemdexCookieSetting,E=a.dpIframeSrc,w&&DIL.errorModule.activate();var L=!0===window._dil_unit_tests;if((d=b)&&c.push(d+""),!f||"string"!=typeof f)return d="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:d,filename:"dil.js"}),Error(d);if(d="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0",(g||"number"==typeof g)&&(g=parseInt(g,10),!isNaN(g)&&g>=0&&(d="")),d&&(g=0,c.push(d),d=""),e=DIL.getDil(f,g),e instanceof DIL&&e.api.getPartner()==f&&e.api.getContainerNSID()==g)return e;if(!(this instanceof DIL))return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+f+" and containerNSID = "+g);DIL.registerDil(this,f,g);var A={IS_HTTPS:"https:"==document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},G={stuffed:{}},m={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:g+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2e3,calledBack:!1,uuid:null,noVisitorAPI:!1,instance:null,releaseType:"no VisitorAPI",admsProcessingStarted:!1,process:function(h){try{if(!this.admsProcessingStarted){var l,k,d,b,c,a=this;if("function"==typeof h&&"function"==typeof h.getInstance){if(x!==Object(x)||!(l=x.namespace)||"string"!=typeof l)return this.releaseType="no namespace",void this.releaseRequests();if(k=h.getInstance(l),k===Object(k)&&"function"==typeof k.isAllowed&&"function"==typeof k.getGlobalVisitorID)return k.isAllowed()?(this.instance=k,this.admsProcessingStarted=!0,d=function(h){"VisitorAPI"!=a.releaseType&&(a.uuid=h,a.releaseType="VisitorAPI",a.releaseRequests())},L&&(b=x.server)&&"string"==typeof b&&(k.server=b),c=k.getGlobalVisitorID(d),"string"==typeof c&&c.length?void d(c):void setTimeout(function(){"VisitorAPI"!=a.releaseType&&(a.releaseType="timeout",a.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE)):(this.releaseType="VisitorAPI not allowed",void this.releaseRequests());this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(f){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0,p.registerRequest()},getGlobalVisitorID:function(){return this.instance?this.instance.getGlobalVisitorID():null}},declaredId:{uuid:null,declaredId:{init:null,request:null},declaredIdCombos:{},dIdAlwaysOn:!1,dIdInRequest:!1,setDeclaredId:function(h,a){var l=t.isPopulatedString,k=encodeURIComponent;if(h===Object(h)&&l(a)){var d=h.dpid,c=h.dpuuid,b=null;if(l(d)&&l(c))return b=k(d)+"$"+k(c),!0===this.declaredIdCombos[b]?"setDeclaredId: combo exists for type '"+a+"'":(this.declaredIdCombos[b]=!0,this.declaredId[a]={dpid:d,dpuuid:c},"init"==a?this.dIdAlwaysOn=!0:"request"==a&&(this.dIdInRequest=!0),"setDeclaredId: succeeded for type '"+a+"'")}return"setDeclaredId: failed for type '"+a+"'"},getDeclaredIdQueryString:function(){var h=this.declaredId.request,a=this.declaredId.init,l="";return null!==h?l="&d_dpid="+h.dpid+"&d_dpuuid="+h.dpuuid:null!==a&&(l="&d_dpid="+a.dpid+"&d_dpuuid="+a.dpuuid),l},getUUIDQueryString:function(){var h=p.adms,a=t.isPopulatedString,l=!1,k=p.adms.getGlobalVisitorID();return a(this.uuid)?a(k)&&this.uuid!=k&&(this.uuid=k):this.uuid=k||h.uuid,(this.dIdAlwaysOn||this.dIdInRequest)&&(l=!0,this.dIdInRequest=!1),a(this.uuid)&&l?"d_uuid="+this.uuid+"&":""}},registerRequest:function(h){var a=this.firingQueue;h===Object(h)&&a.push(h),!this.firing&&a.length&&(this.adms.calledBack?(h=a.shift(),h.src=h.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.declaredId.getUUIDQueryString()+"d_nsid="),B.fireRequest(h),this.firstRequestHasFired||"script"!=h.tag||(this.firstRequestHasFired=!0)):this.processVisitorAPI())},processVisitorAPI:function(){this.adms.process(window.Visitor)},requestRemoval:function(h){if(!C)return"removeFinishedScriptsAndCallbacks is not boolean true";var l,k,a=this.toRemove;if(h===Object(h)&&(l=h.script,k=h.callbackName,(l===Object(l)&&"SCRIPT"==l.nodeName||"no script created"==l)&&"string"==typeof k&&k.length&&a.push(h)),this.readyToRemove&&a.length){k=a.shift(),l=k.script,k=k.callbackName,"no script created"!=l?(h=l.src,l.parentNode.removeChild(l)):h=l,window[k]=null;try{delete window[k]}catch(d){}return this.removed.push({scriptSrc:h,callbackName:k}),DIL.variables.scriptsRemoved.push(h),DIL.variables.callbacksRemoved.push(k),this.requestRemoval()}return"requestRemoval() processed"}};e=function(){var h="http://fast.",a="?d_nsid="+g+"#"+encodeURIComponent(document.location.href);return"string"==typeof E&&E.length?E+a:(A.IS_HTTPS&&(h=!0===u?"https://fast.":"https://"),h+f+".demdex.net/dest4.html"+a)};var z={THROTTLE_START:3e4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+f+"_"+g,url:e(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:A.POST_MESSAGE_ENABLED?15:100,jsonProcessed:[],responseUUID:null,dsidc:y,attachIframe:function(){var h=this,a=document.createElement("iframe");a.id=this.id,a.style.cssText="display: none; width: 0; height: 0;",a.src=this.url,r.addListener(a,"load",function(){h.iframeHasLoaded=!0,h.requestToProcess()}),document.body.appendChild(a),this.iframe=a},requestToProcess:function(h,a){var l=this;h&&!t.isEmptyObject(h)&&this.process(h,a),this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){l.messageSendingInterval=A.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(h,a){var k,d,c,b,f,e,l=encodeURIComponent;if(a===Object(a)&&(e=r.encodeAndBuildRequest([p.declaredId.uuid||"",a.dpid||"",a.dpuuid||""],",")),(k=h.dests)&&k instanceof Array&&(d=k.length))for(c=0;d>c;c++)b=k[c],b=[l("dests"),l(b.id||""),l(b.y||""),l(b.c||"")],this.addMessage(b.join("|"));if((k=h.ibs)&&k instanceof Array&&(d=k.length))for(c=0;d>c;c++)b=k[c],b=[l("ibs"),l(b.id||""),l(b.tag||""),r.encodeAndBuildRequest(b.url||[],","),l(b.ttl||""),"",e],this.addMessage(b.join("|"));if((k=h.dpcalls)&&k instanceof Array&&(d=k.length))for(c=0;d>c;c++)b=k[c],f=b.callback||{},f=[f.obj||"",f.fn||"",f.key||"",f.tag||"",f.url||""],b=[l("dpm"),l(b.id||""),l(b.tag||""),r.encodeAndBuildRequest(b.url||[],","),l(b.ttl||""),r.encodeAndBuildRequest(f,","),e],this.addMessage(b.join("|"));this.jsonProcessed.push(h)},addMessage:function(h){var a=encodeURIComponent,a=a(w?"---destpub-debug---":"---destpub---");this.messages.push(a+h)},sendMessages:function(){var a,h=this;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),this.messagesPosted.push(a),setTimeout(function(){h.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},setIframeDemdexCookie:function(){if(this.dsidc)return"setIframeDemdexCookie disabled";var h=z,a=[],b=encodeURIComponent;return a[0]=b("uuid"),a[1]=b(this.responseUUID),h.addMessage(a.join("|")),p.firstRequestHasFired&&h.requestToProcess(),"Successfully queued"}},H={traits:function(h){return t.isValidPdata(h)&&(m.sids instanceof Array||(m.sids=[]),r.extendArray(m.sids,h)),this},pixels:function(h){return t.isValidPdata(h)&&(m.pdata instanceof Array||(m.pdata=[]),r.extendArray(m.pdata,h)),this},logs:function(h){return t.isValidLogdata(h)&&(m.logdata!==Object(m.logdata)&&(m.logdata={}),r.extendObject(m.logdata,h)),this},customQueryParams:function(h){return t.isEmptyObject(h)||r.extendObject(m,h,p.reservedKeys),this},signals:function(h,a){var b,c=h;if(!t.isEmptyObject(c)){if(a&&"string"==typeof a)for(b in c={},h)h.hasOwnProperty(b)&&(c[a+b]=h[b]);r.extendObject(m,c,p.reservedKeys)}return this},declaredId:function(a){return p.declaredId.setDeclaredId(a,"request"),this},result:function(a){return"function"==typeof a&&(m.callback=a),this},afterResult:function(a){return"function"==typeof a&&(m.postCallbackFn=a),this},useImageRequest:function(){return m.useImageRequest=!0,this},clearData:function(){return m={},this},submit:function(){return B.submitRequest(m),m={},this},getPartner:function(){return f},getContainerNSID:function(){return g},getEventLog:function(){return c},getState:function(){var a={},b={};return r.extendObject(a,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0}),r.extendObject(b,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0}),{pendingRequest:m,otherRequestInfo:a,destinationPublishingInfo:b}},idSync:function(a){if(a!==Object(a)||"string"!=typeof a.dpid||!a.dpid.length)return"Error: config or config.dpid is empty";if("string"!=typeof a.url||!a.url.length)return"Error: config.url is empty";var b=a.url,c=a.minutesToLive,d=encodeURIComponent,f=z,e=p.declaredId,b=b.replace(/^https:/,"").replace(/^http:/,"");if("undefined"==typeof c)c=20160;else if(c=parseInt(c,10),isNaN(c)||0>=c)return"Error: config.minutesToLive needs to be a positive number";return e=r.encodeAndBuildRequest([p.adms.getGlobalVisitorID()||e.uuid||"",a.dpid,a.dpuuid||""],","),a=["ibs",d(a.dpid),"img",d(b),c,"",e],f.addMessage(a.join("|")),p.firstRequestHasFired&&f.requestToProcess(),"Successfully queued"},aamIdSync:function(a){return a===Object(a)&&"string"==typeof a.dpuuid&&a.dpuuid.length?(a.url="//dpm.demdex.net/ibs:dpid="+a.dpid+"&dpuuid="+a.dpuuid,this.idSync(a)):"Error: config or config.dpuuid is empty"},passData:function(a){return t.isEmptyObject(a)?"Error: json is empty or not an object":(B.defaultCallback(a),"json submitted for processing")},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var d,a=p,b=a.modStatsParams,c=a.platformParams;if(!b){b={};for(d in c)c.hasOwnProperty(d)&&!a.nonModStatsParams[d]&&(b[d.replace(/^d_/,"")]=c[d]);a.modStatsParams=b}return b}},B={submitRequest:function(a){return p.registerRequest(B.createQueuedRequest(a)),!0},createQueuedRequest:function(a){var c,b=p,d=a.callback,e="img";if(!t.isEmptyObject(v)){var D,q,n;for(D in v)v.hasOwnProperty(D)&&(q=v[D],null!=q&&""!==q&&D in a&&!(q in a||q in p.reservedKeys)&&(n=a[D],null!=n&&""!==n&&(a[q]=n)))}return t.isValidPdata(a.sids)||(a.sids=[]),t.isValidPdata(a.pdata)||(a.pdata=[]),t.isValidLogdata(a.logdata)||(a.logdata={}),a.logdataArray=r.convertObjectToKeyValuePairs(a.logdata,"=",!0),a.logdataArray.push("_ts="+(new Date).getTime()),"function"!=typeof d&&(d=this.defaultCallback),(b.useJSONP=!a.useImageRequest||"boolean"!=typeof a.useImageRequest)&&(e="script",c=b.callbackPrefix+"_"+f+"_"+g+"_"+(new Date).getTime()),{tag:e,src:B.makeRequestSrc(a,c),internalCallbackName:c,callbackFn:d,postCallbackFn:a.postCallbackFn,useImageRequest:a.useImageRequest,requestData:a}},defaultCallback:function(a,b){var c,d,f,e,g,n,u,m,v;if((c=a.stuff)&&c instanceof Array&&(d=c.length))for(f=0;d>f;f++)(e=c[f])&&e===Object(e)&&(g=e.cn,n=e.cv,u=e.ttl,("undefined"==typeof u||""===u)&&(u=Math.floor(r.getMaxCookieExpiresInMinutes()/60/24)),m=e.dmn||"."+document.domain.replace(/^www\./,""),v=e.type,g&&(n||"number"==typeof n)&&("var"!=v&&(u=parseInt(u,10))&&!isNaN(u)&&r.setCookie(g,n,1440*u,"/",m,!1),G.stuffed[g]=n));c=a.uuid,d=z,f=p.declaredId,e=t.isPopulatedString,e(c)&&(e(d.responseUUID)&&d.responseUUID===c||(d.responseUUID=c,d.setIframeDemdexCookie()),e(f.uuid)||(f.uuid=c),t.isEmptyObject(q)||(d=q.path,
"string"==typeof d&&d.length||(d="/"),f=parseInt(q.days,10),isNaN(f)&&(f=100),r.setCookie(q.name||"aam_did",c,1440*f,d,q.domain||"."+document.domain.replace(/^www\./,""),!0===q.secure))),s||p.abortRequests||z.requestToProcess(a,b)},makeRequestSrc:function(a,b){a.sids=t.removeEmptyArrayValues(a.sids||[]),a.pdata=t.removeEmptyArrayValues(a.pdata||[]);var c=p,d=c.platformParams,e=r.encodeAndBuildRequest(a.sids,","),g=r.encodeAndBuildRequest(a.pdata,","),q=(a.logdataArray||[]).join("&");delete a.logdataArray;var s,n=A.IS_HTTPS?"https://":"http://",u=c.declaredId.getDeclaredIdQueryString();s=[];var m,v,w,x;for(m in a)if(!(m in c.reservedKeys)&&a.hasOwnProperty(m))if(v=a[m],m=encodeURIComponent(m),v instanceof Array)for(w=0,x=v.length;x>w;w++)s.push(m+"="+encodeURIComponent(v[w]));else s.push(m+"="+encodeURIComponent(v));return s=s.length?"&"+s.join("&"):"",n+f+".demdex.net/event?d_nsid="+d.d_nsid+u+(e.length?"&d_sid="+e:"")+(g.length?"&d_px="+g:"")+(q.length?"&d_ld="+encodeURIComponent(q):"")+s+(c.useJSONP?"&d_rtbd="+d.d_rtbd+"&d_jsonv="+d.d_jsonv+"&d_dst="+d.d_dst+"&d_cb="+(b||""):"")},fireRequest:function(a){if("img"==a.tag)this.fireImage(a);else if("script"==a.tag){var c=p.declaredId,c=c.declaredId.request||c.declaredId.init||{};this.fireScript(a,{dpid:c.dpid||"",dpuuid:c.dpuuid||""})}},fireImage:function(a){var f,e,b=p;b.abortRequests||(b.firing=!0,f=new Image(0,0),b.sent.push(a),f.onload=function(){b.firing=!1,b.fired.push(a),b.num_of_img_responses++,b.registerRequest()},e=function(f){d="imgAbortOrErrorHandler received the event of type "+f.type,c.push(d),b.abortRequests=!0,b.firing=!1,b.errored.push(a),b.num_of_img_errors++,b.registerRequest()},f.addEventListener?(f.addEventListener("error",e,!1),f.addEventListener("abort",e,!1)):f.attachEvent&&(f.attachEvent("onerror",e),f.attachEvent("onabort",e)),f.src=a.src)},fireScript:function(a,b){var g,q,e=this,k=p,n=a.src,s=a.postCallbackFn,u="function"==typeof s,m=a.internalCallbackName;k.abortRequests||(k.firing=!0,window[m]=function(e){try{e!==Object(e)&&(e={});var l=a.callbackFn;k.firing=!1,k.fired.push(a),k.num_of_jsonp_responses++,l(e,b),u&&s(e,b)}catch(g){g.message="DIL jsonp callback caught error with message "+g.message,d=g.message,c.push(d),g.filename=g.filename||"dil.js",g.partner=f,DIL.errorModule.handleError(g);try{l({error:g.name+"|"+g.message}),u&&s({error:g.name+"|"+g.message})}catch(n){}}finally{k.requestRemoval({script:q,callbackName:m}),k.registerRequest()}},J?(k.firing=!1,k.requestRemoval({script:"no script created",callbackName:m})):(q=document.createElement("script"),q.addEventListener&&q.addEventListener("error",function(b){k.requestRemoval({script:q,callbackName:m}),d="jsonp script tag error listener received the event of type "+b.type+" with src "+n,e.handleScriptError(d,a)},!1),q.type="text/javascript",q.src=n,g=DIL.variables.scriptNodeList[0],g.parentNode.insertBefore(q,g)),k.sent.push(a),k.declaredId.declaredId.request=null)},handleScriptError:function(a,b){var d=p;c.push(a),d.abortRequests=!0,d.firing=!1,d.errored.push(b),d.num_of_jsonp_errors++,d.registerRequest()}},t={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var d,b=0,c=a.length,f=[],b=0;c>b;b++)d=a[b],"undefined"!=typeof d&&null!=d&&f.push(d);return f},isPopulatedString:function(a){return"string"==typeof a&&a.length}},r={addListener:function(){return document.addEventListener?function(a,b,c){a.addEventListener(b,function(a){"function"==typeof c&&c(a)},!1)}:document.attachEvent?function(a,b,c){a.attachEvent("on"+b,function(a){"function"==typeof c&&c(a)})}:void 0}(),convertObjectToKeyValuePairs:function(a,b,c){var d=[];b=b||"=";var f,e;for(f in a)e=a[f],"undefined"!=typeof e&&null!=e&&d.push(f+b+(c?encodeURIComponent(e):e));return d},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!=typeof b)throw new TypeError;for(var f=Array(d),e=0;d>e;e++)e in c&&(f[e]=b.call(b,c[e],e,c));return f},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=[],f=0;d>f;f++)if(f in c){var g=c[f];b.call(b,g,f,c)&&e.push(g)}return e}return a.filter(b)},getCookie:function(a){a+="=";var c,d,f,b=document.cookie.split(";");for(c=0,d=b.length;d>c;c++){for(f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return decodeURIComponent(f.substring(a.length,f.length))}return null},setCookie:function(a,b,c,d,f,e){var g=new Date;c&&(c*=6e4),document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+new Date(g.getTime()+c).toUTCString():"")+(d?";path="+d:"")+(f?";domain="+f:"")+(e?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var d;if(a===Object(a)&&b===Object(b)){for(d in b)!b.hasOwnProperty(d)||!t.isEmptyObject(c)&&d in c||(a[d]=b[d]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return(new Date(A.COOKIE_MAX_EXPIRATION_DATE).getTime()-(new Date).getTime())/1e3/60}};"error"==f&&0==g&&r.addListener(window,"load",function(){DIL.windowLoaded=!0}),y=function(){N(),s||p.abortRequests||z.attachIframe(),p.readyToRemove=!0,p.requestRemoval()};var N=function(){s||setTimeout(function(){K||p.firstRequestHasFired||p.adms.admsProcessingStarted||p.adms.calledBack||("function"==typeof F?H.afterResult(F).submit():H.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},M=document;"error"!=f&&(DIL.windowLoaded?y():"complete"!=M.readyState&&"loaded"!=M.readyState?r.addListener(window,"load",y):DIL.isAddedPostWindowLoadWasCalled?r.addListener(window,"load",y):(n="number"==typeof n?parseInt(n,10):0,0>n&&(n=0),setTimeout(y,n||DIL.constants.TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT))),p.declaredId.setDeclaredId(I,"init"),this.api=H,this.getStuffedVariable=function(a){var b=G.stuffed[a];return b||"number"==typeof b||(b=r.getCookie(a))||"number"==typeof b||(b=""),b},this.validators=t,this.helpers=r,this.constants=A,this.log=c,L&&(this.pendingRequest=m,this.requestController=p,this.setDestinationPublishingUrl=e,this.destinationPublishing=z,this.requestProcs=B,this.variables=G)},function(){var b,a=document;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",b=function(){a.removeEventListener("DOMContentLoaded",b,!1),a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var b;if(a===Object(a))for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},DIL.extendStaticPropertiesAndMethods({version:"4.7",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50,TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT:500},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoadWasCalled:!1,isAddedPostWindowLoad:function(a){this.isAddedPostWindowLoadWasCalled=!0,this.windowLoaded="function"==typeof a?!!a():"boolean"==typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(b){return new Image(0,0).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(a,b,c){b=b+"$"+c,b in this.dils||(this.dils[b]=a)},getDil:function(a,b){var c;return"string"!=typeof a&&(a=""),b||(b=0),c=a+"$"+b,c in this.dils?this.dils[c]:Error("The DIL instance with partner = "+a+" and containerNSID = "+b+" was not found")},dexGetQSVars:function(a,b,c){return b=this.getDil(b,c),b instanceof this?b.getStuffedVariable(a):""},xd:{postMessage:function(a,b,c){var d=1;b&&(window.postMessage?c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):b&&(c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a))}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),b={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},c=!1;return{activate:function(){c=!0},handleError:function(d){if(!c)return"DIL error module has not been activated";d!==Object(d)&&(d={});var e=d.name?new String(d.name).toLowerCase():"",f=[];return d={name:e,filename:d.filename?d.filename+"":"",partner:d.partner?d.partner+"":"no_partner",site:d.site?d.site+"":document.location.href,message:d.message?d.message+"":""},f.push(e in b?b[e]:b.noerrortypedefined),a.api.pixels(f).logs(d).useImageRequest().submit(),"DIL error report sent"},pixelMap:b}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,b,c){var d="";return b=b||"Error caught in DIL module/submodule: ",a===Object(a)?d=b+(a.message||"err has no message"):(d=b+"err is not a valid object",a={}),a.message=d,c instanceof DIL&&(a.partner=c.api.getPartner()),DIL.errorModule.handleError(a),this.errorMessage=d}}}),DIL.tools.getSearchReferrer=function(a,b){var c=DIL.getDil("error"),d=DIL.tools.decomposeURI(a||document.referrer),e="",f="",g={queryParam:"q"};return(e=c.helpers.filter([b===Object(b)?b:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!d.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:d.hostname,keywords:(c.helpers.extendObject(g,e),f=g.queryPattern?(e=(""+d.search).match(g.queryPattern))?e[1]:"":d.uriParams[g.queryParam],decodeURIComponent(f||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}},DIL.tools.decomposeURI=function(a){var b=DIL.getDil("error"),c=document.createElement("a");return c.href=a||document.referrer,{hash:c.hash,host:c.host.split(":").shift(),hostname:c.hostname,href:c.href,pathname:c.pathname.replace(/^\//,""),protocol:c.protocol,search:c.search,uriParams:function(a,c){return b.helpers.map(c.split("&"),function(b){b=b.split("="),a[b.shift()]=b.shift()}),a}({},c.search.replace(/^(\/|\?)?|\/$/g,""))}},DIL.tools.getMetaTags=function(){var c,d,e,f,g,a={},b=document.getElementsByTagName("meta");for(c=0,e=arguments.length;e>c;c++)if(f=arguments[c],null!==f)for(d=0;d<b.length;d++)if(g=b[d],g.name==f){a[f]=g.content;break}return a},DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,b,c){try{var d=this,e={name:"DIL Site Catalyst Module Error"},f=function(a){return e.message=a,DIL.errorModule.handleError(e),a};if(this.dil=null,!(b instanceof DIL))return f("dilInstance is not a valid instance of DIL");if(this.dil=b,e.partner=b.api.getPartner(),a!==Object(a))return f("siteCatalystReportingSuite is not an object");if("function"!=typeof a.m_i||"function"!=typeof a.loadModule)return f("s.m_i is not a function or s.loadModule is not a function");if(a.m_DIL=function(a){return a=a.m_i("DIL"),a!==Object(a)?f("m is not an object"):(a.trackVars=d.constructTrackVars(c),a.d=0,a._t=function(){var a,b,e,c=","+this.trackVars+",",d=this.s,g=[];e=[];var n={},C=!1;if(d!==Object(d)||!(d.va_t instanceof Array))return f("Error in m._t function: s is not an object or s.va_t is not an array");if(this.d){if(d.lightProfileID?(a=d.lightTrackVars)&&(a=","+a+","+d.vl_mr+","):(d.pe||d.linkType)&&(a=d.linkTrackVars,d.pe&&(b=d.pe.substring(0,1).toUpperCase()+d.pe.substring(1),d[b]&&(a=d[b].trackVars)),a&&(a=","+a+","+d.vl_l+","+d.vl_l2+",")),a){for(b=0,g=a.split(",");b<g.length;b++)0<=c.indexOf(","+g[b]+",")&&e.push(g[b]);e.length&&(c=","+e.join(",")+",")}for(e=0,b=d.va_t.length;b>e;e++)a=d.va_t[e],0<=c.indexOf(","+a+",")&&null!=d[a]&&""!==d[a]&&(n[a]=d[a],C=!0);C&&this.d.api.signals(n,"c_").submit()}},void(a.setup=function(a,c){this.d=b}))},a.loadModule("DIL"),a.DIL!==Object(a.DIL)||"function"!=typeof a.DIL.setup)return f("s.DIL is not an object or s.DIL.setup is not a function");if(a.DIL.setup(),e.message)return e.message}catch(g){return this.handle(g,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c,d,e,f,g,b=[];if(a===Object(a)){if(c=a.names,c instanceof Array&&(e=c.length))for(d=0;e>d;d++)f=c[d],"string"==typeof f&&f.length&&b.push(f);if(a=a.iteratedNames,a instanceof Array&&(e=a.length))for(d=0;e>d;d++)if(c=a[d],c===Object(c)&&(f=c.name,g=parseInt(c.maxIndex,10),"string"==typeof f&&f.length&&!isNaN(g)&&g>=0))for(c=0;g>=c;c++)b.push(f+c);if(b.length)return b.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:75}]})}},DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,b,c){try{this.tv=this.arr=this.dil=null,this.errorMessage="",this.signals={},this.hasSignals=!1;var d={name:"DIL GA Module Error"},e="";b instanceof DIL?(this.dil=b,d.partner=this.dil.api.getPartner()):(e="dilInstance is not a valid instance of DIL",d.message=e,DIL.errorModule.handleError(d)),a instanceof Array&&a.length?this.arr=a:(e="gaArray is not an array or is empty",d.message=e,DIL.errorModule.handleError(d)),this.tv=this.constructTrackVars(c),this.errorMessage=e}catch(f){this.handle(f,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c,d,e,f,b=[];if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){for(e=this.defaultTrackVars,f={},c=0,d=e.length;d>c;c++)f[e[c]]=!0;this.defaultTrackVarsObj=f}else f=this.defaultTrackVarsObj;if(a===Object(a)){if(a=a.names,a instanceof Array&&(d=a.length))for(c=0;d>c;c++)e=a[c],"string"==typeof e&&e.length&&e in f&&b.push(e);if(b.length)return b}return this.defaultTrackVars},constructGAObj:function(a){var b={};a=a instanceof Array?a:this.arr;var c,d,e,f;for(c=0,d=a.length;d>c;c++)e=a[c],e instanceof Array&&e.length&&(e=[],f=a[c],e instanceof Array&&f instanceof Array&&Array.prototype.push.apply(e,f),f=e.shift(),"string"==typeof f&&f.length&&(b[f]instanceof Array||(b[f]=[]),b[f].push(e)));return b},addToSignals:function(a,b){return"string"!=typeof a||""===a||null==b||""===b?!1:(this.signals[a]instanceof Array||(this.signals[a]=[]),this.signals[a].push(b),this.hasSignals=!0)},constructSignals:function(){var d,e,f,g,n,s,a=this.constructGAObj(),b={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c,d){"string"==typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,d,e,f){this.addToSignals("c_itemOrderId",a),this.addToSignals("c_itemSku",b),this.addToSignals("c_itemName",c),this.addToSignals("c_itemCategory",d),this.addToSignals("c_itemPrice",e),this.addToSignals("c_itemQuantity",f)},_addTrans:function(a,b,c,d,e,f,g,n){this.addToSignals("c_transOrderId",a),this.addToSignals("c_transAffiliation",b),this.addToSignals("c_transTotal",c),this.addToSignals("c_transTax",d),this.addToSignals("c_transShipping",e),this.addToSignals("c_transCity",f),this.addToSignals("c_transState",g),this.addToSignals("c_transCountry",n)},_trackSocial:function(a,b,c,d){this.addToSignals("c_socialNetwork",a),this.addToSignals("c_socialAction",b),this.addToSignals("c_socialTarget",c),this.addToSignals("c_socialPagePath",d)}},c=this.tv;for(d=0,e=c.length;e>d;d++)if(f=c[d],a.hasOwnProperty(f)&&b.hasOwnProperty(f)&&(s=a[f],s instanceof Array))for(g=0,n=s.length;n>g;g++)b[f].apply(this,s[g])},submit:function(){try{return""!==this.errorMessage?this.errorMessage:(this.constructSignals(),this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present")}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,b,c){try{this.callback=this.dil=null,this.errorMessage="",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(b)?b:"aam_ga",this.delimiter=this.v(c)?c:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(d){this.handle(d,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var b,c,d,e,f,g;g=!1;var n=1;if(a===Object(a)&&(b=a.stuff)&&b instanceof Array&&(c=b.length))for(a=0;c>a;a++)if((d=b[a])&&d===Object(d)&&(e=d.cn,f=d.cv,e==this.cookieName&&this.v(f))){g=!0;break}if(g){for(b=f.split(this.delimiter),"undefined"==typeof window._gaq&&(window._gaq=[]),d=window._gaq,a=0,c=b.length;c>a&&(g=b[a].split("="),f=g[0],g=g[1],this.v(f)&&this.v(g)&&d.push(["_setCustomVar",n++,f,g,1]),!(n>this.LIMIT));a++);this.errorMessage=n>1?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";return"function"==typeof this.callback?this.callback():void 0},submit:function(){try{var a=this;return""!==this.errorMessage?this.errorMessage:(this.dil.api.afterResult(function(b){a.process(b)}).submit(),"DIL.modules.GA.Stuffer.submit() successful")}catch(b){return this.handle(b,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}},DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,b,c){try{this.dil=null,this.errorMessage="",this.calledBack=!1,this.optionals=c===Object(c)?c:{},c={name:"DIL Peer39 Module Error"};var d=[],e="";this.isSecurePageButNotEnabled(document.location.protocol)&&(e="Module has not been enabled for a secure page",d.push(e),c.message=e,DIL.errorModule.handleError(c)),b instanceof DIL?(this.dil=b,c.partner=this.dil.api.getPartner()):(e="dilInstance is not a valid instance of DIL",d.push(e),c.message=e,DIL.errorModule.handleError(c)),"string"==typeof a&&a.length?this.aid=a:(e="aid is not a string or is empty",d.push(e),c.message=e,DIL.errorModule.handleError(c)),this.errorMessage=d.join("\n")}catch(f){this.handle(f,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"==a&&!0!==this.optionals.enableHTTPS?!0:!1},constructSignals:function(){var a=this,b=this.constructScript(),c=DIL.variables.scriptNodeList[0];return window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"==typeof a.optionals.afterResult&&a.optionals.afterResult()}},c.parentNode.insertBefore(b,c),this.scriptsSent.push(b),"Request sent to Peer39"},processData:function(a){var b,c,d,e,f={},g=!1;if(this.returnedData.push(a),a instanceof Array)for(b=0,c=a.length;c>b;b++)d=a[b].split("="),e=d[0],d=d[1],e&&isFinite(d)&&!isNaN(parseInt(d,10))&&(f[e]instanceof Array||(f[e]=[]),f[e].push(d),g=!0);return{hasSignals:g,signals:f}},constructScript:function(){var a=document.createElement("script"),b=this.optionals,c=b.scriptId,d=b.scriptSrc,b=b.scriptParams;return a.id="string"==typeof c&&c.length?c:"peer39ScriptLoader",a.type="text/javascript","string"==typeof d&&d.length?a.src=d:(a.src=(this.dil.constants.IS_HTTPS?"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"==typeof b&&b.length&&(a.src+="?"+b)),a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};var bgDil=DIL.create({partner:"bostonglobe",uuidCookie:{name:"aam_uuid",days:30}}),_scDilObj=s_gi(s_account);DIL.modules.siteCatalyst.init(_scDilObj,bgDil,{names:["pageName","channel","campaign","products","events","pe","referrer","server","purchaseID","zip","state"],iteratedNames:[{name:"eVar",maxIndex:75},{name:"prop",maxIndex:75},{name:"pev",maxIndex:3},{name:"hier",maxIndex:4},{name:"list",maxIndex:3}]});var uriData=DIL.tools.decomposeURI(document.URL);if(delete uriData.hash,delete uriData.search,delete uriData.href,objIsEmpty(uriData.uriParams)||bgDil.api.signals(uriData.uriParams,"c_"),objIsEmpty(uriData.pathname)&&delete uriData.pathname,delete uriData.uriParams,bgDil.api.signals(DIL.tools.getMetaTags("keywords"),"c_"),bgDil.api.signals(uriData,"c_").submit(),bgDil.helpers.getCookie("s_vi")){var sID=bgDil.helpers.getCookie("s_vi");sID=sID.split("|")[1].split("[")[0],bgDil.api.aamIdSync({dpid:"1291",dpuuid:sID,minutesToLive:20160})}"undefined"!=typeof bgDil&&"undefined"!=typeof s.eVar12&&s.eVar12&&bgDil.api.aamIdSync({dpid:"1292",dpuuid:s.eVar12,minutesToLive:20160}),s.t()}();

(function() {
    function retry(isDone, next) {
        var current_trial = 0, max_retry = 50, interval = 10, is_timeout = false;
        var id = window.setInterval(
            function() {
                if (isDone()) {
                    window.clearInterval(id);
                    next(is_timeout);
                }
                if (current_trial++ > max_retry) {
                    window.clearInterval(id);
                    is_timeout = true;
                    next(is_timeout);
                }
            },
            10
        );
    }

    function isIE10OrLater(user_agent) {
        var ua = user_agent.toLowerCase();
        if (ua.indexOf('msie') === 0 && ua.indexOf('trident') === 0) {
            return false;
        }
        var match = /(?:msie|rv:)\s?([\d\.]+)/.exec(ua);
        if (match && parseInt(match[1], 10) >= 10) {
            return true;
        }
        return false;
    }

    function detectPrivateMode(callback) {
        var is_private;

        if (window.webkitRequestFileSystem) {
            window.webkitRequestFileSystem(
                window.TEMPORARY, 1,
                function() {
                    is_private = false;
                },
                function(e) {
                    console.log(e);
                    is_private = true;
                }
            );
        } else if (window.indexedDB && /Firefox/.test(window.navigator.userAgent)) {
            var db;
            try {
                db = window.indexedDB.open('test');
            } catch(e) {
                is_private = true;
            }

            if (typeof is_private === 'undefined') {
                retry(
                    function isDone() {
                        return db.readyState === 'done' ? true : false;
                    },
                    function next(is_timeout) {
                        if (!is_timeout) {
                            is_private = db.result ? false : true;
                        }
                    }
                );
            }
        } else if (isIE10OrLater(window.navigator.userAgent)) {
            is_private = false;
            try {
                if (!window.indexedDB) {
                    is_private = true;
                }                 
            } catch (e) {
                is_private = true;
            }
        } else if (window.localStorage && /Safari/.test(window.navigator.userAgent)) {
            try {
                window.localStorage.setItem('test', 1);
            } catch(e) {
                is_private = true;
            }

            if (typeof is_private === 'undefined') {
                is_private = false;
                window.localStorage.removeItem('test');
            }
        }

        retry(
            function isDone() {
                return typeof is_private !== 'undefined' ? true : false;
            },
            function next(is_timeout) {
                callback(is_private);
            }
        );
    }

    detectPrivateMode(function(p) {
        if (p) {
            s.linkTrackVars='eVar21';
            s.eVar21='private';
            s.tl(this,'o','Browser Status');
        } // Reduce server calls by only pinging when we detect private browsing
    })
})();


// throttled resize event from jQuery Mobile
(function( $ ) {
	$.event.special.throttledresize = {
		setup: function() {
			$( this ).bind( "resize", handler );
		},
		teardown: function(){
			$( this ).unbind( "resize", handler );
		}
	};
	var throttle = 250,
		handler = function() {
			curr = ( new Date() ).getTime();
			diff = curr - lastCall;

			if ( diff >= throttle ) {

				lastCall = curr;
				$( this ).trigger( "throttledresize" );

			} else {

				if ( heldCall ) {
					clearTimeout( heldCall );
				}

				// Promise a held call will still execute
				heldCall = setTimeout( handler, throttle - diff );
			}
		},
		lastCall = 0,
		heldCall,
		curr,
		diff;
})( jQuery );

/*
 * debouncedresize: special jQuery event that happens once after a window resize
 *
 * latest version and complete README available on Github:
 * https://github.com/louisremi/jquery-smartresize
 *
 * Copyright 2012 @louis_remi
 * Licensed under the MIT license.
 *
 * This saved you an hour of work? 
 * Send me music http://www.amazon.co.uk/wishlist/HNTU0468LQON
 */
(function($) {

var $event = $.event,
	$special,
	resizeTimeout;

$special = $event.special.debouncedresize = {
	setup: function() {
		$( this ).on( "resize", $special.handler );
	},
	teardown: function() {
		$( this ).off( "resize", $special.handler );
	},
	handler: function( event, execAsap ) {
		// Save the context
		var context = this,
			args = arguments,
			dispatch = function() {
				// set correct event type
				event.type = "debouncedresize";
				$event.dispatch.apply( context, args );
			};

		if ( resizeTimeout ) {
			clearTimeout( resizeTimeout );
		}

		execAsap ?
			dispatch() :
			resizeTimeout = setTimeout( dispatch, $special.threshold );
	},
	threshold: 150
};

})(jQuery);

/**
* Mat Marquis' Carousel
* http://matmarquis.com/carousel/
*/
(function($){
	$.fn.carousel = function(config) {
		var defaults = {
			slider: '.slider',
			slide: '.slide',
			prevSlide: '.prev',
			nextSlide: '.next',
			counter: '.counter',
			counterText: 'Slide {current} of {total}',
			secondary: '.secondary',
			speed: 500
		},
		$wrapper = $(this),
		opt = $.extend(defaults, config);

		carousel = {
			roundDown : function(leftmargin) {
				var leftmargin = parseInt(leftmargin, 10);

				return Math.ceil( (leftmargin - (leftmargin % 100 ) ) / 100) * 100;
			},
			transitionSupport : function() {
				var dStyle = document.body.style;

				return dStyle.webkitTransition !== undefined || 
						dStyle.mozTransition !== undefined ||
						dStyle.msTransition !== undefined ||
						dStyle.oTransition !== undefined ||
						dStyle.transition !== undefined;
			},
			currentPage : function($slider, leftmargin) {
				var current = -(leftmargin / 100),
					$slides = $slider.find(".slide"),
					$primaryslides = $slider.not('[id*=secondary]').find(".slide"),
					$pagination = $slider.parent().find('.carousel-tabs'),
					label = opt.counterText;

				$slides.removeClass("sl-active");
				$($slides[current]).addClass("sl-active");
				if($pagination) {

					var $container = $slider.parent(),
						$counterHeading = $container.find(opt.counter);

					if ($counterHeading) {
						var label = opt.counterText;
						label = label.replace("{current}", (current + 1));
						label = label.replace("{total}", $primaryslides.length);
						$counterHeading.text(label);
					}

					$pagination.find('li:nth-child(' + (current + 1 ) + ')')
						.addClass('current')
						.siblings()
							.removeClass('current');
				}
			},
			/* Adjustment to work around browser rounding errors */
			tweak : function($slider) {
				$slider.each(function() {
					var $slider = $(this),
						$container = $slider.parent(),
						$current = $slider.find(".sl-active");
				
					$current.each(function() {
						var $slide = $(this),
							diff = $container.width() - $slide.width(),
							$slides = $slider.find(".slide"),
							iMax = $slides.length;

						if (diff != 0) {
							for (var i = 0; i < iMax; i++) {
								$($slides[i]).css("left", (diff * i) + "px");
							}
						} else {
							$slides.css("left", 0);
						}
					});
				});
			},
			move : function($slider, moveTo) {
				if( !$slider ) {
					return;
				}
				if( carousel.transitionSupport() ) {
					$slider.css('marginLeft', moveTo + "%");
				} else {
					$slider.animate({ marginLeft: moveTo + "%" }, opt.speed);
				}
				carousel.currentPage($slider, moveTo);
				carousel.tweak($slider);
			}
		};
		
		var nextPrev = function($slider, dir, $secondary) {
			var leftmargin = ( $slider.attr('style') ) ? $slider.attr('style').match(/margin\-left:(.*[0-9])/i) && parseInt(RegExp.$1) : 0,
				$primaryslider = $slider.not('[id*="secondary"]'),
				$slide = $primaryslider.find(opt.slide),
				constrain = dir === 'prev' ? leftmargin != 0 : -leftmargin < ($slide.length - 1) * 100,
				$target = $( '[href*="#' + $primaryslider.attr('id') + '"]');

			if (!$slider.is(":animated") && constrain ) {

				if ( dir === 'prev' ) {
					leftmargin = ( leftmargin % 100 != 0 ) ? carousel.roundDown(leftmargin) : leftmargin + 100;
				} else {
					leftmargin = ( ( leftmargin % 100 ) != 0 ) ? carousel.roundDown(leftmargin) - 100 : leftmargin - 100;
				}

				carousel.move($slider, leftmargin);
				carousel.move($secondary, leftmargin);

				$target.removeClass('disabled');

				switch( leftmargin ) {
					case ( -($slide.length - 1) * 100 ):
						$target.filter(opt.nextSlide).addClass('disabled');
						break;
					case 0:
						$target.filter(opt.prevSlide).addClass('disabled');
						break;
				}
			} else {
				var reset = carousel.roundDown(leftmargin);

				carousel.move($slider, reset);
				if( $secondary !== null ) {
					carousel.move($secondary, reset);
				}
			}
		},
		nextPrevSetup = function(e) {
			var $el = $(e.target).closest(opt.prevSlide + ',' + opt.nextSlide),
				link = this.hash,
				dir = ( $el.is(opt.prevSlide) ) ? 'prev' : 'next',
				$slider = $( opt.slider ).filter(link),
				$secondary = ($(opt.slider).filter(link + '-secondary').length) ? $(opt.slider).filter(link + '-secondary') : null;

				if ( $el.is('.disabled') ) { 
					return false;
				}

				nextPrev($slider, dir, $secondary);

			e.preventDefault();	
		};

		$wrapper.parent().find(opt.nextSlide + ',' + opt.prevSlide)
			.bind('click', nextPrevSetup);

		$(opt.prevSlide).addClass('disabled');


		$('.carousel-tabs').find('a').click(function(e) {
			var $el = $(this),
				current = parseInt(this.hash.match(/\-slide(.*[0-9])/i) && RegExp.$1, 10),
				move = (100 * (current - 1)),
				$contain = $el.closest('.slidewrap'),
				$prev = $contain.find(opt.prevSlide),
				$next = $contain.find(opt.nextSlide),
				$target = $contain.find(opt.slider);

			$el.parent()
				.addClass('current')
				.siblings()
					.removeClass('current');

			carousel.move($target, -move);

			if(move == 0) {
				$prev.addClass('disabled');
			} else {
				$prev.removeClass('disabled');
			}

			if($el.parent().is(':last-child')) {
				$next.addClass('disabled');
			} else {
				$next.removeClass('disabled');
			}

			e.preventDefault();
		});

		//swipes trigger move left/right
		$wrapper.parent().bind( "dragSnap", function(e, ui){
			var $slider = $(this).find( opt.slider ),
				dir = ( ui.direction === "left" ) ? 'next' : 'prev';

			nextPrev($slider, dir);
		});

		return this.each(function() {
			var $wrap = $(this),
				secId;

			if(opt.secondary) {
				var $target = $wrap.find(opt.secondary);

				if($target.length > 1) {
					var secId = $wrap.find('.slider').attr('id') + '-secondary',
						$secWrap = $('<div class="secslidewrap" />'),
						$secSlider = $('<div class="secslider" />'),
						$secList = $('<ul class="slider" id="' + secId + '" />');
					$wrap.prepend($secWrap.append($secSlider.append($secList)));

					$target.each(function() {
						$('<li class="slide" />')
							.append($(this))
							.appendTo($secList);
					});
				}
			}

			var $slider = $wrap.find(opt.slider),
				$slide = $wrap.find(opt.slide),
				slidenum = $slide.length,
				speed = opt.speed / 1000;

			$slider.css({
				width: 100 * slidenum + "%"
			});

			$slide.css({
				width: (100 / slidenum) + "%"
			});

			carousel.currentPage($slider, 0);
			
			carousel.tweak( (secId ) ? $slider.not('#' + secId) : $slider);
			$wrapper.show();

		});
	};
})(jQuery);


/**
 * --------------------------------------------------------------------
 * jQuery collapsible plugin
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group 
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * note: modified to exclude jquery animations, title tip the cue text, and also to find parent node's sibling if no sibling
 * --------------------------------------------------------------------
 */
$.fn.collapsible = function(options){
	return $(this).each(function(){
		var o = $.extend({
			splitBtn: false,
			event: 'click', //also accepts hover, hoverintent
			content: null
		},options);

		//define
		var collapsibleHeading = $(this),
		//if no sibling content, try parent's sibling
			collapsibleContent = o.content || ( collapsibleHeading.next().length ? collapsibleHeading.next() : collapsibleHeading.parent().next() ),
			extraAriaText = collapsibleHeading.attr("data-enhanced-aria-label"),
			expandCueText = ' (Content collapsed: click to expand contents) ',
			collapseCueText = ' (Content expanded: click to collapse contents)';		
			
		//modify markup & attributes
		collapsibleHeading
			.addClass('collapsible-heading')
			.append('<span class="collapsible-heading-status"></span>')
			.not('a')
				.wrapInner('<a href="#" class="collapsible-heading-toggle"></a>').end()
			.filter('a')
				.addClass('collapsible-heading-toggle');

		collapsibleContent.addClass('collapsible-content');
		

		//events
		collapsibleHeading
			.bind('collapse', function(){
				
				$(this)
					.addClass('collapsible-heading-collapsed')
					.removeClass('collapsible-heading-expanded')
					.find('.collapsible-heading-toggle')
						.attr('title',expandCueText)
						.find('.collapsible-heading-status')
						//.text( expandCueText );
				collapsibleContent
					.addClass('collapsible-content-collapsed')
					.removeClass('collapsible-expand-complete')
					.attr('aria-hidden',true);
				collapsibleContent.parent().addClass('collapsible-collapsed').removeClass('collapsible-expanded');
			
			
				
				return this;
			})
			.bind('expand', function(){
				var $el = $(this);

				$el
					.removeClass('collapsible-heading-collapsed')
					.addClass('collapsible-heading-expanded')
					.find('.collapsible-heading-toggle')
						.attr('title',collapseCueText)
						.find('.collapsible-heading-status')
						//.text( collapseCueText);
				collapsibleContent
					.removeClass('collapsible-content-collapsed')
					.attr('aria-hidden',false);
				collapsibleContent.parent()
					.addClass('collapsible-expanded')
					.removeClass('collapsible-collapsed')
					.attr("aria-label", "Content expanded");
					
				
				return this;
			})
			.bind('toggleCollapsible',function(event){
				var $el = $(this);
				if( o.splitBtn && $(event.target).is('a') ){
					return;
				}
				if( $el.is('.collapsible-heading-collapsed') ){
					if( $('.collapsible-heading-expanded').length ) {
						$('.collapsible-heading-expanded').trigger('collapse');
						$el.trigger('expand');
					} else {
						$el.trigger('expand');
					}
				}
				else { $el.trigger('collapse');  }
				return this;
			})
			.trigger('collapse');

		collapsibleHeading.bind(globe.e.click,function(){
			$(this).trigger('toggleCollapsible');
			return false;
		});
	});
};




(function($){
	$.fn.stickyScroll = function() {
		if( !$(this).length ) { return; }
			
		var $win = $(window),
			$quicknav = $(this),
			insetTop = $quicknav.offset().top,
			mastHeight = $('#masthead').height(),
			containerTop = insetTop + $quicknav.outerHeight(true) - $quicknav.height(),
			initScroll = (( $(document).scrollTop() == 0 ) ? $('html') : $(document)).scrollTop(),
			stickyScroll = function() {
				if( window.innerWidth < 800 ) { return; }
				
				var scroll = (( $(document).scrollTop() == 0 ) ? $('html') : $(document)).scrollTop();

				//console.log('scroll: '+scroll);
				//console.log('containerTop: '+containerTop);

				if( ( scroll + $quicknav.height() ) < $('#main').height() + mastHeight ) {
					if( scroll > containerTop ) {
						$quicknav
							.removeClass('quicknav-docked')
							.addClass('quicknav-scrolling')
							.stop()
							.animate({"top": ( scroll - mastHeight ) + "px" }, 200 );
					} else {
						$quicknav
							.removeClass('quicknav-scrolling')
							.addClass('quicknav-docked');
					}
				} else {
					$quicknav.css('top', ( $('#main').height() - $quicknav.height() ) + 'px');
				}
			};

		$win.bind('scroll', function() {
				stickyScroll();
			}).bind('throttledresize', function() {
				stickyScroll();
			});
			
		$(document).ready(function() {
			$quicknav.parent().addClass('has-quicknav');
			
				// TODO remove this hack with a real solution for the containerTop math
				if(globe.section === "todays-paper"){
					containerTop += 200;
				}
			
			stickyScroll();	
		});
		
	};
})(jQuery);

/*
 * jQuery special events for delayedEnter, delayedLeave, and delayedHover
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * note: Each event can be used with bind or live event handling as you would use mouseenter,mouseleave, and hover
 * events fire after 200ms timeout
 * for full src, look here: https://gist.github.com/851230
*/
//(function(a){a.map("delayedEnter delayedLeave".split(" "),function(b){a.event.special[b]={enabled:true,setup:function(){var e=this,i=a(e),g=a.fn[b].delay,h,j;function f(l){var k=l.type;l.type=b;a.event.handle.call(e,l);l.type=k}function d(k){if(!a.event.special[b].enabled){return}h=true;clearTimeout(j);j=setTimeout(function(){if(h){f(k)}},g)}function c(k){h=false}i.bind({mouseenter:(b=="delayedEnter"?d:c),mouseleave:(b=="delayedEnter"?c:d)})}};a.fn[b]=function(c){return c?this.bind(b,c):this.trigger(b)};a.fn[b].delay=200;a.attrFn[b]=true});a.fn.delayedHover=function(b,c){return this.delayedEnter(b).delayedLeave(c||b)}})(jQuery);


/*
  * anchor-include pattern for already-functional links that work as a client-side include
  * Copyright 2011, Scott Jehl, scottjehl.com
  * Dual licensed under the MIT
  * Idea from Scott Gonzalez
  * to use, place attributes on an already-functional anchor pointing to content
    * that should either replace, or insert before or after that anchor
    * after the page has loaded
    * Replace:	<a href="..." data-replace="articles/latest/fragment">Latest Articles</a>
    * Before:	<a href="..." data-before="articles/latest/fragment">Latest Articles</a>
    * After:	<a href="..." data-after="articles/latest/fragment">Latest Articles</a>
    * On domready, you can use it like this: 
         $("[data-append],[data-replace],[data-after],[data-before]").ajaxInclude();
*/
(function( $ ){
	$.fn.ajaxInclude = function( e ) {
		return this.each(function() {
			var el			= $( this ),
				target		= el.data( "target" ),
				targetEl	= target && $( target ) || el,
				threshold	= screen.width > parseInt( el.data( "threshold" ) || 0 ),
				methods		= [ "append", "replace", "before", "after" ],
				method,
				url;

			if (threshold) {

				for( var ml = methods.length, i=0; i < ml; i++ ){
					if( el.is( "[data-" + methods[ i ] + "]" ) ){
						method	= methods[ i ];
						url		= el.data( method );
					}
				}

				if( method === "replace" ){
					method += "With";
				}

				if( url && method ){
					$.get( url, function( data ) {
						var responseEl = $(data),
							eTarget = method === "replaceWith" ? responseEl : el;
						
						targetEl[ method ]( responseEl );	
						
						eTarget.trigger( "ajaxInclude", [eTarget, data] );
					});
				}

			}
		});
	};
})( jQuery );

!function($,undefined){$.fn.statusmsg=function(){var msg=$("<div class='bg-status-msg'></div>").append(this);return $("#masthead").before(msg),msg},$(document).delegate(".bg-status-close","click",function(){return $(this).closest(".bg-status-msg").remove(),!1})}(jQuery);

function pluralize(word,qty){qty=qty||0,word=word||"unit";var suffix=0===qty||qty>1?"s":"";return word+suffix}!function(win,undefined){!function($){function get_value(input){return input.is(":checkbox,:radio")?input.is(":checked"):input.val()}globe.support.touch&&$("body").hasClass("touchsupport-cue")&&setTimeout(function(){$("<p><strong>Tip!</strong> Two-finger tap to save articles. <a href='#' class='bg-status-close remove'>Close</a></p>").statusmsg().addClass("touch-cue")},500),$(function(){$(".radio-toggle").on("update",function(){$(".form-pair",this).removeClass("checked").filter(":has(input:checked)").addClass("checked")}).on("click change",function(){$(this).trigger("update")}).on("focusin",function(e){$(e.target).closest(".form-pair").addClass("focus")}).on("focusout",function(e){$(e.target).closest(".form-pair").removeClass("focus")}).trigger("update"),$(".popular-list, .playlists").each(function(){var $oEl=$(this),$subheds=$oEl.find("nav > .hed-cat"),iMax=$subheds.length,$oNav=$('<ul class="nav" role="tablist" tabindex="0"></ul>'),sHide="a11y-only",sNow="now",keyNav=function($el,e){var $tab=$el.parent(),$tabContainer=$tab.parent(),$prevTab=$tab.prev().find("a"),$nextTab=$tab.next().find("a"),$first=$tabContainer.find("li:first a"),$last=$tabContainer.find("li:last a");switch(e.which){case 37:case 38:return $prevTab.length?$prevTab.trigger("click").focus():$last.trigger("click").focus(),!1;case 39:case 40:return $nextTab.length?$nextTab.trigger("click").focus():$first.trigger("click").focus(),!1;default:return!0}},selectTab=function($el){var $oLink=$el,sSlug="#"+$oLink.attr("href").split("#")[1],$oLists=$oEl.find("ol");$oEl.attr({role:"application","aria-activedescendant":$(sSlug)[0].id}),$oEl.find(".nav a").removeClass(sNow).attr({tabindex:-1,"aria-selected":!1}),$oLink.addClass(sNow).attr({tabindex:0,"aria-selected":!0}).focus(),$oLists.addClass(sHide).attr({"aria-hidden":!0}).hide().find("*").attr("tabindex",-1),$(sSlug).removeClass(sHide).attr({"aria-hidden":!1}).show().find("a, button").attr("tabindex",0)};if(iMax>1){for(var i=0;iMax>i;i++){var $oThis=$($subheds[i]);$oNav.append("<li>"+$oThis.html()+"</li>"),$oThis.remove()}$oEl.find("h1").length?$oNav.insertAfter($oEl.find("h1")):$oNav.prependTo($oEl),$oEl.find("ol").each(function(){$(this).attr({"aria-labelledby":"tab-"+$(this)[0].getAttribute("id"),role:"tabpanel"})}),$oEl.attr({role:"application","aria-activedescendant":$oEl.find("ol:first")[0].id}),$oEl.find("ol:first").attr({"aria-hidden":!1}).find("li, a, button").attr("tabindex",-1),$oEl.find("ol:not(:first)").addClass(sHide).attr({"aria-hidden":!0}).find("a, button").attr("tabindex",0),$oEl.find(".nav li:first-child a").addClass(sNow).attr({tabindex:0,"aria-selected":!0}).end().find(".nav li a").each(function(){$(this).attr({id:"tab-"+$(this).attr("href").split("#")[1],role:"tab",title:"most "+$(this).text()+" articles"})}).keydown(function(e){keyNav($(this),e)}).click(function(e){selectTab($(this)),e.preventDefault()})}}),$(".article-nav-series").each(function(){var $oEl=$(this),$subheds=$oEl.find("nav > .hed-part"),iMax=$subheds.length,$oNav=$('<ol class="nav" role="tablist" tabindex="0"></ol>'),sHide="a11y-only",sActive="active",keyNav=function($el,e){var $tab=$el.parent(),$tabContainer=$tab.parent(),$prevTab=$tab.prev().find("a"),$nextTab=$tab.next().find("a"),$first=$tabContainer.find("li:first a"),$last=$tabContainer.find("li:last a");switch(e.which){case 37:case 38:return $prevTab.length?$prevTab.trigger("click").focus():$last.trigger("click").focus(),!1;case 39:case 40:return $nextTab.length?$nextTab.trigger("click").focus():$first.trigger("click").focus(),!1;default:return!0}},selectTab=function($el){var $oLink=$el,sSlug="#"+$oLink.attr("href").split("#")[1],$oLists=$oEl.find("ol");$oEl.attr({role:"application","aria-activedescendant":$(sSlug)[0].id}),$oEl.find(".nav a").removeClass(sActive).attr({tabindex:-1,"aria-selected":!1}),$oLink.addClass(sActive).attr({tabindex:0,"aria-selected":!0}).focus(),$oLists.addClass(sHide).attr({"aria-hidden":!0}).hide().find("*").attr("tabindex",-1),$(sSlug).removeClass(sHide).attr({"aria-hidden":!1}).show().find("a, button").attr("tabindex",0)};if(iMax>1){for(var i=0;iMax>i;i++){var $oThis=$($subheds[i]);$oNav.append("<li>"+$oThis.html()+"</li>"),$oThis.remove()}$oEl.find("h1").length?$oNav.insertAfter($oEl.find("h1")):$oNav.prependTo($oEl),$oEl.find("ol").each(function(){$(this).attr({"aria-labelledby":"tab-"+$(this)[0].getAttribute("id"),role:"tabpanel"})}),$oEl.attr({role:"application","aria-activedescendant":$oEl.find("ol:first")[0].id}),$oEl.find("ol:first").attr({"aria-hidden":!1}).find("li, a, button").attr("tabindex",-1),$oEl.find("ol:not(:first)").addClass(sHide).attr({"aria-hidden":!0}).find("a, button").attr("tabindex",0),$oEl.find(".nav li:first-child a").addClass(sActive).attr({tabindex:0,"aria-selected":!0}).end().find(".nav li a").each(function(){$(this).attr({id:"tab-"+$(this).attr("href").split("#")[1],role:"tab",title:"most "+$(this).text()+" articles"})}).keydown(function(e){keyNav($(this),e)}).click(function(e){selectTab($(this)),e.preventDefault()})}});var curate=function(){$(".inside .content").each(function(){var $oEl=$(this),sHtml='<div class="slide"></div>';if(screen.width<=480)var perSlide=2;else var perSlide=$oEl.attr("data-per-slide")||4;for(;$oEl.children(".feat-thumb").length>0;)$oEl.children(".feat-thumb").slice(0,perSlide).wrapAll(sHtml);$oEl.children(".slide").each(function(){var tmp=0,$slide=$(this);$slide.children(".feat-thumb").each(function(){var suffix=tmp%2==0?"odd":"even";$(this).addClass("feat-"+suffix),tmp++}),$slide.find(".feat-thumb:last-child").addClass("last-feat")})})};curate(),$(".see-all").collapsible(),$("nav.opt").length&&$(".bg-footer").each(function(){var cueText={more:"More",less:"Hide"},sFooter='<p id="bg-tools"><a href="#"><i class="'+cueText.more.toLowerCase()+'">'+cueText.more+"</i> Tools</a></p>";$(this).prepend(sFooter),$("#bg-tools a").collapsible({content:$(".bg-footer nav.opt")}).click(function(){var oCue=$(this).find("i"),sText=oCue.text()==cueText.more?cueText.less:cueText.more;oCue.attr("class",sText.toLowerCase()).text(sText)})});var bg_slides=function(){$("[data-carousel]").not(".slidewrap").each(function(){var $oEl=$(this),type=$oEl.attr("data-carousel"),$oSlides=$oEl.find(".slide"),tmp=Math.random().toString().slice(2,12),sId="carousel-"+tmp,sPrev='<a class="prev" href="#'+sId+'"><i>Previous</i></a>',sNext='<a class="next" href="#'+sId+'"><i>Next</i></a>',sTabHed='<h2 class="carousel-tabs-head">View Slide</h2>',sTabCount="Slide {current} of {total}",sHTMLnav=['<ul class="nav">',"	<li>"+sPrev+"</li>","	<li>"+sNext+"</li>","</ul>"].join("");if($oSlides.length>1)if($oEl.parent().hasClass("mag-preview")&&($(".mag-preview .slide:not(:first-child)").find(".date").prepend(sPrev),$(".mag-preview .slide:not(:last-child)").find(".date").append(sNext)),"slideshow"==type){for(var $pagination=$('<ol class="carousel-tabs" role="tablist" tabindex="0" />'),$controls=$('<div class="slidecontrols" />'),i=1;i<$oSlides.length+1;i++)$pagination.append('<li role="presentation"><a href="#carousel'+tmp+"-slide"+i+'" role="tab">'+i+"</a></li>");$oSlides.each(function(i){var $el=$(this);$el.attr({id:"carousel"+tmp+"-slide"+i,"aria-labelledby":"carousel"+tmp+"-slide"+i})}),$pagination.find("li:first").addClass("current").attr("aria-selected","true"),$controls.append(sHTMLnav,$pagination),$pagination.before(sTabHed),$oEl.addClass("slidewrap slideshow").attr("tabindex",0),$oEl.find(".secondary").length?$oEl.wrapInner('<div id="'+sId+'" class="slider"></div>').prepend($controls):$oEl.wrapInner('<div id="'+sId+'" class="slider"></div>').append($controls)}else $oEl.addClass("slidewrap").attr("tabindex",0).wrapInner('<div id="'+sId+'" class="slider"></div>').before(sHTMLnav),$oEl.parent().hasClass("frontpage-preview")&&$oEl.parent().parent().find(".header").prepend(sHTMLnav);else $oEl.removeAttr("data-carousel").addClass("slidewrap");$(this).carousel({slide:".slide",slider:".slider",nextSlide:".next",prevSlide:".prev",secondary:".secondary",counter:".carousel-tabs-head",counterText:sTabCount,speed:500}),$(this).find(".carousel-tabs-head").collapsible()})};bg_slides(),$("[data-carousel-defer]").on("ajaxInclude",function(){$(this).attr("data-carousel",$(this).attr("data-carousel-defer")),bg_slides()}),$(".type-home .related-gallery, .type-internal .related-gallery").each(function(){var discussLinks=$(this).parent().find(".story-discuss");discussLinks.length&&(discussLinks.append($("<li>").append($(this).find("a"))),$(this).remove())}),$(".quicknav").stickyScroll(),$("[data-linked-radios]").on("change",function(e){var linkedInput=0===e.target.id.indexOf("quicknav-")?e.target.id.substring(9,e.target.id.length):"quicknav-"+e.target.id,current=$(this).attr("data-linked-radios");$("#"+linkedInput).trigger("click"),$("[data-linked-radios='"+current+"']").trigger("update")}).trigger("update"),window.screen.width>480&&"my-saved"!==globe.section&&$.ajaxSetup({dataFilter:function(data,type){return"undefined"!=typeof data?data.replace(/(<img src=")([^"]+.r.(jpe?g|gif|png))(" [^>]*data-fullsrc="([^"]+)"[^>]*>)/gi,"$1$5$4"):void 0}}),window.screen.width>480&&(globe.support.touch||($("form.picker").each(function(){for(var $form=$(this),sLabel=$form.find("label").html(),$select=$form.find("select"),sSlug=$select.attr("id"),$options=$select.find("option"),iMax=$options.length,sTemplate=['<nav class="picker '+sSlug+'">','	<h1><a href="#'+sSlug+'" class="top">'+sLabel+"</a></h1>",'	<div id="town-picker">',"	<ol></ol>","	</div>","</nav>"].join(""),$picker=$(sTemplate),$list=$picker.find("ol"),i=0;iMax>i;i++){var opt=$($options[i]),val=opt.attr("value"),sel=opt.attr("selected")?' class="now"':"",txt=opt.html();$list.append("<li><a"+sel+' href="#'+val+'">'+txt+"</a></li>")}$form.replaceWith($picker)}),$(".picker a.top").on("click",function(){$(this).parents(".picker").toggleClass("picker-on")}))),globe.helpers.calendar={onlySUNDAYS:function(date){var day=date.getDay();return[0==day,""]}}}),$(".login-form").length&&$("form.login-form").on("submit",function(e){form_valid=!0,$(this).find(".form-required").each(function(){var fields_valid,fields_changed,fieldset=$(this);fieldset.find(".regi-error");fieldset.find("input, select").each(function(){var input=$(this);fields_valid=fields_valid||(input.is(":checkbox, :radio")?input.prop("checked"):""!==$.trim(input.val())),fields_changed=fields_changed||input.data("CURRENT")!==get_value(input),input.data("CURRENT",get_value(input))}),(fields_changed||!fields_valid)&&fieldset.toggleClass("regi-error",!fields_valid),form_valid=form_valid&&fields_valid}),form_valid||($(".js-gen-error").length?null:$(".login-form .errorlist").remove(),$(".js-gen-error").length||$("form.login-form").before('<div class="errorlist js-gen-error">One or more required fields is missing.	</div>'),e.preventDefault())});var currentTime=(new Date).getTime(),offset=(new Date).getTimezoneOffset();if($("[data-pubtime]").each(function(){var pubTime=$(this).attr("data-pubtime"),year=parseInt(pubTime.slice(0,4)),month=parseInt(pubTime.slice(4,6))-1,day=parseInt(pubTime.slice(6,8)),hour=parseInt(pubTime.slice(8,10)),minute=parseInt(pubTime.slice(10,12)),seconds=parseInt(pubTime.slice(12,14)),pubDate=new Date(new Date(year,month,day,hour,minute,seconds)-1e3*offset*60),pubTime=pubDate.getTime(),diff=parseInt((currentTime-pubTime)/1e3/60);if(diff>0)if(1>diff)$(this).html("Less than 1 minute ago");else if(2>diff)$(this).html("1 minute ago");else if(60>diff)$(this).html(diff+" minutes ago");else if(180>diff){var meridian=" am",hours=pubDate.getHours(),minutes=pubDate.getMinutes();hours>11&&(meridian=" pm",hours>12&&(hours-=12)),10>minutes&&(minutes="0"+minutes),$(this).html(hours+":"+minutes+meridian)}}),$("#sponcon").length){var s=s_gi("nytbostonglobecom,nytbostonglobesponsored");s.linkTrackVars="channel,prop50,prop32,prop38,prop1,eVar15",s.linkTrackEvents="event31",s.events="event31",s.tl(this,"o","BG Sponsored Well - Impression")}if($(".rockland-triggered").length){var s=s_gi("nytbostonglobecom,nytbostonglobesponsored");s.linkTrackVars="channel,prop50,prop32,prop6,prop1,eVar15",s.linkTrackEvents="event33",s.prop50="RFT Homepage",s.prop32="Rockland Trust",s.events="event33",s.tl(this,"o","BG Sponsored RFT - Impression")}}(jQuery),function($){var config={url:"nytbostonglobecom",type:"o"};$(document).delegate("[data-omniture]","click",function(){var link_name=$(this).data("omniture");s_gi(config.url),s.tl(this,config.type,link_name)}),globe.cookie.get("pathAuth")||$(".server-saveable").hide(),$(document).delegate("[data-auth-analytics]","click",function(){var trackParams=$(this).data("auth-analytics");s=$.extend({},s,trackParams),s.tl(this,config.type,trackParams.linkName)})}(jQuery)}(this),globe.util={url:{base:window.location.href.split("#")[0],basePath:window.location.pathname,replaceHash:function(hash){var loc=window.location,scrollV=document.body.scrollTop,scrollH=document.body.scrollLeft,base=globe.util.url.base,historySupported=window.history&&window.history.replaceState;historySupported?(hash=hash||"",window.history.state?history.replaceState({},"",window.location.href.replace(location.hash,"")+hash):history.replaceState({},"",base+hash)):(hash=hash||"#",loc.replace(base+hash),document.body.scrollTop=scrollV,document.body.scrollLeft=scrollH)}}};

"undefined"==typeof globe&&(globe={}),function(win,$,undefined){"use strict";var module={},textSize={};module.originalText=$(".bg-header__smartbar--text").text(),module.shortenSmartbarWord=function(){var $article=$(".type-article"),$breaking=($(".type-home"),$(".type-internal:not(.type-article)"),$(".bg-header__smartbar--breaking")),$message=$(".bg-header__smartbar--message"),$smartbarContent=$breaking.length?$breaking:$message.length?$message:$("non-existent"),$textSpan=$(".bg-header__smartbar--text"),$textSpanBold=$(".bg-header__smartbar--text-bold");if($textSpan.text(module.originalText),$(".logged-in").length&&$smartbarContent.length&&"nowrap"!==$textSpan.css("white-space")){if($smartbarContent.outerHeight()>38){var percent=12/$textSpan.height()*2,textLength=$textSpan.text().length-10,textLengthAfterCut=Math.floor(textLength*percent);$textSpan.html(module.originalText.substring(0,textLengthAfterCut)+"...")}}else if($article.length&&$message.length){var boldWidth=$textSpanBold.length?$textSpanBold.width()+10:0,textWidth=$textSpan.width(),parentWidth=$message.width();if(boldWidth+textWidth>parentWidth){var difference=boldWidth+textWidth-parentWidth,textChars=$textSpan.text().length,percentOfTextSpan=1-difference/textWidth,textCharsAfterCut=Math.floor(textChars*percentOfTextSpan)-2;$textSpan.text(module.originalText.substring(0,textCharsAfterCut)+"...")}}$(".bg-header__smartbar").addClass("bg-header__smartbar--show")},module.addVeil=function(){var markup,$breaking=($(".bg-header"),$(".bg-header__smartbar--breaking")),text=($(".Top.tools"),$(".bg-header__smartbar--text").text()),link=$(".bg-header__smartbar--breaking").attr("href"),animations="webkitAnimationEnd oanimationend msAnimationEnd animationend";markup=['<div class="bg-header__smartbar--veil bg-header__smartbar--veil-show">','<a href="'+link+'" class="bg-header__smartbar--breaking">'+text+'</a><div class="bg-header__close-veil js-close-veil"></div>',"</div>"].join(""),$breaking.length&&$(markup).insertAfter(".bg-header");$(".bg-header__smartbar--veil-show");$(".js-close-veil").on("click",function(e){$(".bg-header__smartbar--veil").hasClass("bg-header__smartbar--veil-sticky")||$(".sticky-tools .bg-header__smartbar--veil").length?$(".bg-header__smartbar--veil").removeClass("bg-header__smartbar--veil-show").removeClass("bg-header__smartbar--veil-sticky").addClass("bg-header__smartbar--veil-sticky-hide"):$(".bg-header__smartbar--veil").removeClass("bg-header__smartbar--veil-show").addClass("bg-header__smartbar--veil-hide")}),$(".bg-header__smartbar--veil-show").on(animations,function(){module.veilTop=$(this).offset().top-3}),$(document).on("scroll",function(){var $veil=$(".bg-header__smartbar--veil");$(".type-article").length||$(".sticky-tools").length?!$(".sticky-tools .bg-header__smartbar--veil").length&&!$(".bg-header__smartbar--veil-sticky-hide").length&&$(document).scrollTop()>=module.veilTop&&!$veil.hasClass("bg-header__smartbar--veil-hide")?($veil.addClass("bg-header__smartbar--veil-show"),$(".sticky-tools").append($veil)):$(".sticky-tools .bg-header__smartbar--veil").length&&$(document).scrollTop()<module.veilTop&&$veil.insertAfter(".bg-header").removeClass("bg-header__smartbar--veil-show").addClass("bg-header__smartbar--veil-shadow"):!$(".type-article").length&&$(document).scrollTop()>=module.veilTop&&!$veil.hasClass("bg-header__smartbar--veil-sticky-hide")&&!$veil.hasClass("bg-header__smartbar--veil-hide")?$veil.addClass("bg-header__smartbar--veil-sticky"):$(document).scrollTop()<module.veilTop&&$veil.removeClass("bg-header__smartbar--veil-sticky")})},textSize.sTextCookie="bg__textSize",textSize.textCookie=globe.cookie.get(textSize.sTextCookie),textSize.$oTextSizeLinks=$(".bg-header__settings-text-size"),textSize.aSizeClasses=["text-norm","text-med","text-lg"],textSize.updateSize=function(sClass,sElement){var $oHtml=$("html"),sActive="now";textSize.sSizeClasses=textSize.aSizeClasses.join(" "),$oHtml.removeClass(textSize.sSizeClasses),textSize.$oTextSizeLinks.removeClass(sActive),$(textSize.$oTextSizeLinks).filter("."+sClass).addClass(sActive),globe.cookie.set(textSize.sTextCookie,sClass),$oHtml.addClass("text-"+sClass),$(".mini-menu").removeClass("mini-menu-hover")},module.eventHandlers=function(){$(".bg-header__navmore-button").on("click touchend",function(e){e.stopPropagation(),e.preventDefault(),$(e.target).parent().hasClass("bg-header__navmore--active")?($(e.target).parent().removeClass("bg-header__navmore--active"),$(".bg-header__nav").removeClass("bg-header__nav--more-opened")):($(e.target).parent().addClass("bg-header__navmore--active"),$(".bg-header__nav").addClass("bg-header__nav--more-opened"))}),$("body").on("click",function(e){$(".bg-header__nav li").removeClass("bg-header__navmore--active"),$(".bg-header__nav").removeClass("bg-header__nav--more-opened");var $this=$(e.target),$settingsPopup=$this.siblings(".bg-header__settings-pop-up"),offset=$this.parent().position(),height=$this.outerHeight();$this.hasClass("js-open-settings")&&!$settingsPopup.hasClass("bg-header__settings-pop-up--show")?($settingsPopup.css({top:offset.top+height+21+"px"}),$settingsPopup.removeClass("bg-header__settings-pop-up--hide").addClass("bg-header__settings-pop-up--show")):!$this.hasClass(".bg-header__settings-text-size")&&$(".bg-header__settings-pop-up").hasClass("bg-header__settings-pop-up--show")&&$(".bg-header__settings-pop-up").removeClass("bg-header__settings-pop-up--show").addClass("bg-header__settings-pop-up--hide")}),$(".bg-header__smartbar--scoreboard-next").on("click",function(){var $oldActive=$(".bg-header__smartbar--scoreboard-game--active"),$newActive=$oldActive.next(),$scoreboard=$(".bg-header__smartbar--scoreboard");$newActive.length||($newActive=$oldActive.siblings().first()),$(".type-article").length?($oldActive.removeClass("bg-header__smartbar--scoreboard-game--active").addClass("bg-header__smartbar--scoreboard-game--hide"),$newActive.removeClass("bg-header__smartbar--scoreboard-game--hide").addClass("bg-header__smartbar--scoreboard-game--active")):$scoreboard.animate({width:$newActive.outerWidth()+"px"},250,function(){$oldActive.removeClass("bg-header__smartbar--scoreboard-game--active").addClass("bg-header__smartbar--scoreboard-game--hide"),$newActive.removeClass("bg-header__smartbar--scoreboard-game--hide").addClass("bg-header__smartbar--scoreboard-game--active")})}),$(".js-open-menu").length&&$(".js-open-menu").on("click",function(event){event.preventDefault();var $takeover=$(".bg-header__takeover"),$fullScreen=$(".bg-header__takeover-full-screen"),$popup=$(".bg-header__pop-up"),animations="webkitAnimationEnd oanimationend msAnimationEnd animationend";$popup.hasClass("bg-header__pop-up--show")&&$popup.removeClass("bg-header__pop-up--show").addClass("bg-header__pop-up--hide"),$fullScreen.addClass("bg-header__takeover-full-screen--show"),$takeover.removeClass("bg-header__takeover--close").addClass("bg-header__takeover--open"),$(".bg-header__menu-wrapper").removeClass("bg-header__menu-wrapper--hidden").addClass("bg-header__menu-wrapper--visible"),$takeover.on(animations,function(e){$("body, html").addClass("takeover-overflow-hide"),$(this).off(animations)})}),$(".js-close-menu").length&&$(".js-close-menu").on("click",function(event){var $takeover=$(".bg-header__takeover"),$fullScreen=$(".bg-header__takeover-full-screen"),$popup=$(".bg-header__pop-up"),animations="webkitAnimationEnd oanimationend msAnimationEnd animationend";$popup.hasClass("bg-header__pop-up--show")&&$popup.removeClass("bg-header__pop-up--show").addClass("bg-header__pop-up--hide"),$takeover.removeClass("bg-header__takeover--open").addClass("bg-header__takeover--close"),$(".bg-header__menu-wrapper").removeClass("bg-header__menu-wrapper--visible").addClass("bg-header__menu-wrapper--hidden"),$("body, html").removeClass("takeover-overflow-hide"),$takeover.on(animations,function(e){$fullScreen.removeClass("bg-header__takeover-full-screen--show"),$(this).off(animations)})}),$(".js-open-search").length&&$(".js-open-search").on("click",function(){var s;if($(".bg-search-takeover").length&&$(".bg-search-takeover").hasClass("bg-search-takeover--closed"))$(this).addClass("bg-header__search-tool--border"),$(".bg-search-takeover").removeClass("bg-search-takeover--closed").addClass("bg-search-takeover--open"),$("#main").css({position:"relative"}),$(".bg-col-c").css({overflow:"hidden"}),s=s_gi("nytbostonglobecom"),s.linkTrackVars="channel,prop1,prop6,eVar15",s.linkTrackEvents="none",s.tl(this,"o","BG Header - Search Open"),$(".bg-search-takeover__input").focus();else if($(".bg-search-takeover").length&&$(".bg-search-takeover").hasClass("bg-search-takeover--open"))$(this).removeClass("bg-header__search-tool--border"),$(".bg-search-takeover").removeClass("bg-search-takeover--open").addClass("bg-search-takeover--closed"),$("#main").css({position:"static"}),$(".bg-col-c").css({overflow:"visible"});else{var html=['<form action="/queryResult/search" class="bg-search-takeover bg-search-takeover--open" method="get" role="search">','<div class="search-inputs">','<div class="bg-search-takeover__close js-close-search"></div>','<input type="text" class="bg-search-takeover__input" id="q" placeholder="Search BostonGlobe.com" role="search" name="q">','<button type="submit" class="bg-search-takeover__button"></button>',"</div>","</form>"].join("");$(this).addClass("bg-header__search-tool--border"),$("#main").css({position:"relative"}).prepend(html),$(".bg-col-c").css({overflow:"hidden"}),$(".bg-search-takeover__input").focus(),$(".bg-col-c").css({overflow:"hidden"}),$(".js-close-search").on("click",function(){$(".bg-search-takeover").removeClass("bg-search-takeover--open").addClass("bg-search-takeover--closed"),$(".bg-header__search-tool").removeClass("bg-header__search-tool--border"),$(".bg-col-c").css({overflow:"visible"})}),$(".bg-search-takeover").on("submit",function(){s=s_gi("nytbostonglobecom"),s.linkTrackVars="channel,prop1,prop6,prop22,eVar11,eVar15",s.linkTrackEvents="event35",s.prop22=s.eVar11=$(".bg-search-takeover__input").val(),s.events="event35",s.tl(this,"o","BG Header - Search Submit")}),s=s_gi("nytbostonglobecom"),s.linkTrackVars="channel,prop1,prop6,eVar15",s.linkTrackEvents="none",s.tl(this,"o","BG Header - Search Open")}}),$(".bg-header__search").length&&$(".bg-header__search").on("submit",function(){var s=s_gi("nytbostonglobecom");s.linkTrackVars="channel,prop1,prop6,prop22,eVar11,eVar15",s.linkTrackEvents="event35",s.prop22=s.eVar11=$(".bg-header__input").val(),s.events="event35",s.tl(this,"o","BG Menu - Search Submit")}),$(".js-open-pop-up").length&&$(".js-open-pop-up").on("click",function(){var $this=$(this),$popup=$this.parent().parent().find(".bg-header__pop-up"),offset=($this.find(".bg-header__caret-wrapper"),$this.parent().position()),subscribeWidth=$this.outerWidth(),loginWidth=$this.siblings(".bg-header__log-in").outerWidth(),height=$this.outerHeight(),caretSpacer=20;$popup.css({top:offset.top+height+caretSpacer+"px"}),$(".bg-header__caret-wrapper").css({right:loginWidth+subscribeWidth/2+10+"px",top:"-22px"}),$popup.removeClass("bg-header__pop-up--hide").addClass("bg-header__pop-up--show")}),$(".js-close-pop-up").length&&$(".js-close-pop-up").on("click",function(){var $this=$(this),$popup=$this.closest(".bg-header__pop-up");$popup.removeClass("bg-header__pop-up--show").addClass("bg-header__pop-up--hide")}),$(window).on("debouncedresize",function(){if(module.shortenSmartbarWord(),$(".bg-header__smartbar--scoreboard-game").length){var $scoreboard=$(".bg-header__smartbar--scoreboard"),$activeGame=$(".bg-header__smartbar--scoreboard-game--active");$scoreboard.animate({width:$activeGame.outerWidth()+"px"},250)}})},textSize.eventHandlers=function(){$(".norm").on("click",function(){textSize.updateSize("norm",$(this));var s=s_gi("nytbostonglobecom");return s.linkTrackVars="eVar28,events",s.linkTrackEvents="event16",s.eVar28="Text Size - Normal",s.events="event16",s.tl(this,"o","Text Size - Normal"),!1}),$(".med").on("click",function(){textSize.updateSize("med",$(this));var s=s_gi("nytbostonglobecom");return s.linkTrackVars="eVar28,events",s.linkTrackEvents="event16",s.eVar28="Text Size - Bigger",s.events="event16",s.tl(this,"o","Text Size - Bigger"),!1}),$(".lg").on("click",function(){textSize.updateSize("lg",$(this));var s=s_gi("nytbostonglobecom");return s.linkTrackVars="eVar28,events",s.linkTrackEvents="event16",s.eVar28="Text Size - Biggest",s.events="event16",s.tl(this,"o","Text Size - Biggest"),!1})},module.init=function(){if(module.eventHandlers(),module.shortenSmartbarWord(),module.addVeil(),$(".bg-header__smartbar--breaking").length||$(".bg-header__smartbar--message").length,$(".bg-header__smartbar--scoreboard-game").length<=1)$(".bg-header__smartbar--scoreboard-game").addClass("bg-header__smartbar--scoreboard-game--only");else if($(".type-article").length||"none"!==$(".bg-header__smartbar").css("float"))$(".bg-header__smartbar--scoreboard-game").first().addClass("bg-header__smartbar--scoreboard-game--active");else{var $scoreboard=$(".bg-header__smartbar--scoreboard"),$firstGame=$(".bg-header__smartbar--scoreboard-game").first(),firstGameWidth=$(".bg-header__smartbar--scoreboard-game").first().outerWidth();$scoreboard.animate({width:firstGameWidth+"px"},250,function(){$firstGame.addClass("bg-header__smartbar--scoreboard-game--active")})}},textSize.init=function(){textSize.eventHandlers(),textSize.textCookie?textSize.updateSize(textSize.textCookie):$(".bg-header__settings-text-sizes .norm").addClass("now")},$(document).ready(function(){$(".bg-header").length&&module.init(),"object"==typeof globe&&"object"==typeof globe.cookie&&$(".bg-header__gear").length&&$(".bg-header__settings-pop-up").length&&textSize.init()})}(window,jQuery);

(function($){
	var $body = $("body");
	var $masthead = $("#masthead");
	var $contain = $("#contain");
	var $sectionBar = $("#masthead .section");
	var $mastheadSpacer = $(".masthead-spacer");

	var resizeSpacer = function(d) {
		var sb = 0;
		if ($sectionBar.css("position")==="absolute") {
			sb = $sectionBar.height();
		}
		var topMargin = 0;
		if ($masthead.css("position")==="fixed") {
			topMargin = parseInt($contain.css("margin-top"));
		}
		$mastheadSpacer.height($masthead.height()+sb-topMargin);
	};

	var stuck = false;
	var checkStuck = function(d) {
		var newStuck;
		if (stuck) {
			newStuck = ($mastheadSpacer.offset().top < $(window).scrollTop());
		} else {
			newStuck = ($masthead.offset().top < $(window).scrollTop());
		}
		if (newStuck != stuck) {
			stuck = newStuck;
			$body.toggleClass("masthead-stuck",stuck);
			if (stuck) {
				$masthead
					.css("top",$mastheadSpacer.offset().top - $(window).scrollTop())
					.animate({top:0},200);
			}
		}
	};

	if (($masthead.length>0) && ($mastheadSpacer.length>0)) {
		$(window).resize(resizeSpacer);
		resizeSpacer();
		if (!$body.hasClass("type-article") && !$body.hasClass("big-picture")) {
			$(window).scroll(checkStuck);
			checkStuck();
		}
	}

})( jQuery );


/*! Picturefill - Responsive Images that work today. (and mimic the proposed Picture element with divs). Author: Scott Jehl, Filament Group, 2012 | License: MIT/GPLv2 */

(function( w ){
	
	// Enable strict mode
	"use strict";

	w.picturefill = function() {
		var ps = w.document.getElementsByTagName( "div" );
		
		// Loop the pictures
		for( var i = 0, il = ps.length; i < il; i++ ){
			if( ps[ i ].getAttribute( "data-picture" ) !== null ){

				var sources = ps[ i ].getElementsByTagName( "div" ),
					matches = [];
			
				// See if which sources match
				for( var j = 0, jl = sources.length; j < jl; j++ ){
					var media = sources[ j ].getAttribute( "data-media" );
					// if there's no media specified, OR w.matchMedia is supported 
					if( !media || ( w.matchMedia && w.matchMedia( media ).matches ) ){
						matches.push( sources[ j ] );
					}
				}

			// Find any existing img element in the picture element
			var picImg = ps[ i ].getElementsByTagName( "img" )[ 0 ];

			if( matches.length ){			
				if( !picImg ){
					picImg = w.document.createElement( "img" );
					picImg.alt = ps[ i ].getAttribute( "data-alt" );
					ps[ i ].appendChild( picImg );
				}
				
				picImg.src =  matches.pop().getAttribute( "data-src" );
			}
			else if( picImg ){
				ps[ i ].removeChild( picImg );
			}
		}
		}
	};
	
	// Run on resize and domready (w.load as a fallback)
	if( w.addEventListener ){
		w.addEventListener( "resize", w.picturefill, false );
		w.addEventListener( "DOMContentLoaded", function(){
			w.picturefill();
			// Run once only
			w.removeEventListener( "load", w.picturefill, false );
		}, false );
		w.addEventListener( "load", w.picturefill, false );
	}
	else if( w.attachEvent ){
		w.attachEvent( "onload", w.picturefill );
	}
	
}( this ));

function getQueryStringValue(key){for(var queryStringArray=window.location.search.substr(1).split("&"),i=0;i<queryStringArray.length;i++){var keyValueArray=queryStringArray[i].split("=");if(keyValueArray[0]===key)return keyValueArray[1]}return!1}if(function($,window){"$:nomunge";function is_string(arg){return"string"==typeof arg}function curry(func){var args=aps.call(arguments,1);return function(){return func.apply(this,args.concat(aps.call(arguments)))}}function get_fragment(url){return url.replace(/^[^#]*#?(.*)$/,"$1")}function get_querystring(url){return url.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function jq_param_sub(is_fragment,get_func,url,params,merge_mode){var result,qs,matches,url_params,hash;return params!==undefined?(matches=url.match(is_fragment?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),hash=matches[3]||"",2===merge_mode&&is_string(params)?qs=params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):(url_params=jq_deparam(matches[2]),params=is_string(params)?jq_deparam[is_fragment?str_fragment:str_querystring](params):params,qs=2===merge_mode?params:1===merge_mode?$.extend({},params,url_params):$.extend({},url_params,params),qs=jq_param(qs),is_fragment&&(qs=qs.replace(re_no_escape,decode))),result=matches[1]+(is_fragment?"#":qs||!matches[1]?"?":"")+qs+hash):result=get_func(url!==undefined?url:window[str_location][str_href]),result}function jq_deparam_sub(is_fragment,url_or_params,coerce){return url_or_params===undefined||"boolean"==typeof url_or_params?(coerce=url_or_params,url_or_params=jq_param[is_fragment?str_fragment:str_querystring]()):url_or_params=is_string(url_or_params)?url_or_params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):url_or_params,jq_deparam(url_or_params,coerce)}function jq_fn_sub(mode,force_attr,params,merge_mode){return is_string(params)||"object"==typeof params||(merge_mode=params,params=force_attr,force_attr=undefined),this.each(function(){var that=$(this),attr=force_attr||jq_elemUrlAttr()[(this.nodeName||"").toLowerCase()]||"",url=attr&&that.attr(attr)||"";that.attr(attr,jq_param[mode](url,params,merge_mode))})}var undefined,jq_param_fragment,jq_deparam,jq_deparam_fragment,jq_bbq_pushState,jq_bbq_getState,jq_elemUrlAttr,re_no_escape,aps=Array.prototype.slice,decode=decodeURIComponent,jq_param=$.param,jq_bbq=$.bbq=$.bbq||{},jq_event_special=$.event.special,str_hashchange="hashchange",str_querystring="querystring",str_fragment="fragment",str_elemUrlAttr="elemUrlAttr",str_location="location",str_href="href",str_src="src",re_trim_querystring=/^.*\?|#.*$/g,re_trim_fragment=/^.*\#/,elemUrlAttr_cache={};jq_param[str_querystring]=curry(jq_param_sub,0,get_querystring),jq_param[str_fragment]=jq_param_fragment=curry(jq_param_sub,1,get_fragment),jq_param_fragment.noEscape=function(chars){chars=chars||"";var arr=$.map(chars.split(""),encodeURIComponent);re_no_escape=new RegExp(arr.join("|"),"g")},jq_param_fragment.noEscape(",/"),$.deparam=jq_deparam=function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};return $.each(params.replace(/\+/g," ").split("&"),function(j,v){var val,param=v.split("="),key=decode(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys=keys.shift().split("[").concat(keys),keys_last=keys.length-1):keys_last=0,2===param.length)if(val=decode(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?undefined:coerce_types[val]!==undefined?coerce_types[val]:val),keys_last)for(;keys_last>=i;i++)key=""===keys[i]?cur.length:keys[i],cur=cur[key]=keys_last>i?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):obj[key]!==undefined?obj[key]=[obj[key],val]:obj[key]=val;else key&&(obj[key]=coerce?undefined:"")}),obj},jq_deparam[str_querystring]=curry(jq_deparam_sub,0),jq_deparam[str_fragment]=jq_deparam_fragment=curry(jq_deparam_sub,1),$[str_elemUrlAttr]||($[str_elemUrlAttr]=function(obj){return $.extend(elemUrlAttr_cache,obj)})({a:str_href,base:str_href,iframe:str_src,img:str_src,input:str_src,form:"action",link:str_href,script:str_src}),jq_elemUrlAttr=$[str_elemUrlAttr],$.fn[str_querystring]=curry(jq_fn_sub,str_querystring),$.fn[str_fragment]=curry(jq_fn_sub,str_fragment),jq_bbq.pushState=jq_bbq_pushState=function(params,merge_mode){is_string(params)&&/^#/.test(params)&&merge_mode===undefined&&(merge_mode=2);var has_args=params!==undefined,url=jq_param_fragment(window[str_location][str_href],has_args?params:{},has_args?merge_mode:2);window[str_location][str_href]=url+(/#/.test(url)?"":"#")},jq_bbq.getState=jq_bbq_getState=function(key,coerce){return key===undefined||"boolean"==typeof key?jq_deparam_fragment(key):jq_deparam_fragment(coerce)[key]},jq_bbq.removeState=function(arr){var state={};arr!==undefined&&(state=jq_bbq_getState(),$.each($.isArray(arr)?arr:arguments,function(i,v){delete state[v]})),jq_bbq_pushState(state,2)},jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{add:function(handleObj){function new_handler(e){var hash=e[str_fragment]=jq_param_fragment();e.getState=function(key,coerce){return key===undefined||"boolean"==typeof key?jq_deparam(hash,key):jq_deparam(hash,coerce)[key]},old_handler.apply(this,arguments)}var old_handler;return $.isFunction(handleObj)?(old_handler=handleObj,new_handler):(old_handler=handleObj.handler,void(handleObj.handler=new_handler))}})}(jQuery,this),function($,window,undefined){"$:nomunge";function get_fragment(url){return url=url||window[str_location][str_href],url.replace(/^[^#]*#?(.*)$/,"$1")}var fake_onhashchange,jq_event_special=$.event.special,str_location="location",str_hashchange="hashchange",str_href="href",supports_onhashchange=(document.documentMode,"on"+str_hashchange in window);$[str_hashchange+"Delay"]=100,jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{setup:function(){return supports_onhashchange?!1:void $(fake_onhashchange.start)},teardown:function(){return supports_onhashchange?!1:void $(fake_onhashchange.stop)}}),fake_onhashchange=function(){function init(){set_history=get_history=function(val){return val}}var timeout_id,iframe,set_history,get_history,self={};return self.start=function(){if(!timeout_id){var last_hash=get_fragment();set_history||init(),function loopy(){var hash=get_fragment(),history_hash=get_history(last_hash);hash!==last_hash?(set_history(last_hash=hash,history_hash),$(window).trigger(str_hashchange)):history_hash!==last_hash&&(window[str_location][str_href]=window[str_location][str_href].replace(/#.*/,"")+"#"+history_hash),timeout_id=setTimeout(loopy,$[str_hashchange+"Delay"])}()}},self.stop=function(){iframe||(timeout_id&&clearTimeout(timeout_id),timeout_id=0)},self}()}(jQuery,this),void 0==brightcove){var brightcove={};brightcove.getExperience=function(){alert("Please import APIModules_all.js in order to use the API.")}}if(void 0==brightcove.experiences){brightcove.servicesURL="http://c.brightcove.com/services",brightcove.cdnURL="http://admin.brightcove.com",brightcove.secureCDNURL="https://sadmin.brightcove.com",brightcove.secureServicesURL="https://secure.brightcove.com/services",brightcove.pubHost="c.$pubcode$.$zoneprefix$$zone$",brightcove.pubSecureHost="secure.$pubcode$.$zoneprefix$$zone$",brightcove.pubSubdomain="ariessaucetown.local",brightcove.experiences={},brightcove.experienceObjects={},brightcove.timeouts={},brightcove.flashTimeoutInterval=1e4,brightcove.htmlTimeoutInterval=1e4,brightcove.experienceNum=0,brightcove.majorVersion=9,brightcove.majorRevision=0,brightcove.minorRevision=28,brightcove.servlet={AS3:"federated_f9",HTML:"htmlFederated"},brightcove.playerType={FLASH:"flash",HTML:"html",INSTALLER:"installer",NO_SUPPORT:"nosupport"},brightcove.errorCodes={UNKNOWN:0,DOMAIN_RESTRICTED:1,GEO_RESTRICTED:2,INVALID_ID:3,NO_CONTENT:4,UNAVAILABLE_CONTENT:5,UPGRADE_REQUIRED_FOR_VIDEO:6,UPGRADE_REQUIRED_FOR_PLAYER:7,SERVICE_UNAVAILABLE:8},brightcove.defaultParam={},brightcove.defaultParam.width="100%",brightcove.defaultParam.height="100%",brightcove.defaultFlashParam={},brightcove.defaultFlashParam.allowScriptAccess="always",brightcove.defaultFlashParam.includeAPI="true",brightcove.defaultFlashParam.templateLoadHandler="myTemplateLoaded",brightcove.defaultFlashParam.allowFullScreen="true",brightcove.defaultFlashParam.seamlessTabbing=!1,brightcove.defaultFlashParam.swliveconnect=!0,brightcove.defaultFlashParam.wmode="window",brightcove.defaultFlashParam.quality="high",brightcove.defaultFlashParam.bgcolor="#999999",brightcove.isIE=void 0!=window.ActiveXObject,brightcove.userAgent=navigator.userAgent,brightcove._queuedAPICalls=[];var brightcoveJS=brightcove;if(brightcove.createExperiences=function(pEvent,pElementID){var params,experience,experiences=[],flashSupport=brightcove.checkFlashSupport(),htmlSupport=brightcove.checkHtmlSupport();null!=pElementID?experiences.push(document.getElementById(pElementID)):experiences=brightcove.collectExperiences(),brightcove.isIE&&(params=document.getElementsByTagName("param"));for(var urlParams=brightcove.cacheUrlParams(),numExperiences=experiences.length,i=0;numExperiences>i;i++){experience=experiences[i],experience=brightcove.copyDefaultParams(experience),experience=brightcove.copySnippetParams(experience,params),experience=brightcove.copyUrlParams(experience,urlParams,numExperiences);var playerType=brightcove.determinePlayerType(experience,flashSupport,htmlSupport),secureConnections="true"==experience.params.secureConnections;if(playerType==brightcove.playerType.HTML&&(secureConnections=!1),playerType!=brightcove.playerType.NO_SUPPORT){if(playerType==brightcove.playerType.HTML)delete experience.params.linkBaseURL;else if(experience.params.includeAPI&&null!=experience.params.templateReadyHandler){experience.params.originalTemplateReadyHandler=experience.params.templateReadyHandler;var handlerName="templateReadyHandler"+experience.id;brightcove[handlerName]=function(id){return function(event){null!=brightcove.internal&&null!=brightcove.internal._instances[id]&&brightcove._addModuleToEvent(id,event);var player=brightcove.experienceObjects[id];brightcove.callHandlerForPlayer(player,"originalTemplateReadyHandler",event)}}(experience.id),experience.params.templateReadyHandler="brightcove."+handlerName}var file=brightcove.generateRequestUrl(experience,playerType,secureConnections);if("http:"==document.location.protocol){var event="http://goku.brightcove.com/1pix.gif?",gokuParams=["dcsuri=/viewer/player_load_req","playerType="+playerType,"playerURL="+encodeURIComponent(document.location||"")],image=brightcove.createElement("image");for(var j in experience.params)gokuParams.push([encodeURIComponent(j)+"="+encodeURIComponent(experience.params[j])]);event+=gokuParams.join("&"),image.src=event}brightcove.renderExperience(experience,file,playerType,secureConnections)}else brightcove.renderInstallGif(experience,secureConnections),brightcove.reportUpgradeRequired(experience)}},brightcove.collectExperiences=function(){for(var experiences=[],allObjects=document.getElementsByTagName("object"),numObjects=allObjects.length,i=0;numObjects>i;i++)/\bBrightcoveExperience\b/.test(allObjects[i].className)&&"application/x-shockwave-flash"!=allObjects[i].type&&experiences.push(allObjects[i]);return experiences},brightcove.cacheUrlParams=function(){var urlParams={};return urlParams.playerKey=decodeURIComponent(brightcove.getParameter("bckey")),urlParams.playerID=brightcove.getParameter("bcpid"),urlParams.titleID=brightcove.getParameter("bctid"),urlParams.lineupID=brightcove.getParameter("bclid"),urlParams.autoStart=brightcove.getParameter("autoStart"),urlParams.debuggerID=brightcove.getParameter("debuggerID"),urlParams.forceHTML=brightcove.getParameter("forceHTML"),urlParams.debug=brightcove.getParameter("debug"),urlParams},brightcove.copyDefaultParams=function(experience){experience.params||(experience.params={}),experience.flashParams||(experience.flashParams={});for(var i in brightcove.defaultParam)experience.params[i]=brightcove.defaultParam[i];for(var j in brightcove.defaultFlashParam)experience.flashParams[j]=brightcove.defaultFlashParam[j];return experience.id.length>0?experience.params.flashID=experience.id:experience.id=experience.params.flashID="bcExperienceObj"+brightcove.experienceNum++,experience},brightcove.copySnippetParams=function(experience,params){brightcove.isIE||(params=experience.getElementsByTagName("param"));for(var param,numParams=params.length,j=0;numParams>j;j++)param=params[j],brightcove.isIE&&param.parentNode.id!=experience.id||(experience.params[param.name]=param.value);return void 0!=experience.params.bgcolor&&(experience.flashParams.bgcolor=experience.params.bgcolor),void 0!=experience.params.wmode&&(experience.flashParams.wmode=experience.params.wmode),void 0!=experience.params.seamlessTabbing&&(experience.flashParams.seamlessTabbing=experience.params.seamlessTabbing),experience},brightcove.copyUrlParams=function(experience,urlParams,numExperiences){void 0==experience.params.autoStart&&void 0!=urlParams.autoStart&&(experience.params.autoStart=urlParams.autoStart),void 0!=urlParams.debuggerID&&(experience.params.debuggerID=urlParams.debuggerID),void 0!=urlParams.forceHTML&&""!=urlParams.forceHTML&&(experience.params.forceHTML=urlParams.forceHTML),void 0!=urlParams.debug&&""!=urlParams.debug&&(experience.params.debug=urlParams.debug);var overrideContent=urlParams.playerID.length<1&&urlParams.playerKey.length<1||urlParams.playerID==experience.params.playerID||urlParams.playerKey==experience.params.playerKey;return overrideContent&&(urlParams.titleID.length>0&&(experience.params.videoID=urlParams.titleID,experience.params["@videoPlayer"]=urlParams.titleID,experience.params.autoStart="false"!=experience.params.autoStart&&"false"!=urlParams.autoStart),urlParams.lineupID.length>0&&(experience.params.lineupID=urlParams.lineupID)),experience},brightcove.determinePlayerType=function(experience,flashSupport,htmlSupport){if(null==flashSupport&&0==htmlSupport)return brightcove.playerType.NO_SUPPORT;if(experience.params.forceHTML){if(window.console){var message="The forceHTML parameter was used for the Brightcove player. This value should ONLY be used for";message+=" development and testing purposes and is not supported in production environments."}return brightcove.playerType.HTML}return null!=flashSupport?brightcove.isFlashVersionSufficient(experience,flashSupport)?brightcove.playerType.FLASH:brightcove.playerType.INSTALLER:htmlSupport&&(brightcove.isSupportedHTMLDevice()||experience.params.htmlFallback)?brightcove.playerType.HTML:brightcove.playerType.NO_SUPPORT},brightcove.isFlashVersionSufficient=function(experience,flashSupport){if(null==flashSupport)return!1;var requestedMajorVersion,requestedMajorRevision,requestedMinorRevision,setMajorVersion=!1;return void 0!=experience.params.majorVersion?(requestedMajorVersion=parseInt(experience.params.majorVersion,10),setMajorVersion=!0):requestedMajorVersion=brightcove.majorVersion,requestedMajorRevision=void 0!=experience.params.majorRevision?parseInt(experience.params.majorRevision,10):setMajorVersion?0:brightcove.majorRevision,requestedMinorRevision=void 0!=experience.params.minorRevision?parseInt(experience.params.minorRevision,10):setMajorVersion?0:brightcove.minorRevision,flashSupport.majorVersion>requestedMajorVersion||flashSupport.majorVersion==requestedMajorVersion&&flashSupport.majorRevision>requestedMajorRevision||flashSupport.majorVersion==requestedMajorVersion&&flashSupport.majorRevision==requestedMajorRevision&&flashSupport.minorRevision>=requestedMinorRevision?!0:!1},brightcove.generateRequestUrl=function(experience,playerType,secureConnections){var file;if(playerType==brightcove.playerType.INSTALLER){file=brightcove.cdnURL+"/viewer/playerProductInstall.swf";var MMPlayerType=brightcove.isIE?"ActiveX":"PlugIn";document.title=document.title.slice(0,47)+" - Flash Player Installation";var MMdoctitle=document.title;file+="?&MMredirectURL="+window.location+"&MMplayerType="+MMPlayerType+"&MMdoctitle="+MMdoctitle,brightcove.reportUpgradeRequired(experience)}else{file=secureConnections?brightcove.getPubURL(brightcove.secureServicesURL,brightcove.pubSecureHost,experience.params.pubCode):brightcove.getPubURL(brightcove.servicesURL,brightcove.pubHost,experience.params.pubCode);var servlet=playerType==brightcove.playerType.HTML?brightcove.servlet.HTML:brightcove.servlet.AS3;file+="/viewer/"+servlet+"?"+brightcove.getOverrides();for(var config in experience.params)file+="&"+encodeURIComponent(config)+"="+encodeURIComponent(experience.params[config])}return file},brightcove.renderInstallGif=function(experience,secureConnections){var containerID="_container"+experience.id,container=brightcove.createElement("span");"%"==experience.params.height.charAt(experience.params.height.length-1)?container.style.display="block":container.style.display="block",container.id=containerID;var cdnURL=secureConnections?brightcove.secureCDNURL:brightcove.cdnURL,linkHTML="<a href='http://www.adobe.com/go/getflash/' target='_blank'><img src='"+cdnURL+"/viewer/upgrade_flash_player2.gif' alt='Get Flash Player' width='314' height='200' border='0'></a>";experience.parentNode.replaceChild(container,experience),document.getElementById(containerID).innerHTML=linkHTML},brightcove.renderExperience=function(experience,file,playerType,secureConnections){var experienceElement,container,experienceID=experience.id,containerID="_container"+experienceID,timeout=brightcove.flashTimeoutInterval;if(experience.params.playerKey||experience.params.playerID||experience.params.playerId||experience.params.playerid){brightcove.experienceObjects[experienceID]=experience;var unminified="true"==brightcove.getParameter("unminified")||"true"===experience.params.unminified;if("true"===experience.params.includeAPI&&!brightcove._apiRequested&&!brightcove.api){var source="/js/api/";unminified&&(source+="unminified/"),source+="SmartPlayerAPI.js";var apiInclude=brightcove.createElement("script");apiInclude.type="text/javascript";var cdnURL=secureConnections?brightcove.secureCDNURL:brightcove.cdnURL;apiInclude.src=cdnURL+source,experience.parentNode.appendChild(apiInclude),brightcove._apiRequested=!0}if(playerType===brightcove.playerType.FLASH&&(file+="&startTime="+(new Date).getTime()),playerType===brightcove.playerType.HTML)timeout=brightcove.htmlTimeoutInterval,file+="&startTime="+(new Date).getTime(),file+="&refURL="+(window.document.referrer?window.document.referrer:"not available"),unminified&&(file+="&unminified=true"),experienceElement=brightcove.createElement("iframe"),experienceElement.id=experienceID,experienceElement.width=experience.params.width,experienceElement.height=experience.params.height,experienceElement.className=experience.className,experienceElement.frameborder=0,experienceElement.scrolling="no",experienceElement.style.borderStyle="none",experience.parentNode.replaceChild(experienceElement,experience),brightcove.experiences[experienceID]=experienceElement,experience.element=experienceElement,(experience.params.videoID||experience.params.videoId)&&(file+="&"+encodeURIComponent("@videoPlayer")+"="+encodeURIComponent(experience.params.videoID||experience.params.videoId)),experienceElement.src=file;else if(brightcove.isIE){container=brightcove.createElement("span"),"%"==experience.params.height.charAt(experience.params.height.length-1)?container.style.display="block":container.style.display="block",container.id=containerID,experience.flashParams.movie=file;var options="";for(var pOption in experience.flashParams)options+='<param name="'+pOption+'" value="'+experience.flashParams[pOption]+'" />';var protocol=secureConnections?"https":"http",experienceHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+protocol+"://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+brightcove.majorVersion+","+brightcove.majorRevision+","+brightcove.minorRevision+',0" id="'+experienceID+'" width="'+experience.params.width+'" height="'+experience.params.height+'" type="application/x-shockwave-flash" class="BrightcoveExperience">'+options+"</object>";experience.parentNode.replaceChild(container,experience),document.getElementById(containerID).innerHTML=experienceHTML,brightcove.experiences[experienceID]=container}else{experienceElement=brightcove.createElement("object"),experienceElement.type="application/x-shockwave-flash",experienceElement.data=file,experienceElement.id=experience.params.flashID,experienceElement.width=experience.params.width,experienceElement.height=experience.params.height,experienceElement.className=experience.className,experienceElement.setAttribute("seamlesstabbing",experience.flashParams.seamlessTabbing);var tempParam;for(var config in experience.flashParams)tempParam=brightcove.createElement("param"),tempParam.name=config,tempParam.value=experience.flashParams[config],experienceElement.appendChild(tempParam);experience.parentNode.replaceChild(experienceElement,experience),brightcove.experiences[experienceID]=experienceElement}brightcove.timeouts[experience.id]=setTimeout(function(){brightcove.handleExperienceTimeout(experienceID)},timeout)}},brightcove.handleExperienceTimeout=function(pID){brightcove.executeErrorHandlerForExperience(brightcove.experienceObjects[pID],{type:"templateError",errorType:"serviceUnavailable",code:brightcove.errorCodes.SERVICE_UNAVAILABLE,info:pID})},brightcove.reportPlayerLoad=function(pID){var timeout=brightcove.timeouts[pID];timeout&&clearTimeout(timeout)},brightcove.reportUpgradeRequired=function(pExperience){brightcove.executeErrorHandlerForExperience(pExperience,{type:"templateError",errorType:"upgradeRequiredForPlayer",code:brightcove.errorCodes.UPGRADE_REQUIRED_FOR_PLAYER,info:pExperience.id})},brightcove.checkFlashSupport=function(){var isIE=void 0!=window.ActiveXObject,versions=isIE?brightcove.checkFlashSupportIE():brightcove.checkFlashSupportStandard();return versions},brightcove.checkFlashSupportIE=function(){var versions;try{var flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),version=flash.GetVariable("$version");versions=/ ([0-9]+),([0-9]+),([0-9]+),/.exec(version)}catch(exception){return null}return{majorVersion:versions[1],majorRevision:versions[2],minorRevision:versions[3]}},brightcove.checkFlashSupportStandard=function(){var versions,majorVersion,majorRevision,minorRevision;try{if(!("undefined"!=typeof navigator.plugins&&navigator.plugins.length>0))return null;if(!navigator.plugins["Shockwave Flash 2.0"]&&!navigator.plugins["Shockwave Flash"])throw new Error;var swfVersion=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",description=navigator.plugins["Shockwave Flash"+swfVersion].description,filename=navigator.plugins["Shockwave Flash"+swfVersion].filename;if(filename.match&&filename.toLowerCase().match(/lite/))throw new Error;versions=description.split(" "),majorVersion=versions[2].split(".")[0],majorRevision=versions[2].split(".")[1],minorRevision=versions[3],""==minorRevision&&(minorRevision=versions[4]),"d"==minorRevision[0]?minorRevision=minorRevision.substring(1):"r"==minorRevision[0]&&(minorRevision=minorRevision.substring(1),minorRevision.indexOf("d")>0&&(minorRevision=minorRevision.substring(0,minorRevision.indexOf("d"))))}catch(exception){return null}return{majorVersion:majorVersion,majorRevision:majorRevision,minorRevision:minorRevision}},brightcove.checkHtmlSupport=function(){var v=brightcove.createElement("video"),videoSupport=(brightcove.createElement("canvas"),!0);if(brightcove.userAgent.match(new RegExp("android","i"))||(videoSupport=!(!v.canPlayType||!v.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))),brightcove.userAgent.match(/BlackBerry.*Version\/6\.0/))return!1;var canvasSupport=!!brightcove.createElement("canvas").getContext;return videoSupport&&canvasSupport},brightcove.isSupportedHTMLDevice=function(pUAString){for(var types=["iPad","iPhone","iPod","android"],numTypes=types.length,uaString=pUAString||brightcove.userAgent,i=0;numTypes>i;i++)if(uaString.match(new RegExp(types[i],"i")))return!0;return!1},brightcove.getTechnology=function(pExperienceId){for(var id in brightcove.experiences)if(pExperienceId==id)return"object"==brightcove.experiences[id].tagName?brightcove.playerType.FLASH:brightcove.playerType.HTML;return brightcove.playerType.NO_SUPPORT},brightcove.respondToMessages=function(pMessage){if(brightcove.verifyMessage(pMessage)){var messageDataObject,messageParts=pMessage.data.split("::"),type=messageParts[1],messageJson=messageParts[2].split("\n").join(" ");switch(messageDataObject=window.JSON?window.JSON.parse(messageJson):brightcove.json_parse(messageJson),type){case"error":brightcove.executeMessageCallback(messageDataObject,brightcove.executeErrorHandlerForExperience);break;case"api":brightcove.handleAPICallForHTML(messageDataObject);break;case"handler":var event=brightcove.internal._convertDates(messageDataObject.event);try{brightcove.internal._handlers[messageDataObject.handler](event)}catch(e){}break;case"asyncGetter":var data=brightcove.internal._convertDates(messageDataObject.data);brightcove.internal._handlers[messageDataObject.handler](data)}}},brightcove.verifyMessage=function(pMessage){return pMessage.data.match(/brightcove.player/)},brightcove.handleAPICallForHTML=function(pMessageObject){var experience=brightcove.experienceObjects[pMessageObject.id];if(null!=experience){var id=experience.id,method=pMessageObject.method;switch(method){case"initializeBridge":brightcove.reportPlayerLoad(id),pMessageObject.arguments[0]&&(null!=brightcove.internal?(brightcove.internal._setAPICallback(id,null,pMessageObject.arguments[1]),brightcove.callHandlerForPlayer(experience,"templateLoadHandler",id)):brightcove._apiRequested&&brightcove._queuedAPICalls.push(pMessageObject));break;case"callTemplateReady":if(brightcove._apiRequested&&!brightcove.internal)brightcove._queuedAPICalls.push(pMessageObject);else{var event=pMessageObject.arguments;brightcove._addModuleToEvent(id,event),brightcove.callHandlerForPlayer(experience,"templateReadyHandler",event)}}}},brightcove._addModuleToEvent=function(pID,pEvent){if(null!=pEvent.type&&brightcove.api){var experience=brightcove.api.getExperience(pID);if(experience){var module=experience.getModule("experience");pEvent.target=module}}},brightcove.callHandlerForPlayer=function(pExperience,pHandler,pArgument){if(pExperience&&pExperience.params&&pExperience.params[pHandler]){var namespaces,namespaceArray=pExperience.params[pHandler].split(".");if((namespaces=namespaceArray.length)>1){for(var trace=window,i=0;namespaces>i;i++)trace=trace[namespaceArray[i]];"function"==typeof trace&&trace(pArgument)}else window[pExperience.params[pHandler]](pArgument)}},brightcove.executeErrorHandlerForExperience=function(pExperience,pErrorObject){brightcove.callHandlerForPlayer(pExperience,"templateErrorHandler",pErrorObject)},brightcove.executeMessageCallback=function(pMessageDataObject,pCallback){var experience;for(var experienceKey in brightcove.experienceObjects)if(experience=brightcove.experienceObjects[experienceKey],experience.element.src===pMessageDataObject.__srcUrl){delete pMessageDataObject.__srcUrl,pCallback(experience,pMessageDataObject);break}},brightcove.createExperience=function(pElement,pParentOrSibling,pAppend){(!pElement.id||pElement.id.length<1)&&(pElement.id="bcExperienceObj"+brightcove.experienceNum++),pAppend?pParentOrSibling.appendChild(pElement):pParentOrSibling.parentNode.insertBefore(pElement,pParentOrSibling),brightcove.createExperiences(null,pElement.id)},brightcove.removeExperience=function(pID){null!=brightcove.experiences[pID]&&brightcove.experiences[pID].parentNode.removeChild(brightcove.experiences[pID])},brightcove.getURL=function(){var url;return url="undefined"!=typeof window.location.search?window.location.search:/(\?.*)$/.exec(document.location.href)},brightcove.getOverrides=function(){for(var url=brightcove.getURL(),query=new RegExp("@[\\w\\.]+=[^&]+","g"),value=query.exec(url),overrides="";null!=value;)overrides+="&"+value,value=query.exec(url);return overrides},brightcove.getParameter=function(pName,pDefaultValue){null==pDefaultValue&&(pDefaultValue="");var url=brightcove.getURL(),query=new RegExp(pName+"=([^&]*)"),value=query.exec(url);return null!=value?value[1]:pDefaultValue},brightcove.createElement=function(el){return document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",el):document.createElement(el)},brightcove.i18n={BROWSER_TOO_OLD:"The browser you are using is too old. Please upgrade to the latest version of your browser."},brightcove.removeListeners=function(){/KHTML/i.test(navigator.userAgent)&&(clearInterval(checkLoad),document.removeEventListener("load",brightcove.createExperiences,!1)),"undefined"!=typeof document.addEventListener?(document.removeEventListener("DOMContentLoaded",brightcove.createExperiences,!1),document.removeEventListener("load",brightcove.createExperiences,!1)):"undefined"!=typeof window.attachEvent&&window.detachEvent("onload",brightcove.createExperiences)},brightcove.getPubURL=function(source,host,pubCode){if(!pubCode||""==pubCode)return source;var re=/^([htps]{4,5}\:\/\/)([^\/\:]+)/i;return host=host.replace("$pubcode$",pubCode).replace("$zoneprefix$$zone$",brightcove.pubSubdomain),source.replace(re,"$1"+host)},brightcove.createExperiencesPostLoad=function(){brightcove.removeListeners(),brightcove.createExperiences()},brightcove.encode=function(string){return string=escape(string),string=string.replace(/\+/g,"%2B"),string=string.replace(/\-/g,"%2D"),string=string.replace(/\*/g,"%2A"),string=string.replace(/\//g,"%2F"),string=string.replace(/\./g,"%2E"),string=string.replace(/_/g,"%5F"),string=string.replace(/@/g,"%40")},/KHTML/i.test(navigator.userAgent)){var checkLoad=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(checkLoad),brightcove.createExperiencesPostLoad())},70);document.addEventListener("load",brightcove.createExperiencesPostLoad,!1)}"undefined"!=typeof document.addEventListener?(document.addEventListener("DOMContentLoaded",brightcove.createExperiencesPostLoad,!1),document.addEventListener("load",brightcove.createExperiencesPostLoad,!1),window.addEventListener("message",brightcove.respondToMessages,!1)):"undefined"!=typeof window.attachEvent?window.attachEvent("onload",brightcove.createExperiencesPostLoad):alert(brightcove.i18n.BROWSER_TOO_OLD)}brightcove.json_parse=function(){"use strict";function debackslashify(text){return text.replace(/\\(?:u(.{4})|([^u]))/g,function(a,b,c){return b?String.fromCharCode(parseInt(b,16)):escapes[c]})}var state,stack,container,key,value,escapes={"\\":"\\",'"':'"',"/":"/",t:"	",n:"\n",r:"\r",f:"\f",b:"\b"},string={go:function(){state="ok"},firstokey:function(){key=value,state="colon"},okey:function(){key=value,state="colon"},ovalue:function(){state="ocomma"},firstavalue:function(){state="acomma"},avalue:function(){state="acomma"}},number={go:function(){state="ok"},ovalue:function(){state="ocomma"},firstavalue:function(){state="acomma"},avalue:function(){state="acomma"}},action={"{":{go:function(){stack.push({state:"ok"}),container={},state="firstokey"},ovalue:function(){stack.push({container:container,state:"ocomma",key:key}),container={},state="firstokey"},firstavalue:function(){stack.push({container:container,state:"acomma"}),container={},state="firstokey"},avalue:function(){stack.push({container:container,state:"acomma"}),container={},state="firstokey"}},"}":{firstokey:function(){var pop=stack.pop();value=container,container=pop.container,key=pop.key,state=pop.state},ocomma:function(){var pop=stack.pop();container[key]=value,value=container,container=pop.container,key=pop.key,state=pop.state}},"[":{go:function(){stack.push({state:"ok"}),container=[],state="firstavalue"},ovalue:function(){stack.push({container:container,state:"ocomma",key:key}),container=[],state="firstavalue"},firstavalue:function(){
stack.push({container:container,state:"acomma"}),container=[],state="firstavalue"},avalue:function(){stack.push({container:container,state:"acomma"}),container=[],state="firstavalue"}},"]":{firstavalue:function(){var pop=stack.pop();value=container,container=pop.container,key=pop.key,state=pop.state},acomma:function(){var pop=stack.pop();container.push(value),value=container,container=pop.container,key=pop.key,state=pop.state}},":":{colon:function(){if(Object.hasOwnProperty.call(container,key))throw new SyntaxError('Duplicate key "'+key+'"');state="ovalue"}},",":{ocomma:function(){container[key]=value,state="okey"},acomma:function(){container.push(value),state="avalue"}},"true":{go:function(){value=!0,state="ok"},ovalue:function(){value=!0,state="ocomma"},firstavalue:function(){value=!0,state="acomma"},avalue:function(){value=!0,state="acomma"}},"false":{go:function(){value=!1,state="ok"},ovalue:function(){value=!1,state="ocomma"},firstavalue:function(){value=!1,state="acomma"},avalue:function(){value=!1,state="acomma"}},"null":{go:function(){value=null,state="ok"},ovalue:function(){value=null,state="ocomma"},firstavalue:function(){value=null,state="acomma"},avalue:function(){value=null,state="acomma"}}};return function(source,reviver){var r,tx=/^[\x20\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;state="go",stack=[];try{for(;r=tx.exec(source),r;)r[1]?action[r[1]][state]():r[2]?(value=+r[2],number[state]()):(value=debackslashify(r[3]),string[state]()),source=source.slice(r[0].length)}catch(e){state=e}if("ok"!==state||/[^\x20\t\n\r]/.test(source))throw state instanceof SyntaxError?state:new SyntaxError("JSON");return"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":value},""):value}}();var BCReadAPIToken="mSs7049lqF2NZe_nAJNIDg1FQDco9YtZEk8YfbwYAEo.";onAdComplete=function(){},function($){function init_brightcove(options){var $this=$(this);if(!$.isReady)return!1;var id="myExperience"+ ++brightcove_player_id,obj=$("<object/>").attr("id",id).addClass(options.className).get(0);null===options.params.width&&(options.params.width=$this.parent().width(),options.params.height=Math.round(.56*options.params.width)),$.each(options.params,function(name,value){var param=$("<param/>").attr("name",name.toString().replace(/"/g,"&quot;")).attr("value",value.toString().replace(/"/g,"&quot;")).get(0);obj.appendChild(param)}),this.html(obj),brightcove.createExperiences()}var useSSL="https:"==document.location.protocol,default_type="article",totalWidth=$(".videoplayer").parent().width();totalHeight=Math.round(.56*totalWidth),schemas=[{_default:{build_mode:"brightcove",_init:init_brightcove,className:"BrightcoveExperience",params:{wmode:"transparent",bgcolor:"#FFFFFF",publisherID:"245991542",isVid:"true",isUI:"true",dynamicStreaming:"true",secureConnections:useSSL?"true":"false",secureHTMLConnections:useSSL?"true":"false",adServerURL:function(options){var baseUrl=(window.location,"http://pubads.g.doubleclick.net/gampad/ads?"),buildCustomParams=function(){var keyValuePairs=globe.dfp.keyValuePairs;getQueryStringValue("test")&&(keyValuePairs.test=getQueryStringValue("test"));var customParamString="pos=preroll&";for(var key in keyValuePairs)customParamString+=key+"="+keyValuePairs[key]+"&";return encodeURIComponent(customParamString.slice(0,customParamString.length-1))},additionalParams=["env=vp","&gdfp_req=1","&impl=s","&output=xml_vast2","&cmsid=5699","&iu=61381659/"+globe.dfp.adUnit,"&sz=640x480","&unviewed_position_start=1","&description_url="+encodeURIComponent("http://bostonglobe.com"),"&cust_params="+buildCustomParams(),"&ciu_szs=300x250"].join("");return baseUrl+additionalParams}}},article:{params:{width:totalWidth,height:totalHeight,playerID:"876399703001",autoStart:!1}},multiclip:{params:{width:totalWidth,height:totalHeight+200,playerID:"1117076191001",playerKey:"AQ~~,AAAAAA6piHY~,DqRT40XOAr_sSabUiNgaZ9mK5Pcm4CDN"}}}],$.fn.videoPlayer=function(opts){return this.each(function(){var data,matches,widget=$(this),child=widget.children().eq(0),style=child.attr("style")||"",rev=widget.attr("data-schema")||1,type=widget.attr("data-player")||default_type,defaults=[{reload:!1}],settings=$.extend(defaults,opts);options=$.extend({},{params:$.deparam(widget.attr("data-params")||""),flashvars:$.deparam(widget.attr("data-flashvars")||""),attributes:$.deparam(widget.attr("data-attributes")||"")},$.deparam(widget.attr("data-options")||"")),widget.data("videoPlayer",data=widget.data("videoPlayer")||{}),(!data.ready||settings.reload)&&($.each(schemas,function(i,v){return defaults[i]=v,rev-1>i}),defaults=$.extend.apply(null,[{}].concat(defaults)),(matches=style.match(/(?:^|\s|;)width\s*:\s*(\d+)px/i))&&(options.params.width=child.width()||matches[1]),(matches=style.match(/(?:^|\s|;)height\s*:\s*(\d+)px/i))&&(options.params.height=child.height()||matches[1]),options=$.extend(!0,{},defaults._default,defaults[type],options,opts),function revive(obj){var k,v;for(k in obj)v=obj[k],"[object Object]"===Object.prototype.toString.call(v)?revive(v):$.isFunction(v)&&"_init"!==k&&(obj[k]=v(options))}(options),$.isFunction(options._init)&&(data.ready=options._init.call(widget,options)!==!1))})};var brightcove_player_id=0}(jQuery),$(function(){$(".videoplayer").videoPlayer(),brightcove.createExperiences();var debounce=function(func,threshold,execAsap){var timeout;return function(){function delayed(){execAsap||func.apply(obj,args),timeout=null}var obj=this,args=arguments;timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||200)}},doc=window.document,docElem=doc.documentElement,$vidEl=$(".videoplayer").children().eq(0);$(window).resize(debounce(function(){var availWidth=(docElem.clientHeight,docElem.clientWidth,$(".videoplayer").parent().width());$vidEl.prop("width",availWidth)}))});

var ugc={};!function(win,$,undefined){$.ajaxSetup({cache:!1});var loc=(win.document,win.location);ugc.init=function(options){$(".comments").length&&(options=options||{},ugc.comments.init(options))},ugc.forms={clearForm:function($form){$form.trigger("reset"),$("#image-url").length&&""!==$("#image-url").val()&&this.removePhoto()},checkForm:function($form){var message='<div class="required-message">Please fill out all required fields.</div>',missingCount=0,requiredInputs=$form.find('[data-required="true"]');return $form.find(".checkboxes").length&&0===$form.find("input:checked").length&&missingCount++,$.each(requiredInputs,function(){""===$(this).val()&&missingCount++}),missingCount>0?($(".required-message").length||$form.parent().append(message),!1):($(".required-message").length&&$(".required-message").remove(),!0)}},ugc.actions={iaEndpoint:"/ugc/interactions/",userEndpoint:"/ugc/users/",createIa:function(actionObj,silent){return silent=silent||!1,this.ajaxCall("POST",this.iaEndpoint,actionObj,silent)},modifyIa:function(actionId,actionObj,silent){return this.ajaxCall("PATCH",this.iaEndpoint+actionId,actionObj,silent)},modifyUser:function(userId,actionObj,silent){return this.ajaxCall("PATCH",this.userEndpoint+userId,actionObj,silent)},ajaxCall:function(type,url,data,silent){data=$.isEmptyObject(data)?"":data;var dataType=url.match(".html")?"html":"json";return silent||ugc.util.statusMessage("action"),$.ajax({type:type,url:url,data:JSON.stringify(data),dataType:dataType,contentType:"application/json",xhr:function(){return null===window.XMLHttpRequest||null===(new window.XMLHttpRequest).addEventListener?new window.ActiveXObject("Microsoft.XMLHTTP"):$.ajaxSettings.xhr()}}).done(function(jqXHR,textStatus,errorThrown){silent||ugc.util.statusMessage("success")}).fail(function(jqXHR,textStatus,errorThrown){if(403===jqXHR.status){var message;"spam"==jqXHR.responseText?message="This looks like spam to us. Did we get it wrong? Email us at support@bostonglobe.com":0==jqXHR.responseText.indexOf("Topic with cms uuid")||(message=jqXHR.responseText),$(".status-message").remove(),message&&alert(message)}else silent||ugc.util.statusMessage("error")})}},ugc.comments={topicId:!1,uuId:!1,pluckId:!1,commentCount:0,pageType:"",sortOrder:"",page:1,limit:25,ia:!1,showReplies:!1,newCommentBgColor:"#fff",newCommentBgHighlightColor:"#ebebeb",init:function(options){if(Object.keys(options).length){ugc.comments.topicId=!1,ugc.comments.uuId=!1,ugc.comments.pluckId=!1,ugc.comments.commentCount=0,ugc.comments.pageType="",ugc.comments.sortOrder="",ugc.comments.page=1,ugc.comments.limit=25,ugc.comments.ia=!1,ugc.comments.showReplies=!1,ugc.comments.newCommentBgColor="#fff",ugc.comments.newCommentBgHighlightColor="#ebebeb",ugc.comments.options=options;var $inlineCommentsEl=$("#inline-comments")}var $body=$("body"),bodyBgColor=$body.css("background-color");if("rgb(0, 0, 0)"===bodyBgColor&&(ugc.comments.newCommentBgColor="#000",ugc.comments.newCommentBgHighlightColor="#555"),ugc.comments.pageType="comments",ugc.comments.sortOrder=ugc.util.getQueryStringValue("sort"),ugc.comments.ia=ugc.util.getQueryStringValue("ia"),ugc.comments.showReplies="true"===ugc.util.getQueryStringValue("showReplies"),ugc.comments.page=ugc.util.getQueryStringValue("page")||ugc.comments.page,ugc.comments.page=parseInt(ugc.comments.page,10),"undefined"!=typeof topicId&&(ugc.comments.topicId=topicId),"undefined"!=typeof uuid&&(Object.keys(options).length?ugc.comments.uuId=$inlineCommentsEl.data("commentsUuid"):ugc.comments.uuId=uuid),"undefined"!=typeof pluckId&&(ugc.comments.pluckId=pluckId),ugc.comments.topicId)ugc.comments.fetchComments();else if(ugc.comments.pluckId||ugc.comments.uuId){var id=ugc.comments.pluckId||ugc.comments.uuId;ugc.comments.fetchTopicId(id).success(function(topicData){topicData.total>0?(ugc.comments.topicId=topicData.topics[0].id,ugc.comments.fetchComments(!1,options)):ugc.comments.createTopic(id).success(function(topicData){ugc.comments.topicId=topicData.id,ugc.comments.fetchComments()})})}},initShowHideBar:function(options){function closeComments(changeHash,options){options=options||{};var $commentsContent=$(Object.keys(options).length?"#inline-comments-content":"#comments-content");changeHash=changeHash!==!1,$commentsContent.removeClass("ugc-comments--active"),$commentsToggleBar.html($commentsToggleBar.html().replace("Hide","Show")),changeHash&&globeUrl.replaceHash("")}function openComments(changeHash,options){options=options||{};var $commentsContent=$(Object.keys(options).length?"#inline-comments-content":"#comments-content"),$commentsToggleBar=$(Object.keys(options).length?"#jsx-comments-toggle-bar":"#comments-toggle-bar");if(changeHash=changeHash!==!1,$commentsContent.addClass("ugc-comments--active"),$commentsToggleBar.html($commentsToggleBar.html().replace("Show","Hide")),changeHash){var hashArg=Object.keys(options).length?"#inline-comments":"#comments";globeUrl.replaceHash(hashArg)}}function hashHandler(event){switch(event=event||{preventDefault:function(){}},window.location.hash){case"#comments":openComments(!1);break;default:event.preventDefault(),closeComments(!1)}}function onCommentsToggleBarClick(event,options){event.preventDefault();var s;options=options||{};var $commentsContent=$(Object.keys(options).length?"#inline-comments-content":"#comments-content");$commentsContent.hasClass("ugc-comments--active")?(closeComments(!0,options),s=s_gi("nytbostonglobecom"),s.tl(this,"o","Article_Comments_Hide")):(openComments(!0,options),s=s_gi("nytbostonglobecom"),s.tl(this,"o","Article_Comments_Expand"))}$(".comment-controls .btn.med").each(function(){$(this).attr("onclick","var s=s_gi('nytbostonglobecom');s.tl(this,'o','Gallery_Comments_Filter_Oldest');")});var globeUrl=globe.util.url,$commentsContent=$(Object.keys(options).length?"#inline-comments-content":"#comments-content"),toggleBarQuery=$(Object.keys(options).length?"#jsx-comments-toggle-bar":"#comments-toggle-bar"),commentCount=ugc.comments.count||parseInt($commentsContent.attr("data-comment-count"),10)||0,$commentCountDisplays=$(Object.keys(options).length?".jsx-comment-count":".js-comment-count"),$commentsToggleBar=$(['<a id="'+(Object.keys(options).length?"jsx-comments-toggle-bar":"comments-toggle-bar")+'" class="js-comments-toggle comments-toggle-bar" href="javascript:void(0);">','<span class="bg-icon-comment-dark"></span> ',(commentCount?"Show ":"")+'<span class="'+(Object.keys(options).length?"jsx-comment-count":"js-comment-count")+'">'+commentCount+"</span> ",'<span class="'+(Object.keys(options).length?"jsx-comment-count-label":"js-comment-count-label")+'">'+pluralize("Comment",commentCount)+"</span>","</a>"].join(""));$commentCountDisplays.html(commentCount),1!==$(toggleBarQuery).length&&$commentsContent.before($commentsToggleBar),$commentsToggleBar.on("click",function(event,options){"jsx-comments-toggle-bar"==$commentsToggleBar.attr("id")?onCommentsToggleBarClick(event,ugc.comments.options):onCommentsToggleBarClick(event)}),$('a[href="#comments"]').on("click",function(event){"#inline-comments"==event.currentTarget.hash?openComments(!0,ugc.comments.options):openComments()}),$('a[href="#inline-comments"]').on("click",function(event){openComments(!0,ugc.comments.options)}),hashHandler(),$(".sticky-comments").find(".js-comment-count")[0].innerHTML=commentCount},eventHandlers:function(){function onCommentControlsOrPageClick(event){var jumpToComments,$link=(globe.util.url,$(event.target)),sortQuery=$link.attr("href"),$container=$(event.currentTarget);event.target!==event.currentTarget&&(event.preventDefault(),ugc.comments.pageType="comments",ugc.comments.sortOrder=ugc.util.getQueryStringValue("sort",sortQuery),ugc.comments.ia=ugc.util.getQueryStringValue("ia",sortQuery),ugc.comments.showReplies="true"===ugc.util.getQueryStringValue("showReplies",sortQuery),ugc.comments.page=ugc.util.getQueryStringValue("page",sortQuery)||ugc.comments.page,ugc.comments.page=parseInt(ugc.comments.page,10),jumpToComments=$container.hasClass("pages"),ugc.comments.fetchComments(jumpToComments)),event.stopPropagation()}$(".more-replies a").on("click",function(event){event.preventDefault(),ugc.comments.toggleReplies($(this))}),$(".js-comments-toggle.bg-button--generic").on("click",function(){var $articleText=$(this).parent().siblings(".article-text").eq(0),$continueButton=$articleText.find(".continue-holder");$articleText.css("height","auto"),$articleText.css("margin-bottom","0"),$continueButton.addClass("no-continue"),$continueButton.siblings(".continue-gradient").addClass("no-continue"),$articleText.find(".signup-form , .article-footer").removeClass("no-continue"),$articleText.siblings(".article-text-spacer").css("margin-bottom","0px"),$articleText.parent().css("min-height","1200px"),hasExpanded=!0,$articleText.siblings(".article-footer").removeClass("no-continue");var s=s_gi("nytbostonglobecom");s.trackLinkVars="eVar15, channel, prop1",s.trackLinkEvents="none",s.tl(this,"o","Article_Comments_Top")}),$(document).on("click",".comment-footer .user-action",function(event){event.preventDefault(),event.stopPropagation();var options=$(event.currentTarget).parents("#inline-comments-content").length?ugc.comments.options:{};ugc.comments.userAction($(this),options)}),$(".add-comment-form").on("submit",function(event){event.preventDefault();var options=$(event.currentTarget).parents("#inline-comments-content").length?ugc.comments.options:{};ugc.comments.submitComment($(this).find(".comment-form")[0],options)}),$(document).on("click",".cancel",function(event){event.preventDefault(),$(".user-form").remove()}),$(".admin-actions").length&&($(document).on("click",".admin-action",function(event){event.preventDefault(),event.stopPropagation(),ugc.comments.adminAction($(this))}),$(document).on("click",".close-modal",function(event){event.preventDefault(),$(".ugc-modal").remove()})),$(".comment-controls, .pages").on("click",onCommentControlsOrPageClick)},userAction:function($el){var elData=$el.data();"reply"===elData.actionType&&this.submitReply(elData.actionId),"report"===elData.actionType&&this.abuseReport(elData.actionId),"like-dislike"===elData.actionType&&this.likeDislike(elData.actionId,elData.property,$el)},fetchTopicId:function(id){var url="/ugc/topics?cmsUuid="+id;return ugc.actions.ajaxCall("GET",url,{},!0)},createTopic:function(id){var url="/ugc/topics",createObj={cmsUuid:id,site:"BGLOBE",title:$("title").text(),type:"ARTICLE"};return ugc.actions.ajaxCall("POST",url,createObj,!0)},commentsUrl:function(){var url="/ajax/comments.html?topic="+ugc.comments.topicId;return"topic"===ugc.comments.pageType&&(url+="&top=true"),ugc.comments.page&&(url+="&page="+ugc.comments.page),ugc.comments.sortOrder&&(url+="&sort="+ugc.comments.sortOrder),ugc.comments.ia&&(url+="&comment="+ugc.comments.ia),url},fetchComments:function(jumpToComments,options){jumpToComments=jumpToComments||!1,options=options||{};var $commentsContent=$(Object.keys(options).length?"#inline-comments-content":"#comments-content"),rootOffset=$commentsContent.offset();return ugc.actions.ajaxCall("GET",ugc.comments.commentsUrl(),{},!0).success(function(comments){if(Object.keys(options).length){var commentsArray=$.parseHTML(comments);commentsArray[2].id="inline-comments-content",comments=commentsArray}$commentsContent.replaceWith(comments),$commentsContent=$(Object.keys(options).length?".ugc.comments-wrapper:eq(1)":".ugc.comments-wrapper:eq(0)"),ugc.comments.showReplies&&ugc.comments.getReplies(ugc.comments.ia,$("#comment-"+ugc.comments.ia+" .more-replies a")),ugc.comments.ia&&ugc.util.goToEl("#comment-"+ugc.comments.ia),ugc.comments.eventHandlers();var commentData=Object.keys(options).length?$(".ugc.comments-wrapper:eq(1)").data():$(".ugc.comments-wrapper:eq(0)").data();ugc.comments.count=commentData.commentCount,ugc.comments.updateCommentCounts(options),ugc.comments.initShowHideBar(options),jumpToComments&&(document.body.scrollTop=rootOffset.top)})},submitComment:function(form,options){var actionObj=$(form).serializeObject(),options=options||{};ugc.forms.checkForm($(form))&&ugc.actions.createIa(actionObj).success(function(comment){ugc.comments.ia=comment.id,ugc.forms.clearForm($(form)),"topic"===ugc.comments.pageType?loc.href="?comments=all&ia="+comment.id:ugc.comments.fetchComments(!0,options)})},updateCommentCounts:function(options){options=options||{};var $label=$(Object.keys(options).length?".jsx-comment-count-label":".js-comment-count-label");Object.keys(options).length?$("#inline-comments-content").find($(".total-comment-count, .jsx-comment-count")).text(ugc.comments.count):$(".total-comment-count, .js-comment-count").text(ugc.comments.count),$label.text(pluralize("Comment",ugc.comments.count))},submitReply:function(actionId){$(".user-form").remove();var $formWrapper=ugc.templates.commentReply(actionId);$formWrapper.insertAfter($("#comment-"+actionId+" > .comment-holder")),$formWrapper.find("form").on("submit",function(event){event.preventDefault();var actionObj=$(this).serializeObject(),s=s_gi("nytbostonglobecom");s.linkTrackVars="events",s.linkTrackEvents="event5",s.events="event5",$("body").hasClass("big-picture")?s.tl(this,"o","Gallery_Comments_Submit"):s.tl(this,"o","Article_Comments_Submit"),ugc.actions.createIa(actionObj).success(function(){$(".user-form").remove(),"topic"===ugc.comments.pageType?loc.href="?comments=all&ia="+actionId:(ugc.comments.getReplies(actionId,$("#comment-"+actionId+" .more-replies a")),ugc.util.goToEl("#comment-"+actionId),ugc.comments.count++,ugc.comments.updateCommentCounts())})})},cancelReply:function(editor){$(".cancel-reply").on("click",function(event){event.preventDefault(),$(".new-reply").remove(),$(this).unbind()})},likeDislike:function(actionId,property,$el){var actionObj={};actionObj.parentKey=actionId,actionObj.type="likes"===property?"LIKE_ARTICLE_COMMENT":"DISLIKE_ARTICLE_COMMENT",ugc.actions.createIa(actionObj,!0).success(function(){var $countSpan=$el.siblings(".count"),count=parseInt($countSpan.text(),10);$countSpan.text(++count)})},abuseReport:function(actionId){$(".user-form").remove();var $formWrapper=ugc.templates.commentAbuseReport(actionId);$formWrapper.insertAfter($("#comment-"+actionId+" > .comment-holder")).eq(0),$formWrapper.find("form").on("submit",function(event){event.preventDefault();var actionObj=$(this).serializeObject();ugc.actions.createIa(actionObj),$(".user-form").remove()})},getReplies:function(actionId,$el){var $childrenUl,url="/ajax/comments.html?parent="+actionId,$parent=$("#comment-"+actionId),childCount=$parent.attr("data-reply-count");ugc.actions.ajaxCall("GET",url,{},!0).success(function(replies){if("topic"===ugc.comments.pageType)$childrenUl=$('<ul class="children" id="children-'+actionId+'" />').html(replies),$parent.find(".comment-holder").after($childrenUl),$el.data({action:"hide"}).text("Hide replies").parent("div").removeClass("show-more").addClass("hide-more");else{if(childCount>0){$("#children-"+actionId);$("#children-"+actionId).html(replies),childCount>=2&&$el.data({action:"hide"}).text("Hide replies").parent("div").removeClass("show-more").addClass("hide-more")}else $childrenUl=$('<ul class="children" id="children-'+actionId+'" />').html(replies),$parent.append($childrenUl);childCount++,$parent.attr({"data-reply-count":childCount})}})},toggleReplies:function($el){var elData=$el.data();if("show"===elData.action)this.getReplies(elData.actionId,$el);else{var $children=$("#children-"+elData.actionId),childCount=$children.children("li").length;"topic"===ugc.comments.pageType?($children.remove(),$el.data({action:"show"}).text("Show replies ("+childCount+")").parent("div").removeClass("hide-more").addClass("show-more")):($children.children("li").filter(":gt(1)").hide(),$el.data({action:"show"}).text("Show more replies ("+parseInt(childCount-2,10)+")").parent("div").removeClass("hide-more").addClass("show-more"))}ugc.util.goToEl("#comment-"+elData.actionId)},adminAction:function($el){var elData=$el.data(),$formWrapper=ugc.templates.adminReasonForm(elData.property,elData.value);$formWrapper.appendTo("body").find("form").submit(function(event){event.preventDefault();var uiDataValue,uiDataText,actionObj=$(this).serializeObject();"ia"===elData.actionType&&(ugc.actions.modifyIa(elData.actionId,actionObj),uiDataValue="BLOCKED"===elData.value?"UNMODERATED":"BLOCKED",uiDataText="BLOCKED"===elData.value?"Unblock comment":"Block comment"),"user"===elData.actionType&&(ugc.actions.modifyUser(elData.actionId,actionObj),uiDataValue="true"===elData.value?"false":"true",uiDataText="true"===elData.value?"Unblock user":"Block user"),$(".ugc-modal").remove(),$el.text(uiDataText).attr({"data-value":uiDataValue})})}},ugc.util={statusMessage:function(type,customMessageText){$(".status-message").remove();var $messageBox=$('<div class="status-message" />'),$message=$('<span class="message" />'),messageText=customMessageText||"";"action"==type&&""===messageText&&(messageText="Sending..."),"success"==type&&""===messageText&&(messageText="Success!"),"error"==type&&""===messageText&&(messageText="There was an error. Please refresh the page and try again."),$message.text(messageText).addClass(type).appendTo($messageBox),$("body").prepend($messageBox),("success"==type||"error"==type)&&window.setTimeout(function(){$messageBox.fadeOut(400,function(){$(this).remove()})},3e3)},goToEl:function(elId){var $el=$(elId);if($el.length){var elTop=$el.offset().top;$("html, body").animate({scrollTop:elTop},500),ugc.util.fadeColorOut($el,"#ebebeb")}},fadeColorOut:function(element,color){$(element).css("-webkit-transition","all 0.6s ease").css("backgroundColor","#fff").css("-moz-transition","all 0.9s ease").css("-o-transition","all 0.9s ease").css("-ms-transition","all 0.9s ease").css("backgroundColor",color).delay(1500).queue(function(){$(this).css("backgroundColor","#fff"),$(this).dequeue()})},getQueryStringValue:function(key,query){for(var queryString=query?query:loc.search,queryStringArray=queryString.substr(1).split("&"),i=0;i<queryStringArray.length;i++){var keyValueArray=queryStringArray[i].split("=");if(keyValueArray[0]===key)return keyValueArray[1]}return!1}},ugc.templates={commentReply:function(parent){var commentReply=['<div class="new-reply user-form">','<form action="#" class="reply-form" method="post">','<input type="hidden" name="type" value="ARTICLE_COMMENT" />','<input type="hidden" name="parentKey" value="'+parent+'" />','<input type="hidden" name="topicKey" value="'+ugc.comments.topicId+'" />','<div class="form-input">','<textarea type="text" id="reply-to-'+parent+'" class="add-reply-comment richtext" name="body" style="width:100%;" placeholder="Add a reply..."></textarea>',"</div>",'<div class="form-control">','<input type="submit" class="btn primary" value="Submit" />','<a href="#" class="btn cancel">Cancel</a>',"</div>","</form>","</div><!-- / .new-reply -->"].join("");return $(commentReply)},commentAbuseReport:function(actionId){var form=['<div class="report-abuse user-form">','<form action="#" class="report-abuse-form">','<input type="hidden" name="parentKey" value="'+actionId+'" />','<div class="form-section">',"<label>Reason for reporting:</label>",'<select name="type" class="demerit-type">','<option value="DEMERIT_OBSCENITY_VULGARITY">Obscenity or vulgarity</option>','<option value="DEMERIT_HATE_SPEECH">Hate speech</option>','<option value="DEMERIT_PERSONAL_ATTACK">Personal attack</option>','<option value="DEMERIT_ADVERTISING_SPAM">Advertising spam</option>','<option value="DEMERIT_COPYRIGHT_PLAGIARISM">Copyright or plagiarism</option>','<option value="DEMERIT_OTHER">Other</option>',"</select>","</div>",'<div class="form-section">','<textarea type="text" id="abuse-textarea" class="add-abuse-comment short" name="body" placeholder="Additional comments (optional)..."></textarea>',"</div>",'<div class="form-section submit">','<input type="submit" class="btn primary" value="Report" />','<a href="#" class="btn cancel">Cancel</a>',"</div>","</form>","</div><!-- / .report-abuse -->"].join("");return $(form)},adminReasonForm:function(property,value){var modal=['<div class="ugc-modal">','<form class="admin-reason">','<div class="heading">Reason for this action?<a href="#" class="close-modal" data-action="close">&times;</a></div>','<div class="form-section">','<input type="hidden" name="'+property+'" value="'+value+'" />','<textarea name="adminReason" autofocus></textarea>',"</div>",'<div class="form-section submit">','<input type="submit" value="Submit" class="btn primary"/>',"</div>","</form>","</div>"].join("");return $(modal)}},$(document).ready(function(){ugc.init()})}(this,jQuery),function($,a){$.fn.serializeObject=function(){var b={};return $.each(this.serializeArray(),function(d,e){var f=e.name,c=e.value;b[f]=b[f]===a?c:$.isArray(b[f])?b[f].concat(c):[b[f],c]}),b}}(jQuery);

function emailFormLogic(){$(".email-form").on("submit",function(event){event.preventDefault();var $this=$(this),sender=$this.find("[name='email-from-primary']").val(),recipient=$this.find("[name='email-to-primary']").val(),add_message=$this.find("[name='email-mssg-primary']").val(),url_to_send=$this.find("[name='story_url']").val(),checkEmail=function(addresses){return/^[\w\.%\+\-]+@(?:[A-Z0-9\-]+\.)+(?:[A-Z]{2,6})$/i.test(addresses)},emailList=recipient.split(/ *, */),errorMess=function(){$this.find(".email-error").html("REQUIRED INFORMATION IS MISSING OR INVALID.")},submission=function(){$.ajax({type:"POST",url:"/bgemtaf",data:{sender_name:sender,sender_email:sender,recipient_email:recipient,message:add_message,story_url:url_to_send},success:function(){$this.find("form").css("visibility","hidden"),$this.find(".email-error").remove(),$this.find("h4").html("Your message has been sent.")},error:function(){$this.find(".email-error").html("This service is down. Please try again later.")}})};(function(){for(var error=0,i=0;i<emailList.length;++i)(0==checkEmail(emailList[i])||0==checkEmail(sender))&&(errorMess(),error=1);return error?!1:void submission()})()})}if(function(win,undefined){!function($){$(function(){globe.util.url.base;if($("body").hasClass("logged-out")){var hasExpanded=!1,scrollTrigger=0;$(".article-text").append("<div class='continue-gradient'></div><div class='continue-holder' id='continue-reading-waypoint'><div class='continue-text'>CONTINUE READING</div></div>");var sContainer=['<div class="new-articles">','<h3 class="hed-section">Recommended for you</h3>',"</div>"].join("");new Waypoint({element:document.getElementById("continue-reading-waypoint"),handler:function(){$(sContainer).insertBefore(".article .section-nav"),doReact(),this.disable()},offset:"bottom-in-view"});$(".article-text").addClass("hide-on"),$(".article > .article-body").addClass("minheight"),$(".signup-form , .article-footer").addClass("no-continue"),$("#special-article").length||$(".article-text").each(function(index){if(p3=$(this).find(".ad.aside").position(),hasMedia=!1,tooTall=!1,supressVeil=!1,($("#video").length||$("figure.lead-figure").length)&&(hasMedia=!0),$(this).height()>800&&(tooTall=!0),p3||(supressVeil=!0),tooTall||hasMedia||(supressVeil=!0),supressVeil)$(this).removeClass("hide-on"),$(this).find(" .continue-gradient").addClass("no-continue"),$(this).find(" .continue-holder").addClass("no-continue"),$(".signup-form , .article-footer").removeClass("no-continue");else{articleOffset=$(".article-text").offset(),scrollTrigger=articleOffset.top+$(".article-text").height()-$(window).height();var hideTo=p3.top+410;tooTall&&!hasMedia&&(hideTo=850),$(this).css("height",hideTo)}}),$(".continue-holder").click(function(){$(this).parents(".article-text").css("height","auto"),$(this).parents(".article-text").css("margin-bottom","0"),$(this).addClass("no-continue"),$(this).siblings(".continue-gradient").addClass("no-continue"),$(".signup-form , .article-footer").removeClass("no-continue"),$(this).parent().siblings(".article-text-spacer").css("margin-bottom","0px"),$(".article>.article-body").css("min-height","1200px"),hasExpanded=!0;var s=s_gi("nytbostonglobecom");s.linkTrackVars="eVar15,channel,prop1",s.tl(this,"o","Article_ContinueReading_Truncated"),Waypoint.refreshAll()})}var t,l=(new Date).getTime();$(window).scroll(function(){var now=(new Date).getTime();now-l>400&&($(this).trigger("scrollStart"),l=now),clearTimeout(t),t=setTimeout(function(){$(window).trigger("scrollEnd")},400)}),$.fn.scroller=function(){function resolveAdPositioning(){$wrap.removeClass(relC+" "+fixC).css({top:""}),$el.offset().top+$elH<$(win).scrollTop()?$wrap.addClass(fixC):$ad.offset().top+$wrapH<$(win).scrollTop()&&($wrap.addClass(relC).css({top:$elH}),adjustAdPositioning())}function adjustAdPositioning(){var CurH=$el.outerHeight();CurH>$elH&&$wrap.css({top:CurH}),$elH=CurH}var $el=this,$par=this.closest(".section-nav"),$ad=$par.find(".ad"),$wrap=$("<div class='scroller-contain'></div>").prependTo($par),$elH=$el.outerHeight(),hedText=$el.find("h1 b").text(),$jump=$("<a href='#section-nav'>"+hedText+"</a>").prependTo($wrap),$wrapH=$wrap.outerHeight(),relC="scroller-contain-relative",fixC="scroller-contain-fixed";$jump.addClass("ad-jump"),$(win).bind("scroll load",resolveAdPositioning).bind("throttledresize",adjustAdPositioning)},$.fn.followRail=function(){function resolvePositioning(){var scrollPosTop=$win.scrollTop();$railClone.css({position:"",top:"",right:"","z-index":""}),$win.height()>=railHeight&&scrollPosTop>railPosBottom&&articleBodyBottom>scrollPosTop?($railClone.css({visibility:"visible",position:"fixed",top:0,right:railPosFromRight,"z-index":9999}),$rail.css({visibility:"hidden"})):$win.height()>=railHeight&&scrollPosTop>railPosBottom&&scrollPosTop>articleBodyBottom?($railClone.css({visibility:"visible",position:"absolute",bottom:0,right:0}),$rail.css({visibility:"hidden"})):($railClone.css({visibility:"hidden"}),$rail.css({visibility:"visible"}))}function adjustPositioning(){var newRailPosRight=$rail.offset().left+$rail.outerWidth(),newRailPosFromRight=$win.width()-newRailPosRight;$railClone.css({right:newRailPosFromRight})}var $rail=this,$railClone=$rail.clone(),$win=$(win),$railOffset=$rail.offset(),railHeight=$rail.outerHeight(),railWidth=$rail.outerWidth(),railPosRight=$railOffset.left+railWidth,railPosFromRight=$win.width()-railPosRight,railPosBottom=$railOffset.top+railHeight,$articleContainer=$rail.parent(".article-container"),$articleBody=$articleContainer.find(".article-body:eq(0)"),articleBodyHeight=$articleBody.outerHeight(),articleBodyBottom=$articleBody.offset().top+articleBodyHeight;$railClone.attr("id",$railClone.attr("id")+"-follow").addClass("nav-follow"),$articleContainer.css("position","relative"),$railClone.css("visibility","hidden"),$rail.after($railClone),$win.on("scroll load",resolvePositioning),$win.on("throttledresize",adjustPositioning)},$.fn.filterHeds=function(){function reOrder(){var $storyOf=$(".story-of");storyLen=$storyOf.length;for(var i=0;i<storyLen;++i)$($storyOf[i]).html("Story "+(i+1)+" of "+storyLen)}for(var thisHeadline=$(".main-hed").text(),$teaseHeds=$(".title-tease a"),i=0,l=$teaseHeds.length;l>i;++i)if($($teaseHeds[i]).text()===thisHeadline){$($teaseHeds[i]).closest(".aside").remove(),reOrder();break}};var $sectionNav=$(".type-article .section-nav"),$navElement=($sectionNav.attr("data-sectionname"),$sectionNav.find(".bg-tabs-sidebar").parent()),$showTabLinks=$(".js-show-tab"),$sectionNav_meter=$(".bg-modal-meter--paywall");$sectionNav_meter.find(".bg-modal-meter__trending");$showTabLinks.on("click",function(event){event.preventDefault();var $tab=$(this),showTargetHref=$tab.attr("href"),$showTarget=$(showTargetHref),$allTargets=$tab.closest("nav").siblings(".aside");$allTargets.attr("hidden","hidden"),$showTabLinks.removeClass("here"),$showTarget.removeAttr("hidden"),$tab.addClass("here")}),$(".type-article .section-nav").length&&$.when($.get("/Fragment/SysConfig/WebPortal/BostonGlobe/Framework/skins/leaf/story/most_viewed_right.jpt"),$.get("/Fragment/SysConfig/WebPortal/BostonGlobe/Framework/skins/leaf/story/most_popular_right.jpt"),$.get("/Fragment/SysConfig/WebPortal/BostonGlobe/Framework/skins/leaf/story/most_comment_right.jpt")).done(function(mostViewed,mostPopular,mostCommented){$navElement.after(mostViewed[0]),$navElement.after(mostPopular[0]),$navElement.after(mostCommented[0]),$showTabLinks.filter(".here").trigger("click")}),$(".primary-tools:nth-of-type(1) .share-print a").attr({onClick:"var s=s_gi('nytbostonglobecom');s.tl(this,'o','ArticleTools_Print_Top')",href:"javascript:print();"}),$(".primary-tools:nth-of-type(2) .share-print a").attr({onClick:"var s=s_gi('nytbostonglobecom');s.tl(this,'o','ArticleTools_Print_Bottom')",href:"javascript:print();"});var isClickClass,isClick=!1,mainDiv=$("#main");mainDiv.length>0&&(isClickClass=mainDiv.attr("class"),isClickClass&&(isClickClass.match("firstClick")||isClickClass.match("eptClick"))&&(isClick=!0));var isStub=$("body").hasClass("stub");if(!isStub&&(globe.loggedIn||isClick)){var loadPreviews=function(){var prettySection=($("h1.section").text(),$("#masthead h1.section").text());if(!prettySection.length)var prettySection=" for you";$(window).scrollTop()+$(window).height()>=1e3&&!$("article.article .new-articles").length,$(window).scrollTop()>=scrollTrigger&&hasExpanded&&(hasExpanded=!1)};$("body").is(".type-article")&&(loadPreviews(),$(window).bind("scrollEnd",function(){loadPreviews()}))}$("ul.tools").each(function(){var tools=$(this),email=tools.find("li.email a.email"),classes=(tools.find("li.email div.email-form"),tools.find("li.email div.email-form input"),{email:"email-on"});$('<a class="cancel" href="#">Cancel</a>').appendTo(email.find("form")).click(function(){return email.removeClass(classes.email),!1}),email.click(function(){return tools.toggleClass(classes.email),$("#email-to-primary",email.parent()).focus(),!1})}),$(document).bind("click touchend",function(e){$("li.share-button .email, li.share").not($(e.target).closest("li")).removeClass("email-on share-on")}),$("ul.tools ul a").bind("touchend",function(e){window.location=$(this).attr("href"),e.stopPropagation()}),emailFormLogic();var stats={},portalIsLoaded=!1;stats.loidEx=$("meta[name=eomportal-loid]").prop("content"),stats.portalCommons,portalIsLoaded?globe.stats.update(stats):$.getScript("/commons/js/portal.js",function(){stats.portalCommons=PortalCommons,globe.stats.update(stats),portalIsLoaded=!0})})}(jQuery)}(window),$("body").hasClass("logged-in"))var loggedInWaypoint=document.getElementById("ad_bigbox1")?document.getElementById("ad_bigbox1"):document.getElementsByClassName("article-text")[0],sContainer=['<div class="new-articles">','<h3 class="hed-section">Recommended for you</h3>',"</div>"].join(""),recomendedWaypoint=new Waypoint({element:loggedInWaypoint,handler:function(){$(sContainer).insertBefore(".article .section-nav"),doReact(),this.disable()},offset:"bottom-in-view"});

(function($){

function share() {
	if (globe.section != 'video') {
		var url = window.location.href,
			headline = document.title,
			summary = $( 'meta[ name=og\\:description ]' ).attr( 'content' ),
			loid = $( 'meta[ name=eomportal-loid ]' ).attr( 'content' ),
			shorturl = $( '.share-twitter' ).data( 'short' ),
			counter = 'ShareCount',
			counturl = '/Statistics'
		if ($('#video').length > 0) headline = "Boston Globe video: "+headline
		function postStats(d) {
			$.ajax({
				url : url+"?counter="+counter+"&loid="+loid,
				type :'POST',
				data : d
			})
		}
		$( '.share-fb' ).click(function(){
			postStats('[1,0,0]')
		})
		$( '.share-twitter' ).click(function(){
			postStats('[0,1,0]')
		})
		$( '.share-linkd' ).click(function(){
			postStats('[0,0,1]')
		})
	}
}
globe.shareTools = share;
$(share())})( jQuery );

if (typeof globe === 'undefined') { globe = {}; }

globe.recommendedScrollTopAnimating = false;
globe.backToTopAnimating = false;

(function($){
	globe.changeStickyShareTools = function(url, title) {
		var $twitter = $('.sticky-tools .tw'),
			twitterLink = 'http://twitter.com/intent/tweet',
			$fb = $('.sticky-tools .fb'),
			facebookLink = 'http://www.facebook.com/sharer.php',
			encodedLink = url.match(/http/) !== null ? encodeURIComponent(url): encodeURIComponent('http://' + url), //TODO: make this https compliant
			encodedTitle = encodeURIComponent(title);

		twitterLink += '?' + 'text=' + encodedTitle + '&url=' + encodedLink + '&via=BostonGlobe';
		facebookLink += '?' + 'u=' + encodedLink;

		$twitter.attr('href', twitterLink);
		$fb.attr('href', facebookLink);
	};

	var $topTools = $('.Top.tools');
	var $stickyTools = $('.sticky-tools');
	var active = false;
	var lastScrollTop = 0;
	if ($topTools.length > 0) {
		var checkActive = function(e) {

				// console.log('checking active');
			var st = $(this).scrollTop(),
				newActive = ($topTools.offset().top < $(window).scrollTop());

			if (st > lastScrollTop){
				// downscroll code
				if($stickyTools.hasClass('sticky-tools--active')) {
					$stickyTools.removeClass('sticky-tools--active');
				}
				// if(newActive != active) {
				// 	active = newActive;
				// 	$stickyTools.toggleClass("sticky-tools--active", active);
				// }
			} else {
				// upscroll code
				if( $topTools.offset().top < $(window).scrollTop() && !$stickyTools.hasClass('sticky-tools--active') && globe.recommendedScrollTopAnimating === false ) {
					$stickyTools.addClass('sticky-tools--active');
				} else if ( $topTools.offset().top >= $(window).scrollTop() || globe.recommendedScrollTopAnimating === true) {
					$stickyTools.removeClass('sticky-tools--active');
				}
				// $stickyTools.toggleClass("sticky-tools--active", false);
			}
			lastScrollTop = st;


			// if (newActive != active) {
			// 	active = newActive;
			// 	$stickyTools.toggleClass("sticky-tools--active",active);
			// }
		};

		if($('.js-back-to-top').length) {
			$('.js-back-to-top').on('click', function() {

				globe.backToTopAnimating = true;

				$('body,html').animate({
					scrollTop: 0
				}, 500, function(){globe.backToTopAnimating = false;});

				// Analytics
				var s=s_gi('nytbostonglobecom');
				s.trackLinkVars='none';
				s.trackLinkEvents='none';
				s.tl(this,'o', 'Article_Back to Top - Sticky');



				return false;
			});
		}

		if( globe.loggedIn === null && $('.js-sticky-comments').length ) {
			$('.js-sticky-comments').on('click', function() {
				if(window.location.pathname != globe.util.url.basePath){
					this.href = '#inline-comments';
				}else{
					this.href = "#comments";
				};
				var $articleText = $(this).parent().siblings('.article-text').eq(0),
					$continueButton = $articleText.find('.continue-holder');

				$articleText.css('height','auto');
				$articleText.css('margin-bottom','0');
				//this is the last thing to switch over to multiples
				// $continueButton.parent().addClass('no-continue');
				$continueButton.addClass('no-continue');
				$continueButton.siblings('.continue-gradient').addClass('no-continue');
				$articleText.find( ".signup-form , .article-footer" ).removeClass( "no-continue" );
				$articleText.siblings('.article-text-spacer').css('margin-bottom', '0px');
				$articleText.parent().css('min-height','1200px');
				hasExpanded = true;
				$articleText.siblings( ".article-footer" ).removeClass( 'no-continue' );

				var s=s_gi('nytbostonglobecom');
				s.trackLinkVars='eVar15, channel, prop1';
				s.trackLinkEvents='none';
				s.tl(this,'o', 'Article_Comments - Sticky');
			});
		}
		document.addEventListener('scroll', function(e){
				checkActive();
		});
		checkActive();
	}
})( jQuery );


"undefined"==typeof bglobe&&(bglobe={}),function(win,$,undefined){function moveLeft(){$(".feat-strip ul li:last-child").prependTo(".feat-strip ul"),module.$featStrip.css("margin-left",-module.widthOfArticle),module.$featStrip.animate({"margin-left":0},300)}function moveRight(){module.$featStrip.animate({"margin-left":-module.widthOfArticle},300,function(){$(".feat-strip ul li:first-child").appendTo(".feat-strip ul"),module.$featStrip.css("margin-left","")})}var module={};module.tabletInit=function(){$(".feat-strip-wrapper").css("overflow-x","auto"),$(".feat-button-left, .feat-button-right").css("display","none")},module.desktopInit=function(){module.$rightButton.on("click",function(){moveRight()}),module.$leftButton.on("click",function(){moveLeft()})},$(document).ready(function(){$(".feat-strip").length>0&&(module.$leftButton=$(".feat-button-left"),module.$rightButton=$(".feat-button-right"),module.$featStrip=$(".feat-strip ul"),module.widthOfArticle=$(".feat-strip-article").outerWidth(),$("html").hasClass("touch")?module.tabletInit():module.desktopInit())})}(window,jQuery);

!function(win,undefined){globe.dfp.adCatalog=[{DFPPosition:"ad_bigbox4",pos:["btf","bigbox4"],width:"300",height:"250",openx:{label:"ox300x250"}},{DFPPosition:"ad_bigbox3",pos:["atf","bigbox3"],width:"300",height:"250",openx:{label:"ox300x250"}},{DFPPosition:"ad_bigbox2",pos:["btf","bigbox2"],width:"300",height:"250",openx:{label:"ox300x250"}},{DFPPosition:"ad_bigbox1",pos:["atf","bigbox1"],width:"300",height:"250",openx:{label:"ox300x250"}},{DFPPosition:"ad_outofpage2",pos:"billboard",width:"1",height:"1",outOfPage:!0},{DFPPosition:"ad_bracket1",pos:"bracket1",width:"1020",height:"90"},{DFPPosition:"ad_bracket2",pos:"bracket2",width:"590",height:"100"},{DFPPosition:"ad_bracket3",pos:"bracket3",width:"1020",height:"350"},{DFPPosition:"ad_billboard",pos:[["billboard"],["inpage"]],width:"1",height:"1"}]}(this);

!function($,p){function E(F){return"string"==typeof F}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;return I!==i?(K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),J=K[3]||"",2===G&&E(I)?L=I.replace(H?w:x,""):(N=l(K[2]),I=E(I)?l[H?D:A](I):I,L=2===G?I:1===G?$.extend({},I,N):$.extend({},N,I),L=a(L),H&&(L=L.replace(h,r))),O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J):O=M(F!==i?F:p[g][k]),O}function z(H,F,G){return F===i||"boolean"==typeof F?(G=F,F=a[H?D:A]()):F=E(F)?F.replace(H?w:x,""):F,l(F,G)}function s(I,G,H,F){return E(H)||"object"==typeof H||(F=H,H=G,G=i),this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}var i,c,l,v,q,u,j,h,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,b=$.bbq=$.bbq||{},e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,C={};a[A]=B(f,0,o),a[D]=c=B(f,1,n),c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")},c.noEscape(",/"),$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};return $.each(I.replace(/\+/g," ").split("&"),function(L,Q){var J,K=Q.split("="),P=r(K[0]),O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])?(R[N]=R[N].replace(/\]$/,""),R=R.shift().split("[").concat(R),N=R.length-1):N=0,2===K.length)if(J=r(K[1]),F&&(J=J&&!isNaN(J)?+J:"undefined"===J?i:G[J]!==i?G[J]:J),N)for(;N>=M;M++)P=""===R[M]?O.length:R[M],O=O[P]=N>M?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J;else $.isArray(H[P])?H[P].push(J):H[P]!==i?H[P]=[H[P],J]:H[P]=J;else P&&(H[P]=F?i:"")}),H},l[A]=B(z,0),l[D]=v=B(z,1),$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t}),j=$[y],$.fn[A]=B(s,A),$.fn[D]=B(s,D),b.pushState=q=function(I,F){E(I)&&/^#/.test(I)&&F===i&&(F=2);var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")},b.getState=u=function(F,G){return F===i||"boolean"==typeof F?v(F):v(G)[F]},b.removeState=function(F){var G={};F!==i&&(G=u(),$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})),q(G,2)},e[d]=$.extend(e[d],{add:function(F){function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||"boolean"==typeof K?l(I,K):l(I,L)[K]},H.apply(this,arguments)}var H;return $.isFunction(F)?(H=F,G):(H=F.handler,void(F.handler=G))}})}(jQuery,this),function(win,$,undefined){function checkCookie(){var rdb=getCookie("RDB");return null==rdb||""==rdb?!1:void cookieParser(rdb)}function getCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++)if(x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")),y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1),x=x.replace(/^\s+|\s+$/g,""),x==c_name)return unescape(y)}function h2d(h){return parseInt(h,16)}function zip5checker(hex){var z=parseInt(hex,16).toString();return z.length>4?z:"0"+z}function genderChecker(hex){var response="";switch(hex){case"01":response="m";break;case"02":response="f";break;default:response=""}return response}function age(low,high){var date,curYear,l,h,range;return date=new Date,curYear=date.getFullYear(),l=curYear-h2d(low)+1,h=curYear-h2d(high)-1,l==h?range=curYear-l:(range=curYear-l,range+="-",range+=curYear-h)}function cookieParser(cookie){var obj=new Object;return obj={zip5:zip5checker(cookie.substring(4,10)),gender:genderChecker(cookie.substring(48,50)),age:age(cookie.substring(56,58),cookie.substring(58,60))},$.isEmptyObject(obj)||(globe.dfp.keyValuePairs.age=obj.age,globe.dfp.keyValuePairs.zip=obj.zip5,globe.dfp.keyValuePairs.g=obj.gender),obj}function getQueryStringValue(key){for(var queryStringArray=window.location.search.substr(1).split("&"),i=0;i<queryStringArray.length;i++){var keyValueArray=queryStringArray[i].split("=");if(keyValueArray[0]===key)return keyValueArray[1]}return!1}function addAAMValuesToKeyValuePairs(){var aam_dfp=globe.cookie.get("aam_dfp"),aam=aam_dfp?decodeURIComponent(aam_dfp).split(",")[0]:"",aam_value=aam?aam.split("=")[1]:"";globe.dfp.keyValuePairs.aam=aam_value,globe.dfp.keyValuePairs.aam_uuid=globe.cookie.get("aam_uuid")}var adKeys=[];for(var i in globe.dfp.adCatalog){var obj=globe.dfp.adCatalog[i];adKeys[obj.DFPPosition]={},adKeys[obj.DFPPosition].pos=obj.pos||!1,adKeys[obj.DFPPosition].width=obj.width||"100%",adKeys[obj.DFPPosition].height=obj.height||"250",adKeys[obj.DFPPosition].outOfPage=obj.outOfPage,adKeys[obj.DFPPosition].openx=obj.openx}globe.dfp.loader=function(){if(globe.dfp.adUnit){var www=globe.dfp.adUnit.indexOf("www.");0===www&&(globe.dfp.adUnit=globe.dfp.adUnit.replace("www.",""));for(var $ads=$(".ad:not([data-adname-complete])"),iAds=$ads.length,networkCode=61381659,activeAds=[],i=0;iAds>i;i++){var $thisAd=$($ads[i]),DFPPosition=$thisAd.attr("id");if(adKeys[DFPPosition]){var adWidth=parseInt(adKeys[DFPPosition].width,10),adHeight=parseInt(adKeys[DFPPosition].height,10);!function(DFPPosition){googletag.cmd.push(function(){if(adKeys[DFPPosition].outOfPage)googletag.defineOutOfPageSlot("/"+networkCode+"/"+globe.dfp.adUnit,DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos);else try{window.OX&&adKeys[DFPPosition].openx?googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos).setTargeting(adKeys[DFPPosition].openx.label,OX.dfp_bidder.getPrice(DFPPosition)):"ad_billboard"===DFPPosition?googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[[1232,30],[1232,90],[1232,415],[982,300],[982,30],[320,480],[320,50],[768,30]],DFPPosition).setCollapseEmptyDiv(!0,!0).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos):googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos)}catch(e){googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos)}})}(DFPPosition),$thisAd.attr("data-adname-complete",!0),$thisAd.is(":visible")||$thisAd.parents(".saved-panel").length?activeAds.push(DFPPosition):$thisAd.empty()}}googletag.cmd.push(function(){googletag.pubads().enableSingleRequest(),googletag.enableServices()}),globe.dfp.keyValuePairs.test=getQueryStringValue("test");var kvPairs=globe.dfp.keyValuePairs;googletag.cmd.push(function(){for(var key in kvPairs)googletag.pubads().setTargeting(key,kvPairs[key])}),googletag.cmd.push(function(){for(var i=0;i<activeAds.length;i++)googletag.display(activeAds[i])})}},globe.dfp.loadInlineAds=function(){if(globe.dfp.adUnit){var $ads=$(".ad:not([data-adname-complete])"),iAds=$ads.length,networkCode=61381659,activeAds=[];globe.dfp.inlineAds=[];for(var i=0;iAds>i;i++){var $thisAd=$($ads[i]),DFPPosition=$thisAd.attr("id");if(adKeys[DFPPosition]){var adWidth=parseInt(adKeys[DFPPosition].width,10),adHeight=parseInt(adKeys[DFPPosition].height,10);!function(DFPPosition){googletag.cmd.push(function(){try{window.OX&&adKeys[DFPPosition].openx?globe.dfp.inlineAds[i]=googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos).setTargeting(adKeys[DFPPosition].openx.label,OX.dfp_bidder.getPrice(DFPPosition)):globe.dfp.inlineAds[i]=googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos)}catch(e){globe.dfp.inlineAds[i]=googletag.defineSlot("/"+networkCode+"/"+globe.dfp.adUnit,[adWidth,adHeight],DFPPosition).addService(googletag.pubads()).setTargeting("pos",adKeys[DFPPosition].pos)}})}(DFPPosition),$thisAd.attr("data-adname-complete",!0),$thisAd.is(":visible")||$thisAd.parents(".saved-panel").length?activeAds.push(DFPPosition):$thisAd.empty()}}googletag.cmd.push(function(){googletag.pubads().enableSingleRequest();for(var i=0;i<activeAds.length;i++)googletag.display(activeAds[i])})}},globe.dfp.refreshInlineAds=function(){googletag.cmd.push(function(){for(var i=0;i<globe.dfp.inlineAds.length;i++)googletag.pubads().refresh([globe.dfp.inlineAds[i]])})},checkCookie(),addAAMValuesToKeyValuePairs(),$(globe.dfp.loader)}(window,jQuery);

!function(win,undefined){!function($){$(function(){screen.width>480&&!(globe&&globe.dev&&globe.dev.mobileOverride)&&$(".facebook-like").each(function(){var oDiv=$(this),params={url:oDiv.data("url")?oDiv.data("url"):window.location.href.split("#")[0],layout:oDiv.data("layout")?oDiv.data("layout"):"button_count",height:oDiv.data("height")?parseInt(oDiv.data("height")):20,width:oDiv.data("width")?parseInt(oDiv.data("width")):125,verb:oDiv.data("verb")?parseInt(oDiv.data("verb")):"recommend"},sURL=escape(params.url+"?emtaf");oDiv.replaceWith('<iframe class="fblike" src="http://www.facebook.com/plugins/like.php?href='+sURL+"&amp;layout="+params.layout+"&amp;action="+params.verb+'&amp;font=lucida+grande&amp;colorscheme=light" scrolling="no" frameborder="0" style="width: '+params.width+"px; height: "+params.height+'px; " allowTransparency="true"></iframe>')}),$("[data-append],[data-replace],[data-after],[data-before]").ajaxInclude()})}(jQuery)}(window);